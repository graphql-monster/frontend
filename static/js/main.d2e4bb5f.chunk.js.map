{"version":3,"sources":["components/Loading/Loading.tsx","components/Unauthorized/Unauthorized.tsx","components/EditorEx/Control.tsx","components/EditorEx/Form.tsx","components/EditorEx/Tabs.tsx","components/EditorEx/Edit.tsx","pages/Projects/defaultSchema.ts","components/Editor/BaseEditor.tsx","app/reducers/userSlice.ts","components/Editor/AceControl.tsx","components/Editor/Control.tsx","pages/Projects/GraphQLError.tsx","pages/Projects/EditForm.tsx","components/List1/FilterItem.tsx","components/List1/RowItem.tsx","components/List1/Row1.tsx","components/DeleteModal/DeleteModal.tsx","components/List1/Table.tsx","components/List1/FilteredList.tsx","pages/Projects/3.png","pages/Projects/Card.tsx","pages/Projects/ProjectCards.tsx","pages/Projects/List.tsx","pages/Projects/Edit.tsx","pages/Exports1/List.tsx","components/List1/ConnectBase.tsx","pages/Users1/List1.tsx","components/Header1/Logo.tsx","components/Header1/AdminHeader.tsx","components/NavDropdownItem/NavDropdownItem.tsx","components/NavLink/NavLink.tsx","components/Header1/PublicHeader.tsx","components/Header1/UserHeader.tsx","components/Header1/Header1.tsx","app/refreshToken.ts","app/apolloClient.ts","pages/UserRoles/List.tsx","pages/UserRoles/Edit.tsx","pages/Projects/GQLPlayground.tsx","pages/home/home.tsx","app/utils.ts","pages/login/PasswordComponent.tsx","app/hooks.ts","pages/login/Register.tsx","pages/login/Login.tsx","pages/pricing/pricing.tsx","pages/pricing/subsribe.tsx","pages/Documentation1/SchemaDescription.tsx","pages/Documentation1/markdowns/Schema.md.js","pages/pricing/subsribe-list.tsx","pages/login/VerifyUser.tsx","pages/login/UserInfo.tsx","pages/login/ForgottenPassword.tsx","pages/login/ForgottenPasswordReset.tsx","pages/login/PassportCallback.tsx","gen/Export/Edit.tsx","components/Editor/HiddenItem.tsx","pages/Exports1/PdfDownloadState.tsx","pages/Exports1/Edit.tsx","app/store.ts","pages/Files/List.tsx","pages/Documentation1/ObtainToken.tsx","pages/Documentation1/markdowns/Login.md.js","pages/Documentation1/CreateTodoApp.tsx","pages/Documentation1/markdowns/CreateWebTSApp.md.js","App.tsx","serviceWorker.ts","index.tsx"],"names":["Loading","what","Unauthorized","where","Alert","variant","BaseControl","model","field","onChange","name","edit","label","control","placeholder","useState","value","setValue","useEffect","onUpdate","Form","Group","controlId","Label","env","target","Control","type","FormControl","Feedback","BaseForm","fields","doUpdate","map","EditTabs","tabs","Object","keys","key","setKey","Tabs","id","activeKey","onSelect","k","tab","idx","Tab","eventKey","title","style","marginTop","join","getDataFromRaw","rawData","BaseEdit","externId","query","onUpdated","updateCache","renameError","onCompleted","localId","setLocalId","unauthorized","setUnauthorized","errors","setErrors","haveTabs","some","isNaN","models","setModel","handleError","incommingError","incomingErrors","message","split","error","skipLoading","useQuery","QUERY","variables","skip","loadedDataRaw","console","log","loadedData","updateDataFromLoaded","onError","e","loading","useMutation","CREATE_MUTATION","errorPolicy","raw","data","update","createProjectMutation","UPDATE_MUTATION","updateProjectMutation","useCallback","userId","localStorage","getItem","margin","Button","onClick","length","Boolean","BaseEditor","form","children","storedData","setStoredData","onSubmit","initialState","user","token","email","roles","role","verified","userFromStorage","userSlice","createSlice","reducers","login","state","action","userToken","payload","setItem","refreshToken","toString","r","logout","removeItem","selectUser","actions","AceControl","required","formState","register","getValues","defaultHight","touchedFields","dirtyFields","height","setHeight","Fragment","width","resizeHandles","onResize","_","size","minConstraints","editorProps","$blockScrolling","isInvalid","GraphQLError","graphQLError","gqe","ProjectEditForm","graphQlError","projectId","history","useSelector","useHistory","selectedTab","setSelectedTab","reactForm","useForm","handleSubmit","processSubmit","watch","className","tabKey","replace","disabled","basicOptionsName","contains","not_contains","starts_with","not_starts_with","ends_with","not_ends_with","isEmpty","FilterItem","fieldSelected","setFieldSelected","optionSelected","setOptionSelected","filterText","setFilterText","filter","setFilter","doFilter","f","processFilter","option","text","gc","o","o2","go","InputGroup","DropdownButton","as","Prepend","Dropdown","Item","getOwnPropertyNames","ListRowItem","item","fieldDesc","names","element","getElementFromField","component","substr","push","reduce","p","ListRow","onDelete","showDelete","onEdit","getEditLink","doEdit","editLink","useMemo","toLowerCase","to","DeleteModal","show","onHide","category","deleteObject","deleting","Modal","Header","closeButton","Title","Body","Footer","Table","adminMode","queries","setDeleteObject","showDeleteDialog","setShowDeleteDialog","deletingOnDeleteDialog","setDeletingOnDeleteDialog","setLoading","setData","setError","ADMIN_LIST_QUERY","USER_LIST_QUERY","d","dataFields","userRefetch","refetch","userLoading","DELETE_MUTATION","deleteProject","onHideDidaloDelete","deleteProjectMutation","obj","responsive","projectItem","createFilter","AND","addAnd","node","filterDestructNode","n","filterDestruct","fo","params","FilteredList","staticFilter","onCreate","createDefaultFilter","defaultFilter","user_every","filterDestructed","onFilterChange","Card","project","onRemove","projectConnectLink","src","logo","alt","domain","navigator","clipboard","writeText","ProjectCards","projects","gql","GraphiqlLink","ProjectAdminList","data-scroll-speed","ProjectList","projectForRemove","setProjectForRemove","doRemove","a","removeMutation","cache","removeProject","cacheRead","readQuery","writeQuery","allProject","ProjectEdit","createProject","UserList","useParams","project_every","ConnectBase","elementTitle","setTitle","iraw","final","checked","indexOf","ADD","addMutation","REMOVE","updated","updateTitle","id1","id2","onChecked","Check","USER_ROLE_QUERY","ADD_MUTATION","REMOVE_MUTATION","ConnectRole","Logo","href","Badge","UserHeader","onLogout","NavDropdownItem","goTo","NavDropdown","NavLink","Nav","Link","PublicHeader","Navbar","bg","expand","Brand","Toggle","aria-controls","Collapse","Divider","dispatch","useDispatch","find","AdminHeader","axios","post","process","retryLink","RetryLink","attempts","count","operation","delay","Math","random","isRefreshing","pendingRequests","unautheniticatedAction","forward","forward$","fromPromise","Promise","resolve","then","refreshToken_v1","callback","oldHeaders","getContext","headers","setContext","authorization","catch","finally","flatMap","authLink","httpLink","createHttpLink","uri","erroLink","graphQLErrors","networkError","tokenExpired","locations","path","apolloClient","ApolloClient","link","ApolloLink","from","InMemoryCache","defaultOptions","watchQuery","mutate","UserRoleList","UserRoleEdit","GQLPlayground","userState","get","endpoint","store","getState","settings","getSettings","Authorization","XUser","XProject","setSettingsString","JSON","stringify","workspaceName","platformToken","Home","data-wow-delay","strings","typeSpeed","backSpeed","startDelay","loop","isEmailValid","RegExp","test","passwordStrong","password","valid","strong","capital","lower","number","percentage","PasswordComponent","onPasswordChange","strongPassword","Text","ProgressBar","now","useAppDispatch","REGISTER_MUTATION","Register","setEmail","pass","setPass","copy","setCopy","registerMutation","invalidEmail","setInvalidEmail","emailProbablyTaken","setEmailProbablyTaken","setStrong","invalidCopy","setInvalidCopy","onRegister","register_v1","data-bgimage","method","event","c","LOGIN_QL","Login","invalidPass","setInvalidPass","loginMutation","onLogin","login_v1","PricingPage","SUBSCRIBE_MUTATION_QL","SubscribePage","setVerify","subsribed","setSubsribed","subsribe","onSubsribe","validEmail","rows","sitekey","verifyCallback","v","setTimeout","DocumentationSchemaDescription","plugins","gfm","allowDangerousHtml","SubscibesListPage","VERIFY_EMAIL_MUTATION","VerifyUser","match","verifyToken","setVerified","verify","verifying","verifiedError","doVerifyUser","verifyEmail_v1","previouslyVerified","onVerifyUser","CHANGE_PASSWORD_MUTATION","VERIFY_EMAIL_RESEND_MUTATION","UserInfo","oldPassword","setOldPassword","newPassword","setNewPassword","newPasswordCopy","setNewPasswordCopy","showPasswordChanged","setShowPasswordChanged","invalidPasswordCopy","setInvalidNewPasswordCopy","showVerifyEmailSended","setShowVerifyEmailSended","invalidOldPassword","setInvalidOldPassword","userEmail","userVerified","changePassword","verifyEmailResend","onVerifyEmailResend","onChangePassword","changePassword_v1","FORGOTTEN_PASSWORD_REQUEST_MUTATION","ForgottenPassword","emailSent","setEmailSent","doForgottenPassword","onRequestSend","FORGOTTEN_PASSWORD_CHECK_MUTATION","FORGOTTEN_PASSWORD_RESET_MUTATION","ForgotenPasswordReset","setPassword","doForgottenPasswordCheck","loadingForgottenPasswordCheck","dataForgottenPasswordCheck","doForgottenPasswordReset","doCheck","onReset","reset","check","status","isPasswordValid","tokenFromFacebookCode","code","PassportCallback","location","useLocation","codeRaw","showError","errorMessage","response","parse","request","ONE_QUERY","HiddenItem","isRelation","endsWith","storedDataName","storedId","PdfDownloadState","ok","setStatus","url","filename","Headers","append","fetch","blob","newBlob","Blob","window","msSaveOrOpenBlob","objUrl","URL","createObjectURL","document","createElement","download","click","revokeObjectURL","b","fr","FileReader","onload","data1","this","result","readAsText","ExportForm","pdfDownloadState","setPdfDownloadState","testVariables","testToken","testLink","jsonValue","JSON5","escapedValue","encodeURI","onTestDownload","downloadPDF","ExportEdit","createMutation","updateMutation","oneQuery","configureStore","reducer","userReducer","clientGQL","clientUrl","ListFiles","fileList","file","publicKey","ProjectFilesList","setFileList","loadFilesFromClient","xuser","xproject","localFiles","allFile","currentTarget","files","FormData","reject","DocumentationObtainToken","DocumentationCreateTodoApp","App","client","exact","ForgottenPasswordReset","ExportList","hostname","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"whBAOeA,EAJQ,SAAC,GAAiB,IAAD,IAAfC,YAAe,MAAR,GAAQ,EACpC,OAAQ,gDAAiBA,EAAjB,W,SCGGC,EAJa,SAAC,GAAkB,IAAD,IAAhBC,aAAgB,MAAR,GAAQ,EAC1C,OAAQ,cAACC,EAAA,EAAD,CAAOC,QAAS,SAAhB,gCAA2CF,EAA3C,c,SC6DGG,EAvCoC,SAAC,GAA8C,IAA5CC,EAA2C,EAA3CA,MAAOC,EAAoC,EAApCA,MAAOC,EAA6B,EAA7BA,SAC5DC,GADyF,EAAnBC,KAC9DH,EAAwBE,KAAQF,EAAwBE,KAAOF,GACvEI,EAASJ,EAAwBI,MAASJ,EAAwBI,MAAQF,EAC1EG,EAAWL,EAAwBK,QAAWL,EAAwBK,QAAU,KAChFC,EAAeN,EAAwBM,YAAeN,EAAwBM,YAAc,GAJH,EAMrEC,mBAASR,EAAMG,IANsD,mBAMxFM,EANwF,KAMjFC,EANiF,KAQ/FC,qBAAU,WACRD,EAASV,EAAMG,MACd,CAACF,EAAOD,IAEX,IAAMY,EAAW,SAACH,GACP,eAAOT,GACZG,GAAQM,EAEZC,EAASD,GACTP,EAASC,EAAMM,IAGjB,OACE,eAACI,EAAA,EAAKC,MAAN,CAAYC,UAAU,iBAAtB,UACM,cAACF,EAAA,EAAKG,MAAN,UAAaX,IACZC,EACCA,EAAQ,CAACJ,SAAS,SAACe,GAAD,OAAcL,EAASK,EAAIC,OAAOT,QAAQA,QAAOF,gBACnE,cAACM,EAAA,EAAKM,QAAN,CACEC,KAAK,OACLb,YAAaA,EACbL,SAAU,SAACe,GAAD,OAAcL,EAASK,EAAIC,OAAOT,QAC5CA,MAAOA,IAGX,cAACY,EAAA,EAAYC,SAAb,CAAsBF,KAAK,QAA3B,kCC9CGG,GAAgC,SAAC,GAA+C,IAA7CvB,EAA4C,EAA5CA,MAAOwB,EAAqC,EAArCA,OAM/CtB,GANoF,EAA7BuB,SAA6B,EAAnBrB,KAMtD,SAACH,EAAcQ,GAC9BT,EAAMC,GAASQ,IAGjB,OACE,8BACE,cAACI,EAAA,EAAD,UACGW,EAAOE,KAAI,SAACzB,GAAD,OAAc,cAAC,EAAD,CAAaD,MAAOA,EAAOC,MAAOA,EAAOC,SAAUA,Y,8BCItEyB,GApB6B,SAAC,GAAqC,IAApC3B,EAAmC,EAAnCA,MAAOyB,EAA4B,EAA5BA,SAAUD,EAAkB,EAAlBA,OAAQpB,EAAU,EAAVA,KAC7DwB,EAAOC,OAAOC,KAAKN,GADoD,EAEvDhB,mBAASoB,EAAK,IAFyC,mBAEtEG,EAFsE,KAEjEC,EAFiE,KAI7E,OACI,8BACA,cAACC,GAAA,EAAD,CACIC,GAAG,yBACHC,UAAWJ,EACXK,SAAU,SAACC,GAAD,OAAOL,EAAOK,GAAK,KAHjC,SAKKT,EAAKF,KAAI,SAACY,EAAIC,GAAL,OAAY,cAACC,GAAA,EAAD,CAAKC,SAAUH,EAAKI,MAAOJ,EAAMK,MAAO,CAACC,UAAU,QAAnD,SAClB,cAAC,GAAD,CAA4C5C,MAAOA,EAAOyB,SAAUA,EAAUrB,KAAMA,EAAMoB,OAAQA,EAAOc,IAAzG,cAAsBV,EAAKiB,OAA3B,YAAqCN,cCRxCO,GAAiB,SAACC,GAE7B,OAAOA,EADSlB,OAAOC,KAAKiB,GAAS,KAiKxBC,GA5I6B,SAAC,GAA2F,IAAtFC,EAAqF,EAAzFf,GAAcgB,EAA2E,EAA3EA,MAAO/C,EAAoE,EAApEA,KAAMqB,EAA8D,EAA9DA,OAAQ2B,EAAsD,EAAtDA,UAAWC,EAA2C,EAA3CA,YAAaC,EAA8B,EAA9BA,YAAaC,EAAiB,EAAjBA,YAAiB,EACvG9C,mBAASyC,GAD8F,mBAC9HM,EAD8H,KACrHC,EADqH,OAE7FhD,oBAAS,GAFoF,mBAE9HiD,EAF8H,KAEhHC,EAFgH,OAGzGlD,mBAAwB,IAHiF,mBAG9HmD,EAH8H,KAGtHC,EAHsH,KAO/HC,EAAWhC,OAAOC,KAAKN,GAAQsC,MAAK,SAACzB,GAAD,OAAK0B,OAAO1B,MAP+E,EAS3G7B,mBAAS,CACjCL,KAAM,YACN6D,OC9CuB,4EDmC4G,mBAS9HhE,EAT8H,KASvHiE,EATuH,KAc/HC,EAAc,SAACC,GACnB,IAAIC,EAAiBD,EAAeE,QAAQC,MAAM,MAC/CjB,IACDe,EAAiBA,EAAe1C,KAAI,SAAA6C,GAAK,OAAElB,EAAYkB,OAEzDX,EAAUQ,IAyBNI,GAAevB,EA5CgH,EA6C1GwB,mBAASvB,EAAMwB,MAAO,CAC/CC,UAAW,CAACzC,GAAIe,GAChB2B,KAAMJ,EACNlB,YAAa,SAACuB,GACZC,QAAQC,IAAI,gBAAiBF,EAAeL,GA3BnB,SAACK,GAC5B,GAAIA,EAAJ,CAIA,IAAMG,EAAalC,GAAe+B,GAE/BG,EAODf,EAAS,eAAIe,IAEbtB,GAAgB,GAGfP,GAAWA,EAAU6B,IAStBC,CAAqBJ,IAEpBK,QAAS,SAACC,GACXL,QAAQC,IAAI,eAAgBI,EAAEd,SACd,8BAAbc,EAAEd,SACHX,GAAgB,GAElBO,EAAS,CAAC9D,KAAK,GAAI6D,OAAQ,QAZvBoB,EA7C6H,EA6C7HA,QAASb,EA7CoH,EA6CpHA,MA7CoH,EAiEjIc,sBAAYnC,EAAMoC,gBAAiB,CACrCC,YAAa,OACbjC,YAAa,SAACkC,GACZ,IAAMC,EAAO3C,GAAe0C,GAC5BhC,EAAWiC,EAAKvD,IAEhB0B,EAAU,MAEPN,GAAaA,EAAYkC,GACzBrC,GAAWA,EAAUqC,IAG1BE,OAAQtC,EACR8B,QAAShB,IA9E0H,mBA+DnIyB,EA/DmI,iBAgEjIP,QAhEiI,EAgEzGK,KAhEyG,EAgEvFlB,MAiBkDc,sBAC9FnC,EAAM0C,gBACN,CACEL,YAAa,OACbjC,YAAa,SAACmC,GAEZ,IAAMD,EAAO1C,GAAe2C,GAC5BX,QAAQC,IAAI,UAAWU,EAAMD,GAC7BhC,EAAWgC,EAAItD,IAEf0B,EAAU,MAEPN,GAAaA,EAAYkC,GACzBrC,GAAWA,EAAUqC,IAG1BE,OAAQtC,EACR8B,QAAShB,KAlGwH,mBAiF9H2B,EAjF8H,YAsG/HjF,GAtG+H,EAiFrGwE,QAjFqG,EAiF9EK,KAjF8E,EAiF5DlB,MAqBxDuB,uBAAY,WAC3BhB,QAAQC,IAAI,gBAAiBxB,EAASvD,GACnCuD,EACCsC,EAAsB,CAClBlB,UAAU,aACRzC,GAAGqB,GACAvD,KAIT2F,EAAsB,CAClBhB,UAAU,aACRoB,OAAQC,aAAaC,QAAQ,YAC1BjG,OAKZ,CAACuD,EAASvD,KAEb,OAAGyD,EACO,cAAC,EAAD,CAAc7D,MAAK,UAAKO,EAAL,WAG1BiF,EACO,cAAC,EAAD,CAAS1F,KAAMS,IAIvB,sBAAKwC,MAAO,CAACuD,OAAO,QAApB,UACGjD,EAAW,+BAAK9C,EAAL,UAAkB8C,EAAlB,KAA6B,cAACkD,GAAA,EAAD,CAAQC,QAASxF,EAAjB,SAA4BqC,EAAW,SAAW,cAA0B,+BAAK9C,EAAL,WAAkB,cAACgG,GAAA,EAAD,CAAQC,QAASxF,EAAjB,SAA4BqC,EAAW,SAAW,cACxLsB,GAAS,eAAC1E,EAAA,EAAD,CAAOC,QAAS,SAAhB,eAA6ByE,EAAMF,QAAnC,OACTV,GAAUA,EAAO0C,OAAS,GAAK1C,EAAOjC,KAAI,SAACyD,GAAD,OAAM,cAACtF,EAAA,EAAD,CAAOC,QAAS,SAAhB,SAA2BqF,OAC3EtB,EAAW,cAAC,GAAD,CAAUrC,OAAQA,EAAsBxB,MAAOA,EAAOyB,SAAUb,EAAUR,KAAMkG,QAAQ/C,KAAe,cAAC,GAAD,CAAUvD,MAAOA,EAAOyB,SAAUb,EAAUR,KAAMkG,QAAQ/C,GAAU/B,OAAQA,QE/DtL+E,GArGW,SAAC,GAAyF,IAAvFpG,EAAsF,EAAtFA,KAAY8C,GAA0E,EAAhFuD,KAAgF,EAA1EvD,UAAUI,EAAgE,EAAhEA,YAAaF,EAAmD,EAAnDA,UAAWC,EAAwC,EAAxCA,YAAaF,EAA2B,EAA3BA,MAAOuD,EAAoB,EAApBA,SAAoB,EACnFjG,mBAASyC,GAD0E,mBAC1GM,EAD0G,KACjGC,EADiG,OAEzEhD,oBAAS,GAFgE,mBAE1GiD,EAF0G,KAE5FC,EAF4F,OAGrFlD,mBAA0B,IAH2D,mBAG1GmD,EAH0G,KAGlGC,EAHkG,OAK7EpD,mBAAS,IALoE,mBAK1GkG,EAL0G,KAK9FC,EAL8F,KAO3GzC,EAAc,SAACC,GACnB,IAAIC,EAAiBD,EAAeE,QAAQC,MAAM,MAC9CjB,IACFe,EAAiBA,EAAe1C,KAAI,SAAC6C,GAAD,OAAWlB,EAAYkB,OAE7DX,EAAUQ,IAiBNd,EAAc,SAACkC,GACnB,IAAMC,EAAO3C,GAAe0C,GAC5BhC,EAAWiC,EAAKvD,IAChB0B,EAAU,MACNT,GAAWA,EAAUqC,IAGrBhB,GAAevB,EApC4F,EAqCtFwB,mBAASvB,EAAMwB,MAAO,CAC/CC,UAAW,CAAEzC,GAAIe,GACjB2B,KAAMJ,EACNlB,YAAa,SAACuB,IAzBa,SAACA,GAC5B,GAAKA,EAAL,CAIA,IAAMG,EAAalC,GAAe+B,GAE9BG,EACF2B,EAAc,eAAK3B,IAEnBtB,GAAgB,IAgBhBuB,CAAqBJ,IAEvBK,QAAS,SAACC,GACS,8BAAbA,EAAEd,SACJX,GAAgB,MARd0B,EArCyG,EAqCzGA,QArCyG,KAqChGb,MAaec,sBAAYnC,EAAMoC,gBAAiB,CACjEC,YAAa,OACbjC,YAAaA,EACboC,OAAQtC,EACR8B,QAAShB,KAJJyB,EAlD0G,sBAyDjFN,sBAAYnC,EAAM0C,gBAAiB,CACjEL,YAAa,OACbjC,YAAaA,EACboC,OAAQtC,EACR8B,QAAShB,IAJJ2B,EAzD0G,oBAoE3Ge,EAAWd,uBACf,SAACL,GACKlC,GACFK,EAAU,MACViC,EAAsB,CACpBlB,UAAU,aACRzC,GAAIqB,GACDkC,MAIPE,EAAsB,CACpBhB,UAAU,aACRoB,OAAQC,aAAaC,QAAQ,YAC1BR,OAKX,CAAClC,EAASmD,IAGZ,OAAIjD,EACK,cAAC,EAAD,CAAc7D,MAAK,UAAKO,EAAL,WAGxBiF,EACK,cAAC,EAAD,CAAS1F,KAAMS,IAGjB,8BAAMsG,EAASC,EAAYE,EAAUjD,M,6BCpCxCkD,IAFkBb,aAAaC,QAAQ,yBAEb,CAC9Ba,KArBsB,WAAO,IAAD,EACtBC,EAAQf,aAAaC,QAAQ,cACnC,GAAKc,EAIL,MAAO,CACLA,QACAC,MAAOhB,aAAaC,QAAQ,cAC5B/D,GAAI8D,aAAaC,QAAQ,WACzBgB,MAAK,UAAEjB,aACJC,QAAQ,qBADN,aAAE,EAEH3B,MAAM,KACP5C,KAAI,SAACwF,GAAD,MAAW,CAAE/G,KAAM+G,MAC1BC,SAAUb,QAAQN,aAAaC,QAAQ,mBAOnCmB,KAGKC,GAAYC,aAAY,CACnCnH,KAAM,OACN0G,gBACAU,SAAU,CACRC,MADQ,SACFC,EAAOC,GA9CK,IAACC,IA+CHD,EAAOE,QA9CzB5B,aAAa6B,QAAQ,aAAcF,EAAUZ,OAC7Cf,aAAa6B,QAAQ,oBAAqBF,EAAUG,cACpD9B,aAAa6B,QAAQ,UAAWF,EAAUb,KAAK5E,IAC/C8D,aAAa6B,QAAQ,aAAcF,EAAUb,KAAKE,OAClDhB,aAAa6B,QAAQ,gBAAiBvB,QAAQqB,EAAUb,KAAKK,UAAUY,YACvE/B,aAAa6B,QAAQ,aAAcF,EAAUb,KAAKG,MAAMvF,KAAI,SAACsG,GAAD,OAAOA,EAAE7H,QAAM4H,YA0CvEN,EAAMX,KAAO,CACX5E,GAAIwF,EAAOE,QAAQd,KAAK5E,GACxB6E,MAAOW,EAAOE,QAAQb,MACtBC,MAAOU,EAAOE,QAAQd,KAAKE,MAC3BC,MAAOS,EAAOE,QAAQd,KAAKG,MAC3BE,SAAUb,QAAQoB,EAAOE,QAAQd,KAAKK,YAG1Cc,OAXQ,SAWDR,GA9CTzB,aAAakC,WAAW,qBACxBlC,aAAakC,WAAW,cACxBlC,aAAakC,WAAW,WAExBlC,aAAakC,WAAW,iBACxBlC,aAAakC,WAAW,qBA2CbT,EAAMX,SAKNqB,GAAa,SAACV,GAAD,OAAsBA,EAAMX,KAAKA,M,GAE1BO,GAAUe,QAA5BZ,G,GAAAA,MAAOS,G,GAAAA,OAEPZ,MAAf,Q,UC9CegB,GA9CW,SAAC,GAAqH,IAAnHlI,EAAkH,EAAlHA,KAAMuG,EAA4G,EAA5GA,WAAYrG,EAAgG,EAAhGA,MAAOiI,EAAyF,EAAzFA,SAAiCC,GAAwD,EAA/EC,SAA+E,EAArEjI,YAAqE,EAAxDgI,WAAW7H,EAA6C,EAA7CA,SAAU+H,EAAmC,EAAnCA,UAAWC,EAAwB,EAAxBA,aAC7G/E,EAAuC4E,EAAvC5E,OAAQgF,EAA+BJ,EAA/BI,cAAeC,EAAgBL,EAAhBK,YAD8G,GAE/HjF,GAAUA,EAAOxD,GACfwI,GAAiBA,EAAcxI,GACjCyI,GAAeA,EAAYzI,GACbK,mBAASkI,GAAgB,MALwF,mBAKtIG,EALsI,KAK9HC,EAL8H,KAOvIrI,EAAQgI,EAAUtI,GAExBQ,qBAAU,WACJ+F,GAAcA,EAAWvG,IAAOO,EAASP,EAAMuG,EAAWvG,MAC7D,CAACuG,IAMJ,OACE,cAAC,IAAMqC,SAAP,UACE,eAAClI,EAAA,EAAKC,MAAN,CAAYC,UAAS,eAAUZ,GAA/B,UACE,eAACU,EAAA,EAAKG,MAAN,WACGX,EADH,IACWiI,GAAY,OAGvB,cAAC,aAAD,CAAWU,MAAO,IAAMH,OAAQA,EAAQI,cAAe,CAAC,KAAMC,SAXnD,SAACC,EAAD,GAAgC,IAAjBC,EAAgB,EAAhBA,KAC9BN,EAAUM,EAAKP,SAUuEQ,eAAgB,CAAC,IAAK,KAAxG,SACE,qBAAK1G,MAAO,CAAEkG,OAAO,GAAD,OAAKA,EAAL,OAApB,SACE,cAAC,IAAD,CACEG,MAAK,OACLH,OAAM,UAAKA,EAAS,GAAd,MACNpI,MAAgB,MAATA,EAAgBA,EAAQiG,GAAcA,EAAWvG,GACxDD,SAAU,SAACO,GACTC,EAASP,EAAMM,IAEjB6I,YAAa,CAAEC,iBAAiB,GAChCpJ,KAAI,sBAAiBA,SAK3B,cAACkB,EAAA,EAAYC,SAAb,CAAsBF,KAAK,QAA3B,sBACA,eAACP,EAAA,EAAKM,QAAQG,SAAd,CAAuBF,KAAK,UAA5B,oCAA8Df,EAA9D,aCRSc,GAlCM,SAAC,GAAyF,IAAxFhB,EAAuF,EAAvFA,KAAMuG,EAAiF,EAAjFA,WAAYrG,EAAqE,EAArEA,MAAOiI,EAA8D,EAA9DA,SAAUE,EAAoD,EAApDA,SAAUjI,EAA0C,EAA1CA,YAAagI,EAA6B,EAA7BA,UAAW7H,EAAkB,EAAlBA,SACnFiD,EAAsC4E,EAAtC5E,OAAQgF,EAA8BJ,EAA9BI,cAAeC,EAAeL,EAAfK,YACxBrE,EAASZ,GAAUA,EAAOxD,GAChBwI,GAAiBA,EAAcxI,GACjCyI,GAAeA,EAAYzI,GAMzC,OAJAQ,qBAAU,WACL+F,GAAcA,EAAWvG,IAAOO,EAASP,EAAMuG,EAAWvG,MAC7D,CAACuG,IAGD,cAAC,IAAMqC,SAAP,UACE,eAAClI,EAAA,EAAKC,MAAN,CAAYC,UAAS,eAAUZ,GAA/B,UACI,eAACU,EAAA,EAAKG,MAAN,WAAaX,EAAb,IAAqBiI,GAAY,OACjC,cAACzH,EAAA,EAAKM,QAAN,yBACIC,KAAK,OACLb,YAAaA,GACTiI,EAASrI,EAAa,CAACmI,cAH/B,IAKIkB,UAAWjF,KAIf,cAAClD,EAAA,EAAYC,SAAb,CAAsBF,KAAK,QAA3B,sBAGA,eAACP,EAAA,EAAKM,QAAQG,SAAd,CAAuBF,KAAK,UAA5B,oCAC0Bf,EAD1B,aC1BCoJ,GAAe,SAAC,GAAuB,IAAtBC,EAAqB,EAArBA,aAC1B,OAAQ,mCACHA,EAAahI,KAAI,SAACiI,GAAD,OAAe,cAAC9J,EAAA,EAAD,CAAOC,QAAS,SAAhB,SAA2B6J,UCMvDC,GAAkB,SAAC,GAA4D,IAA1DhD,EAAyD,EAAzDA,SAAUF,EAA+C,EAA/CA,WAAYmD,EAAmC,EAAnCA,aAAcC,EAAqB,EAArBA,UAE9DC,GADOC,uBAAY7B,IACT8B,eAFyE,EAInDzJ,mBAAS,QAJ0C,mBAIlF0J,EAJkF,KAIrEC,EAJqE,KAKnFC,EAAYC,eACAC,GAAwDF,EAAlE5B,SAAkE4B,EAAxDE,cAEZC,GAFoEH,EAA1C7B,UAA0C6B,EAA/B1J,SAA+B0J,EAArB3B,UAAqB2B,EAAVI,MAE1C,SAAC/E,GACrBmB,EAASnB,KAeX,OACE,eAACxD,GAAA,EAAD,CAAMwI,UAAU,iBAAiBtI,UAAW+H,EAAa9H,SAbvB,SAACsI,GACpB,YAAXA,GACFX,EAAQY,QAAR,yBAAkCb,EAAlC,aAGa,UAAXY,GACFX,EAAQY,QAAR,yBAAkCb,EAAlC,WAGFK,EAAeO,GAAU,KAIzB,UACE,cAAClI,GAAA,EAAD,CAAKC,SAAU,OAAQC,MAAO,OAA9B,SACE,eAAC7B,EAAA,EAAD,CAAM+F,SAAU0D,EAAaC,GAA7B,UACE,cAAC,GAAD,aAASpK,KAAM,OAAQE,MAAO,8BAA+BiI,UAAU,EAAM5B,WAAYA,GAAgB0D,KAC5F,OAAZP,QAAY,IAAZA,OAAA,EAAAA,EAAcxD,QAAS,GAAK,cAAC,GAAD,CAAcqD,aAAcG,IACzD,cAAC,GAAD,yBAAY1J,KAAM,SAAUE,MAAO,UAAc+J,GAAjD,IAA4D1D,WAAYA,KACxE,uBACA,cAACP,GAAA,EAAD,CAAQ/E,KAAK,SAAb,uBAGJ,cAACoB,GAAA,EAAD,CAAKC,SAAU,QAASC,MAAO,QAA/B,SACE,eAAC7B,EAAA,EAAD,CAAM+F,SAAU0D,EAAaC,GAA7B,UACE,cAAC,GAAD,yBAASpK,KAAM,oBAAqBE,MAAO,sBAAuBqG,WAAYA,GAAgB0D,GAA9F,IAAyG7J,YAAa,kCACtH,cAAC,GAAD,yBACEJ,KAAM,sBACNE,MAAO,yBACH+J,GAHN,IAIE1D,WAAYA,EACZnG,YACE,mKAGJ,cAAC,GAAD,yBACEJ,KAAM,8BACNE,MAAO,6BACPqG,WAAYA,GACR0D,GAJN,IAKE7J,YAAa,kDAEf,cAAC,GAAD,yBACEJ,KAAM,gCACNE,MAAO,gDACH+J,GAHN,IAIE1D,WAAYA,EACZnG,YACE,oTAGJ,uBACA,cAAC4F,GAAA,EAAD,CAAQ/E,KAAK,SAAb,uBAGJ,cAACoB,GAAA,EAAD,CAAKC,SAAU,QAASC,MAAO,QAA/B,SACE,eAAC7B,EAAA,EAAD,CAAM+F,SAAU0D,EAAaC,GAA7B,UACE,wCACA,cAAC,GAAD,aAASpK,KAAM,gBAAiBE,MAAO,KAAMqG,WAAYA,GAAgB0D,IACzE,cAAC,GAAD,aAASjK,KAAM,oBAAqBE,MAAO,SAAUqG,WAAYA,GAAgB0D,IACjF,cAAC,GAAD,aAASjK,KAAM,yBAA0BE,MAAO,cAAeqG,WAAYA,GAAgB0D,IAC3F,uBACA,wCACA,cAAC,GAAD,aAASjK,KAAM,eAAgBE,MAAO,KAAMqG,WAAYA,GAAgB0D,IACxE,cAAC,GAAD,aAASjK,KAAM,mBAAoBE,MAAO,SAAUqG,WAAYA,GAAgB0D,IAChF,cAAC,GAAD,aAASjK,KAAM,wBAAyBE,MAAO,cAAeqG,WAAYA,GAAgB0D,IAC1F,uBACA,0CACA,cAAC,GAAD,aAASjK,KAAM,kBAAmBE,MAAO,KAAMqG,WAAYA,GAAgB0D,IAC3E,cAAC,GAAD,aAASjK,KAAM,sBAAuBE,MAAO,SAAUqG,WAAYA,GAAgB0D,IACnF,cAAC,GAAD,aAASjK,KAAM,2BAA4BE,MAAO,cAAeqG,WAAYA,GAAgB0D,IAC7F,uBACA,cAACjE,GAAA,EAAD,CAAQ/E,KAAK,SAAb,uBAGJ,cAACoB,GAAA,EAAD,CAAKC,SAAU,UAAWC,MAAO,UAAWkI,UAAWd,IACvD,cAACtH,GAAA,EAAD,CAAKC,SAAU,QAASC,MAAO,QAASkI,UAAWd,Q,6EC/FnDe,I,OAAmB,CACrBC,SAAW,WACXC,aAAe,eACfC,YAAc,cACdC,gBAAkB,kBAClBC,UAAY,YACZC,cAAgB,gBAChBC,QAAU,aA+FCC,GAjFuC,SAAC,GAAwB,IAAvB7J,EAAsB,EAAtBA,OAAQtB,EAAc,EAAdA,SAAc,EAChCM,mBAASgB,EAAO,IADgB,mBACnE8J,EADmE,KACpDC,EADoD,OAE9B/K,mBAAS,YAFqB,mBAEnEgL,EAFmE,KAEnDC,EAFmD,OAGtCjL,mBAAS,IAH6B,mBAGnEkL,EAHmE,KAGvDC,EAHuD,OAI9CnL,mBAAsB,QAJwB,mBAInEoL,EAJmE,KAI3DC,EAJ2D,KAyBpEC,EAAWhG,uBAAY,SAACiG,GACvBH,GAAUG,IACTjH,QAAQC,IAAI,eAAgBgH,GAC5BF,EAAUE,GACV7L,EAAS6L,MAEd,CAACH,EAAQ1L,EAAU2L,IAEhBG,EAAgBlG,uBAAY,SAAC7F,EAAOgM,EAAQC,GAC9C,GAAIA,GAAkB,WAAVD,EAAZ,CAKA,IAAMF,EAAI,GACVA,EAAE,GAAD,OAAI9L,EAAJ,YAAagM,IAAYC,EAC1BJ,EAASC,QANLD,EAAS,QAQd,CAACA,IAEEK,EAAK,SAACC,GACR,IAAMC,EAAKD,EACX,OAAO,WAzCW,IAACnM,IA0CDoM,EAzClBvH,QAAQC,IAAI,gBAAiB9E,GAC7BsL,EAAiBtL,GACjB+L,EAAc/L,EAAOuL,EAAgBE,KA2CnCY,EAAK,SAACF,GACR,IAAMC,EAAKD,EACX,OAAO,WA1CY,IAACH,IA0CSI,EAzC7BvH,QAAQC,IAAI,iBAAkBkH,GAC9BR,EAAkBQ,GAClBD,EAAcV,EAAeW,EAAQP,KA2CzC,OACI,eAACa,GAAA,EAAD,CAAY9B,UAAU,OAAtB,UACI,cAAC+B,GAAA,EAAD,CACI/B,UAAU,eACVgC,GAAIF,KAAWG,QACf5M,QAAQ,UACR4C,MAAO4I,EACPpJ,GAAG,yBALP,SAMSV,EAAOE,KAAI,SAAC0K,GAAD,OAAO,cAACO,GAAA,EAASC,KAAV,CAAuBxG,QAAS+F,EAAGC,GAAnC,SAAwCA,EAAErE,YAAtBqE,QAE/C,cAACI,GAAA,EAAD,CACI/B,UAAU,gBACVgC,GAAIF,KAAWG,QACf5M,QAAQ,eACR4C,MAAOmI,GAAiBW,GACxBtJ,GAAG,yBALP,SAMSL,OAAOgL,oBAAoBhC,IAAkBnJ,KAAI,SAAC0K,GAAD,OAAO,cAACO,GAAA,EAASC,KAAV,CAAuBxG,QAASkG,EAAGF,GAAnC,SAAwCvB,GAAiBuB,IAArCA,QAErF,cAACvL,EAAA,EAAKM,QAAN,CAAcV,MAAOiL,EAAYxL,SA1DlB,SAACiF,GACpB,IAAM+G,EAAO/G,EAAEjE,OAAOT,MACtBqE,QAAQC,IAAI,iBAAkBI,EAAG+G,GACjCP,EAAcO,GACdF,EAAcV,EAAeE,EAAgBU,U,mBCnBxCY,I,OAAwC,SAAC,GAAqB,IAAnBC,EAAkB,EAAlBA,KAAM9M,EAAY,EAAZA,MAAY,EAT9C,SAAC8M,EAAW9M,GACtC,IAAM+M,EAAY/M,EAEZgN,EAAQD,EAAU7M,KAAO6M,EAAU7M,KAAKmE,MAAM,KAAQrE,EAAiBqE,MAAM,KAGnF,MAAO,CAAC4I,QAFQH,EAAKE,EAAM,IAEV9M,KAAM8M,EAAM,GAAIA,SAIFE,CAAoBJ,EAAM9M,GAAlDiN,EADiE,EACjEA,QAAS/M,EADwD,EACxDA,KAAM8M,EADkD,EAClDA,MAEtB,IAAIC,EACF,OAAQ,sDAAiB/M,KAG3B,GAAIF,EAA6BmN,UAAW,CAC1C,IAAMA,EAAanN,EAA6BmN,UAChD,OAAQ,mCAAGA,GAAaA,EAAU,CAAC3M,MAAMyM,EAASD,QAAOF,WAG3D,OAAGG,EAAQG,QAAUH,EAAQ7G,OAAS,GAC5B,qCAAG6G,EAAQG,OAAO,EAAG,IAArB,SAGPH,EAAQI,MAAQJ,EAAQK,QAAUN,EAAM5G,OAAS,EAC1C,mCAAI6G,EAAkBK,QAAO,SAACC,EAAGrI,GAAJ,OAAQqI,EAAIrI,EAAE8H,EAAM,MAAK,MAI9D,mCACCC,MC5BQO,GAAoC,SAAC,GAAwF,IAAtFV,EAAqF,EAArFA,KAAMW,EAA+E,EAA/EA,SAAUvN,EAAqE,EAArEA,KAAqE,IAA/DqB,cAA+D,MAAtD,CAAC,MAAqD,MAA9CmM,kBAA8C,SAA1BC,EAA0B,EAA1BA,OAAQC,EAAkB,EAAlBA,YAC/GC,EAAShI,uBAAY,WACrB8H,GAAQA,EAAOb,KAClB,CAACA,EAAMa,IAEJG,EAAWC,mBAAQ,WACvB,OAAIH,EAAoBA,EAAYd,GAC/B,gBAAgB5M,EAAK8N,cAArB,YAAsClB,EAAK7K,MAC/C,CAAC/B,EAAM4M,EAAMc,IAEhB,OACE,cAAC,IAAM9E,SAAP,UACE,+BACE,oBAAI0B,UAAU,KAAd,SAAoBmD,EAAS,sBAAMxH,QAAS0H,EAAf,SAAwBf,EAAK7K,KAAa,cAAC,IAAD,CAAMgM,GAAIH,EAAV,SAAqBhB,EAAK7K,OAChGV,EAAOE,KACN,SAACzB,GAAD,MACY,OAAVA,GACE,6BACE,cAAC,GAAD,CAAa8M,KAAMA,EAAM9M,MAAOA,SAIvC8M,EAAKjG,MAAQ,6BAAKiG,EAAKjG,KAAKE,QAC5B2G,GACC,oBAAIlD,UAAU,QAAd,SACE,cAACtE,GAAA,EAAD,CACErG,QAAQ,SACRsJ,KAAK,KACLhD,QAAS,WACPsH,EAASX,IAJb,4B,UCQGoB,GA3C0C,SAAC,GAAkE,IAAhEC,EAA+D,EAA/DA,KAAMC,EAAyD,EAAzDA,OAAQX,EAAiD,EAAjDA,SAAUY,EAAuC,EAAvCA,SAAUC,EAA6B,EAA7BA,aAAcC,EAAe,EAAfA,SAO1G,OACE,8BACE,eAACC,GAAA,EAAD,CAAOL,KAAMA,EAAMC,OAAQA,EAA3B,UACE,cAACI,GAAA,EAAMC,OAAP,CAAcC,aAAW,EAAzB,SACE,8BACE,eAACF,GAAA,EAAMG,MAAP,qBACU,KADV,IACiBL,GAAgBA,EAAapO,KAD9C,IACqD,YAKzD,cAACsO,GAAA,EAAMI,KAAP,UACIL,EAKA,0CACYF,EADZ,oBACuCC,GAAgBA,EAAapO,KADpE,aACoFoO,GAAgBA,EAAarM,GADjH,WAJA,+DACiCoM,EADjC,mBAC0D,kCAAKC,GAAgBA,EAAapO,KAAlC,OAD1D,WAC8G,kCAAKoO,GAAgBA,EAAarM,GAAlC,YASlH,eAACuM,GAAA,EAAMK,OAAP,WACE,cAAC3I,GAAA,EAAD,CAAQyE,SAAU4D,EAAU1O,QAAQ,SAASsB,KAAK,SAASgF,QA9B5C,WAChBoI,GACHd,EAASa,IA4BL,oBAGA,cAACpI,GAAA,EAAD,CAAQyE,SAAU4D,EAAU1O,QAAQ,UAAUsG,QAASiI,EAAvD,4BC+FKU,GA3G4B,SAAC,GAA+E,IAA7EnD,EAA4E,EAA5EA,OAAQzL,EAAoE,EAApEA,KAAoE,IAA9D6O,iBAA8D,SAA3CC,EAA2C,EAA3CA,QAASzN,EAAkC,EAAlCA,OAAQoM,EAA0B,EAA1BA,OAAQC,EAAkB,EAAlBA,YAAkB,EAChFrN,oBAAS,GADuE,mBACjHiD,EADiH,KACnGC,EADmG,OAE1ElD,oBAAS,GAFiE,gCAGhFA,mBAAS,OAHuE,mBAGjH+N,EAHiH,KAGnGW,EAHmG,OAIxE1O,oBAAS,GAJ+D,mBAIjH2O,EAJiH,KAI/FC,EAJ+F,OAK5D5O,oBAAS,GALmD,mBAKjH6O,EALiH,KAKzFC,EALyF,OAO1F9O,oBAAS,GAPiF,mBAOxG+O,GAPwG,aAQhG/O,mBAAc,IARkF,mBAQjHiF,EARiH,KAQ3G+J,EAR2G,OAS9FhP,qBAT8F,mBASjH+D,EATiH,KAS1GkL,EAT0G,OAWjEhL,mBAASuK,EAAYC,EAAQS,iBAAmBT,EAAQU,gBAAiB,CAC9HzK,QAAS,SAACC,GACRL,QAAQC,IAAI,eAAgBI,EAAEd,SACb,8BAAbc,EAAEd,QACJX,GAAgB,GAEhB+L,EAAStK,IAGb7B,YAAa,SAACsM,GACZ9K,QAAQC,IAAI,oBAAqB6K,GACjCL,GAAW,GAEX,IAAMM,EAAahO,OAAOgL,oBAAoB+C,GAC1CC,EAAWxJ,OAAS,GAAKuJ,EAAEC,EAAW,IAAIxJ,OAAS,EACrDmJ,EAAQI,EAAEC,EAAW,KAErBL,EAAQ,KAGZ7K,UAAW,CAAEiH,YApBEkE,EAXuG,EAWhHC,QAA+BC,EAXiF,EAW1F5K,QAX0F,EAkCxCC,sBAAY4J,EAAQgB,gBAAiB,CACnH1K,YAAa,OACbjC,YAAa,SAACmC,GACZX,QAAQC,IAAI,SAAUU,EAAKyK,eAC3BC,IACAL,KAEF5K,QAAS,SAACC,GACRL,QAAQC,IAAI,eAAgBI,EAAEd,SACb,8BAAbc,EAAEd,SACJX,GAAgB,MA5CkG,mBAkCjH0M,EAlCiH,YAiDlHD,GAjDkH,EAkCxF/K,QAlCwF,EAkChEb,MAe7B,WACzB6K,GAAoB,GACpBF,EAAgB,QAGZxB,EAAW,SAAC2C,GAChBf,GAA0B,GAC1BF,GAAoB,GACpBF,EAAgBmB,IAYlB,OAAI5M,EACK,cAAC,EAAD,CAAc7D,MAAO,aAE1BoQ,EAAoB,cAAC,EAAD,CAAStQ,KAAM,aAGrC,gCACG6E,GAAS,+CAAgBA,EAAMF,WAEhC,eAAC,KAAD,CAAQiM,YAAU,EAAlB,UACE,gCACE,+BACE,oCADF,OAEG9O,QAFH,IAEGA,OAFH,EAEGA,EAAQE,KAAI,SAACqK,GAAD,MAAa,OAANA,GAAc,6BAAMA,EAAU5L,KAAQ4L,EAAU5L,KAAO4L,OAC1EiD,GAAa,sCACd,4BAGJ,gCACGvJ,EAAKY,QACJZ,EAAK/D,KAAI,SAAC6O,GAAD,OACP,cAAC,GAAD,CAASpQ,KAAMA,EAAM4M,KAAMwD,EAAa7C,SAAUA,EAAUlM,OAAQA,EAAQmM,WAAYqB,EAAWpB,OAAQA,EAAQC,YAAaA,YAKxI,cAAC,GAAD,CACEO,KAAMe,EACNd,OAAQ8B,EACRzC,SAtCW,SAACa,GAChBe,GAA0B,GAC1Bc,EAAsB,CACpBzL,UAAW,CACTzC,GAAIqM,EAAarM,OAmCjBoM,SAAU,UACVC,aAAcA,EACdC,SAAUa,QCnHZmB,GAAe,WACnB,IAAMH,EAAW,GAEjB,OADAA,EAAIlQ,KAAO,MACJ,CAAEsQ,IAAKJ,IAGVK,GAAS,SAACC,EAAW/E,GACzB,IAAIyE,EAAWzE,EAEE,OAAb+E,EAAKxQ,QACPkQ,EAAM,CAACA,IACHlQ,KAAO,OAGbwQ,EAAKrD,KAAK+C,IAGNO,GAAqB,SAArBA,EAAsBD,GAC1B,IADwC,EACpC/E,EAAS,GAD2B,eAGxB+E,GAHwB,IAGxC,2BAAsB,CAAC,IAAZE,EAAW,QAChBA,EAAE1Q,MAAQ0Q,EAAExK,OAAS,EACvBuF,GAAM,WAAQgF,EAAmBC,IAEjCjF,GAAM,YAASiF,EAAEjF,OAAX,MAP8B,8BAWxC,MAAM,IAAN,OAAW+E,EAAKxQ,KAAhB,aAAyByL,EAAOyB,OAAO,GAAvC,OAGIyD,GAAiB,SAAClF,GACtB,IAAMmF,EAAK,CACTnF,OAAQ,GACRoF,OAAQ,IAMV,OAHAD,EAAGnF,OAASA,EAAO6E,IAAIpK,OAAS,EAApB,mBAAoCuK,GAAmBhF,EAAO6E,KAA9D,KAAwE,GACpFM,EAAGC,OAASD,EAAGC,OAAO3K,OAAS,EAAnB,WAA2B0K,EAAGC,OAAO3D,OAAO,GAA5C,KAAoD,GAEzD0D,GA8EME,GA3E2C,SAAC,GAA+G,IAA7G9Q,EAA4G,EAA5GA,KAAM4F,EAAsG,EAAtGA,OAAsG,IAA9FiJ,iBAA8F,SAA3EC,EAA2E,EAA3EA,QAASzN,EAAkE,EAAlEA,OAAgB0P,EAAkD,EAA1DtF,OAAsBuF,EAAoC,EAApCA,SAAUvD,EAA0B,EAA1BA,OAAQC,EAAkB,EAAlBA,YAAkB,EAC3IrN,mBAASwO,EAAYwB,KAAiB,MADqG,mBAChK5E,EADgK,KACxJC,EADwJ,KAEjK9B,EAAUE,cAGVmH,EAAsB,SAACrL,GAC3B,IAAMsL,EAAgBb,KAUtB,OARIzK,GACF2K,GAAOW,EAAcZ,IAAK,CAAEa,WAAY,CAAEpP,GAAI6D,KAG5CmL,GACFR,GAAOW,EAAcZ,IAAKS,GAGrBG,GAGHrF,EAAgB,SAACJ,GACrB,IAAM2F,EAAmBT,GAAelF,GAExC9G,QAAQC,IAAI,gBAAiB,CAAE6G,SAAQ2F,qBAEvC1F,EAAUD,IAGZjL,qBAAU,WACR,IAAM0Q,EAAgBD,EAAoBrL,GAC1CiG,EAAcqF,KACb,CAACtL,IAEJ,IAAMyL,EAAiB1L,uBACrB,SAACiG,GACC,IAAMsF,EAAgBD,EAAoBrL,GAEtCgG,GACF2E,GAAOW,EAAcZ,IAAK1E,GAG5BC,EAAcqF,KAEhB,CAACtL,IAYH,OAAKiJ,GAAcpD,EAKjB,qBAAKnB,UAAU,qBAAf,SACE,oCACE,6BAAKtK,IACL,sBAAKsK,UAAU,WAAf,UACE,cAAC,GAAD,CAAYjJ,OAAQA,EAAQtB,SAAUsR,IACtC,2BAEF,sBAAK/G,UAAU,YAAf,UACE,cAAC,GAAD,CAAOtK,KAAMA,EAAMyL,OAAQA,EAAQqD,QAASA,EAASD,UAAWA,EAAWxN,OAAQA,EAAQoM,OAAQA,EAAQC,YAAaA,IACxH,cAAC1H,GAAA,EAAD,CAAQC,QAvBI,WACd+K,EAAUA,IACTpH,EAAQuD,KAAK,SAAWnN,EAAK8N,cAAgB,YAqB5C,gCAbC,M,SCtHI,I,OAAA,IAA0B,+BC8F1BwD,GAlFuB,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,SAC1C5H,EAAUE,cAEV2H,EAAkB,yCAAqCF,EAAQ5K,KAAK5E,GAAlD,oBAAgEwP,EAAQxP,GAAxE,YAkBxB,OACE,sBAAKuI,UAAU,cAAf,UACE,8BACE,qBAAKA,UAAU,iBAAiBoH,IAAKC,GAAMC,IAAI,UAEjD,sBAAKtH,UAAU,GAAf,UACE,gCACE,oBAAIA,UAAU,kBAAd,mBAAoCiH,EAAQvR,KAA5C,cACA,6BAAKuR,EAAQM,SACb,cAACnS,EAAA,EAAD,CAAOC,QAAQ,UAAf,4IACA,+BACE,sBAAK2K,UAAU,cAAf,UACE,uBAAOrJ,KAAK,OAAOqJ,UAAU,eAAehK,MAAOmR,EAAoBrR,YAAY,uBAAuB2B,GAAG,eAC7G,sBAAMuI,UAAU,kBAAhB,SACE,cAACtE,GAAA,EAAD,CACEsE,UAAU,kBACVrE,QAAS,WACP6L,UAAUC,UAAUC,UAAUP,IAEhClP,MAAM,oBALR,4BAcR,sBAAK+H,UAAU,qBAAf,UACE,wBAAQrJ,KAAK,SAASqJ,UAAU,4CAA4CrE,QA7CrE,WACb2D,EAAQuD,KAAK,kBAAoBoE,EAAQxP,KA4CnC,2BAGA,wBAAQd,KAAK,SAASqJ,UAAU,4CAA4CrE,QA5ClE,WAChB2D,EAAQuD,KAAR,yBAA+BoE,EAAQxP,GAAvC,cA2CM,qBAGA,wBAAQd,KAAK,SAASqJ,UAAU,4CAA4CrE,QA3CpE,WACd2D,EAAQuD,KAAR,yBAA+BoE,EAAQxP,GAAvC,YA0CM,mBAGA,wBACEd,KAAK,SACLqJ,UAAU,4CACVrE,QA7CW,WACnB2D,EAAQuD,KAAR,yBAA+BoE,EAAQxP,GAAvC,eA6CQQ,MAAM,sFAJR,8BAQA,wBACEtB,KAAK,SACLqJ,UAAU,2CACVrE,QAAS,WACPuL,EAASD,IAJb,8BC5CKU,I,OAxBsC,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,SAAUV,EAAe,EAAfA,SAChE,OAAKU,GAAYA,EAAShM,OAAS,EAE/B,qBAAKoE,UAAU,eAAf,SACE,qBAAKA,UAAU,mBAAmBvD,KAAK,QAAvC,yFAQJ,qBAAKuD,UAAU,eAAf,SACG4H,EAAS3Q,KAAI,SAACgQ,GACb,OACE,qBAAKjH,UAAU,oBAAf,SACE,cAAC,GAAD,CAAMiH,QAASA,EAASC,SAAUA,aChBjChC,GAAkB2C,aAAH,oOAetB5C,GAAmB4C,aAAH,iNAchBrC,GAAkBqC,aAAH,uHAQfC,GAAiE,SAAC,GAA2B,EAAzB9R,MAAyB,EAAlBwM,MAAmB,IAAZF,EAAW,EAAXA,KACtF,OAAO,cAAC,IAAD,CAAMmB,GAAE,yBAAoBnB,EAAK7K,GAAzB,aAAR,yBAsGIsQ,GAAsD,WACjE,IAAMzM,EAASC,aAAaC,QAAQ,YAAc,GAClD,OACE,mCACE,qBAAKwE,UAAU,gCAAgCgI,oBAAkB,IAAjE,SACE,qBAAKhI,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,sBAAKA,UAAU,wBAAf,UACE,qBAAKA,UAAU,wBAAf,SAEI,cAAC,GAAD,CACEtK,KAAM,WACNqB,OAAQ,CAAC,OAAQ,CAAErB,KAAM,KAAMuC,MAAO,aAAc0K,UAAWmF,KAC/DxM,OAAQA,EACRiJ,WAAW,EACXC,QAAS,CAAEU,mBAAiBD,oBAAkBO,wBAKpD,qBAAKxF,UAAU,yBASdiI,GAhI+C,SAAC,GAA0B,EAAxB1D,UAAyB,IAClFjF,EAAUE,cADuE,EAE/DzJ,qBAF+D,mBAEhFiF,EAFgF,KAE1E+J,EAF0E,KAGjF1I,EAAOkD,uBAAY7B,KAAe,CAAEjG,GAAI,MAHyC,EAKvC1B,mBAAc,MALyB,mBAKhFmS,EALgF,KAK9DC,EAL8D,KAejFC,EAAQ,yCAAG,uBAAAC,EAAA,6DACfF,EAAoB,MADL,SAETG,EAAe,CAAEpO,UAAW,CAAEzC,GAAIyQ,EAAiBzQ,MAF1C,2CAAH,qDAfyE,EAoB7CuC,mBAASkL,GAAiB,CAClEzK,QAAS,SAACC,GACRL,QAAQC,IAAI,eAAgBI,EAAEd,SAC1Bc,EAAEd,SAMRf,YAAa,SAACsM,GACZ9K,QAAQC,IAAI,oBAAqB6K,GAGjC,IAAMC,EAAahO,OAAOgL,oBAAoB+C,GAC1CC,EAAWxJ,OAAS,GAAKuJ,EAAEC,EAAW,IAAIxJ,OAAS,EACrDmJ,EAAQI,EAAEC,EAAW,KAErBL,EAAQ,KAGZ7K,UAAW,CACTiH,OAAQ,CACN0F,WAAY,CAAEpP,GAAI4E,EAAK5E,QAtBrB6N,EApB+E,EAoB/EA,QApB+E,KAoBtE3K,QA2BQC,sBAAY4K,GAAiB,CACpD1K,YAAa,OACbG,OAAQ,SAACsN,EAAD,GAAsB,IAAZvN,EAAW,EAAXA,KACVwN,EAAgBxN,EAAKwN,cAE3B,GAAIA,EAAe,CACjB,IAAMC,EAAYF,EAAMG,UAAU,CAChCjQ,MAAOyM,GACPhL,UAAW,CACTiH,OAAQ,CAAE0F,WAAY,CAAEpP,GAAI4E,EAAK5E,QAIrC8Q,EAAMI,WAAW,CACflQ,MAAOyM,GACPhL,UAAW,CACTiH,OAAQ,CAAE0F,WAAY,CAAEpP,GAAI4E,EAAK5E,MAEnCuD,KAAM,CACJ4N,WAAYH,EAAUG,WAAWzH,QAAO,SAAC8F,GAAD,OAAkBA,EAAQxP,KAAO+Q,EAAc/Q,SAG3F6N,IACAjL,QAAQC,IAAIU,QAvBXsN,EA/CgF,oBA+EvF,OACE,qCACE,qBAAKtI,UAAU,qBAAqBgI,oBAAkB,IAAtD,SACE,qBAAKhI,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,sBAAKA,UAAU,wBAAf,UACE,sBAAKA,UAAU,aAAf,UACE,cAAC,GAAD,CAAc4H,SAAU5M,EAAMkM,SA3E3B,SAACD,GAChBkB,EAAoBlB,MA2ER,cAACvL,GAAA,EAAD,CAAQC,QAZF,WAClB2D,EAAQuD,KAAK,0BAWD,mCAEF,qBAAK7C,UAAU,sBAKvB,cAAC,GAAD,CAAa2D,OAAQuE,EAAkBtE,OAvFhB,WACzBuE,EAAoB,OAsFiDlF,SAAUmF,EAAUvE,SAAU,UAAWC,aAAcoE,QCpI1HrN,I,cAAe,20TACfM,GAAe,yxTACflB,GAAK,4xGA6EE4O,GAAc,SAAC7N,GAC1B,IAAMM,EAASC,aAAaC,QAAQ,WAC9B6D,EAAYX,MAAM1D,EAAM,0BAFU,EAGlBjF,mBAAiB,QAHC,gCAKdA,mBAAS,KALK,6BAMxByJ,cAgDhB,OACE,qBAAKQ,UAAS,8BAAd,SACE,cAAC,GAAD,CACExH,SAAU6G,EACV3J,KAAM,UACN+C,MAAO,CACLoC,gBAAiBA,GACjBM,gBAAiBA,GACjBlB,UAEFtB,YAxD+C,SAAC4P,EAAD,GAAsB,IACnEO,EADkE,EAAX9N,KAClC8N,cAE3B,GAAIA,EAAe,CACjB,IAAML,EAAYF,EAAMG,UAAU,CAChCjQ,MAAOyM,GACPhL,UAAW,CACTiH,OAAQ,CAAE0F,WAAY,CAAEpP,GAAI6D,OAIhCiN,EAAMI,WAAW,CACflQ,MAAOyM,GACPhL,UAAW,CACTiH,OAAQ,CAAE0F,WAAY,CAAEpP,GAAI6D,KAE9BN,KAAM,CACJ4N,WAAW,GAAD,mBAAMH,EAAUG,YAAhB,CAA4BE,OAI1CzO,QAAQC,IAAImO,KA2BZ,SAUG,SAACxM,EAAiBE,EAAejD,GAAjC,OAAiD,cAAC,GAAD,CAAiB+C,WAAYA,EAAYE,SAAUA,EAAUiD,aAAclG,EAAQmG,UAAWA,UCrJlJ6F,GAAkB2C,aAAH,yJAUf5C,GAAmB4C,aAAH,yJAUhBrC,GAAkBqC,aAAH,qHAoDNkB,GA5C6D,SAAC,GAAkC,EAAhCzN,OAAiC,IAAD,IAAxBiJ,iBAAwB,SACvGlI,EAAOkD,uBAAY7B,IACnB4B,EAAUE,cACV+G,EAASyC,cAQf,IAAK3M,EAAM,OAAO,6BASlB,OACE,qBAAK2D,UAAU,YAAf,SACE,eAACxI,GAAA,EAAD,CAAMwI,UAAU,iBAAiBtI,UAAW,UAAWC,SATvB,SAACsI,GACpB,YAAXA,GACFX,EAAQY,QAAR,yBAAkCqG,EAAOlH,aAOzC,UACE,cAACtH,GAAA,EAAD,CAAKC,SAAU,OAAQC,MAAO,SAC9B,cAACF,GAAA,EAAD,CAAKC,SAAU,QAASC,MAAO,WAC/B,cAACF,GAAA,EAAD,CAAKC,SAAU,QAASC,MAAO,WAC/B,cAACF,GAAA,EAAD,CAAKC,SAAU,UAAWC,MAAO,UAAjC,SACE,cAAC,GAAD,CACEvC,KAAM,UACNqB,OAAQ,CAAC,KAAM,OAAQ,QACvBuE,OAAQe,EAAK5E,GACb8M,UAAWA,EACXC,QAAS,CAAEU,mBAAiBD,oBAAkBO,oBAC9CrE,OAAQ,CAAE8H,cAAe,CAAExR,GAAI8O,EAAOlH,YACtCqH,SA7BO,WACfpH,EAAQuD,KAAR,yBAA+B0D,EAAOlH,UAAtC,qBA8BQ+D,YA3BU,SAACd,GAAD,+BAAiCiE,EAAOlH,UAAxC,oBAA6DiD,EAAK7K,eC0EvEyR,GApHkE,SAAC,GAA+B,IAA9BlT,EAA6B,EAA7BA,MAAOwM,EAAsB,EAAtBA,MAAOqF,EAAe,EAAfA,IAAKvF,EAAU,EAAVA,KAC9FG,EAAUzM,EACVN,EAAO8M,EAAM5G,OAAO,GAAK4G,EAAM,GAC/B2G,EAAe1G,EAAQI,MAAQJ,EAAQK,QAAUN,EAAM5G,OAAS,EAAK6G,EAAkBK,QAAO,SAACC,EAAGrI,GAAJ,OAAQqI,EAAC,YAAQrI,EAAEhF,MAAS,IAAIkN,OAAO,GAAKH,EAHlC,EAKpF1M,mBAASoT,GAL2E,mBAKvGlR,EALuG,KAKhGmR,EALgG,OAMtFrT,mBAAgB,IANsE,mBAMvGiF,EANuG,KAMjG+J,EANiG,OAQvD/K,mBAAS6N,EAAI5N,MAAO,CACzEQ,QAAS,SAACC,GACRL,QAAQC,IAAI,2BAA4BI,EAAEd,SACvCc,EAAEd,SAKJf,YAAa,SAACwQ,GACfhP,QAAQC,IAAI,oBAAqB+O,GAGjC,IAAMjE,EAAahO,OAAOgL,oBAAoBiH,GAC9C,GAAGjE,EAAWxJ,OAAS,GAAKyN,EAAKjE,EAAW,IAAIxJ,OAAS,EAAE,CACzD,IAEM0N,EAFMD,EAAKjE,EAAW,IAEVnO,KAAI,SAACsG,GACrB,MAAO,CACL9F,GAAI8F,EAAE9F,GACN8R,SAAqC,IAA5BtR,EAAMuR,QAAQjM,EAAE7H,IACzBE,MAAO2H,EAAE7H,OAIbqP,EAAQuE,QAERvE,EAAQ,OAlCgG,KAQtGO,QARsG,EAQhF3K,QAmC1BC,sBAAYiN,EAAI4B,IAAK,CACvB3O,YAAa,OACbjC,YAAa,SAACkC,GACZ,IAAMC,EAAO3C,GAAe0C,GAC5BV,QAAQC,IAAI,QAASS,EAAKC,EAAKvD,KAEjCgD,QAAS,gBAjDmG,mBAyC5GiP,EAzC4G,iBA0C1G/O,QA1C0G,EA0C9EK,KA1C8E,EA0CvDlB,MAanDc,sBAAYiN,EAAI8B,OAAQ,CAC1B7O,YAAa,OACbjC,YAAa,SAACkC,GACZ,IAAMC,EAAO3C,GAAe0C,GAC5BV,QAAQC,IAAI,SAAUS,EAAKC,EAAKvD,KAElCgD,QAAS,gBA7DmG,mBAqD5G6N,EArD4G,cAsD1G3N,QAtD0G,EAsD3EK,KAtD2E,EAsDjDlB,MAkD7D,OAAQ,cAACiI,GAAA,EAAD,CAAgBtK,GAAG,wBAAwBQ,MAAOA,EAAlD,SACH+C,GAAQA,EAAK/D,KAAI,SAACkO,GAAD,OAClB,cAACjD,GAAA,EAASC,KAAV,CAAgBxG,QAAS,SAACjB,GAAD,OA1CX,SAAC1E,GACjB,IAAM4T,EAAU5O,EAAK/D,KAAI,SAACkO,GAIxB,OAHGA,EAAEvP,QAAUI,EAAMJ,QACnBuP,EAAEoE,SAAWpE,EAAEoE,SAEV,eAAIpE,MAGP0E,EAAeD,EAAkB9G,QAAO,SAACC,EAAGrI,GAChD,OAAGA,EAAE6O,QAAe,GAAN,OAAUxG,EAAV,aAAgBrI,EAAE9E,OACpBmN,IACX,IAAIH,OAAO,GAEdvI,QAAQC,IAAI,aAAc,CAACsP,UAAS5T,QAAO6T,gBAExC7T,EAAMuT,QACPG,EAAY,CACVxP,UAAW,CACT4P,IAAK9T,EAAMyB,GACXsS,IAAKzH,EAAK7K,MAId6Q,EAAe,CACbpO,UAAW,CACT4P,IAAK9T,EAAMyB,GACXsS,IAAKzH,EAAK7K,MAMhBsN,EAAQ6E,GACRR,EAASS,GAS6BG,CAAU7E,IAA9C,SACE,cAAC/O,EAAA,EAAK6T,MAAN,CACItT,KAAK,WACLf,MAAOuP,EAAEvP,MACT2T,QAASpE,EAAEoE,kBC9GnBrE,GAAkB2C,aAAH,uJAUf5C,GAAmB4C,aAAH,0MAchBrC,GAAkBqC,aAAH,iHAQfqC,GAAkBrC,aAAH,2GASfsC,GAAetC,aAAH,kPAaZuC,GAAkBvC,aAAH,4PAafwC,GAAgE,SAAC,GAA4B,IAA1BrU,EAAyB,EAAzBA,MAAOwM,EAAkB,EAAlBA,MAAOF,EAAW,EAAXA,KAC/EuF,EAAM,CACV5N,MAAOiQ,GACPT,IAAKU,GACLR,OAAQS,IAGV,OAAO,cAAC,GAAD,CAAapU,MAAOA,EAAOwM,MAAOA,EAAOqF,IAAKA,EAAKvF,KAAMA,KAiBnDyG,GAd6D,SAAC,GAAmC,IAAjCzN,EAAgC,EAAhCA,OAAgC,IAAxBiJ,iBAAwB,SAC7G,OACE,8BACE,cAAC,GAAD,CACE7O,KAAM,QACNqB,OAAQ,CAAC,QAAS,WAAY,CAAErB,KAAM,aAAciN,UAAW0H,IAAe,YAC9E/O,OAAQA,EACRiJ,UAAWA,EACXC,QAAS,CAAEU,mBAAiBD,oBAAkBO,yB,UC5EvC8E,GAVK,kBAChB,qBAAK7S,GAAG,OAAR,SACI,oBAAG8S,KAAK,IAAR,UACA,qBAAKjD,IAAI,GAAGF,IAAI,kBAChB,cAACoD,GAAA,EAAD,CAAOxK,UAAU,aAAa3K,QAAQ,SAAtC,wBCmDOoV,GApDI,SAAC,GAAD,EAAEpO,KAAF,IAAQqO,EAAR,EAAQA,SAAR,OAA8B,qBAAK1K,UAAU,kDAAf,SACjD,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,YAAf,SACE,sBAAKA,UAAU,iCAAf,UACE,qBAAKA,UAAU,oCAAf,SACE,cAAC,GAAD,MAEF,qBAAKA,UAAU,2CAAf,SACE,qBAAIvI,GAAG,WAAP,UACA,6BACI,cAAC,IAAD,CAAMgM,GAAG,iBAAT,wBAEF,+BACE,mBAAG8G,KAAK,iBAAR,2BACA,+BACE,6BAAI,mBAAGA,KAAK,uBAAR,qBACJ,6BAAI,mBAAGA,KAAK,wBAAR,sBACJ,6BAAI,mBAAGA,KAAK,2BAAR,yBACJ,6BAAI,mBAAGA,KAAK,mCAAR,uCAGR,+BACE,cAAC,IAAD,CAAM9G,GAAG,IAAT,4BACA,+BACE,6BAAI,cAAC,IAAD,CAAMA,GAAG,kBAAT,4BACJ,6BAAI,cAAC,IAAD,CAAMA,GAAG,mBAAT,6BACJ,6BAAI,cAAC,IAAD,CAAMA,GAAG,eAAT,yBACJ,6BAAI,cAAC,IAAD,CAAMA,GAAG,eAAT,oCAMZ,sBAAKzD,UAAU,6CAAf,UACA,oBAAIvI,GAAG,WAAP,SACU,+BACE,cAAC,IAAD,CAAMgM,GAAG,aAAT,kBACA,+BACE,6BAAI,cAAC,IAAD,CAAMA,GAAG,aAAT,yBACJ,6BAAI,cAAC,IAAD,CAAMA,GAAG,SAAS9H,QAAS+O,EAA3B,8BAKM,sBAAMjT,GAAG,gBAEjC,qBAAKuI,UAAU,uB,8BCtCN2K,GAX0C,SAAC,GAAsB,IAApBlH,EAAmB,EAAnBA,GAAIzH,EAAe,EAAfA,SACtDsD,EAAUE,cAEVoL,EAAOvP,uBAAY,WACrBiE,EAAQuD,KAAKY,KACd,CAACnE,EAASmE,IAEb,OAAQ,cAAC,IAAMnF,SAAP,UACJ,cAACuM,GAAA,EAAY1I,KAAb,CAAkBxG,QAASiP,EAA3B,SAAkC5O,OCG3B8O,GAXkC,SAAC,GAAsB,IAApBrH,EAAmB,EAAnBA,GAAIzH,EAAe,EAAfA,SAC9CsD,EAAUE,cAEVoL,EAAOvP,uBAAY,WACrBiE,EAAQuD,KAAKY,KACd,CAACnE,EAASmE,IAEb,OAAQ,cAAC,IAAMnF,SAAP,UACJ,cAACyM,GAAA,EAAIC,KAAL,CAAUrP,QAASiP,EAAnB,SAA0B5O,OCuBnBiP,I,OA1Ba,kBAC1B,eAACC,GAAA,EAAD,CAAQC,GAAG,QAAQC,OAAO,KAA1B,UACE,cAACF,GAAA,EAAOG,MAAR,CAAcd,KAAK,IAAnB,oCACA,cAACW,GAAA,EAAOI,OAAR,CAAeC,gBAAc,qBAC7B,eAACL,GAAA,EAAOM,SAAR,CAAiB/T,GAAG,mBAApB,UACE,eAACsT,GAAA,EAAD,CAAK/K,UAAU,UAAf,UACE,cAAC,GAAD,CAASyD,GAAG,WAAZ,qBACA,eAACoH,GAAA,EAAD,CAAa5S,MAAM,gBAAgBR,GAAG,qBAAtC,UACE,cAAC,GAAD,CAAiBgM,GAAG,oCAApB,gCACA,cAAC,GAAD,CAAiBA,GAAG,8BAApB,0BACA,cAAC,GAAD,CAAiBA,GAAG,0BAApB,8CAGJ,eAACsH,GAAA,EAAD,CAAK/K,UAAU,UAAf,UACE,cAAC,IAAD,CAAMA,UAAU,GAAGyD,GAAG,SAAtB,mBAEQ,IAHV,KAIK,IACH,cAAC,IAAD,CAAMzD,UAAU,GAAGyD,GAAG,YAAtB,iCCSOgH,GA1BI,SAAC,GAAD,EAAGpO,KAAH,IAASqO,EAAT,EAASA,SAAT,OACjB,eAACQ,GAAA,EAAD,CAAQC,GAAG,QAAQC,OAAO,KAA1B,UACE,cAACF,GAAA,EAAOG,MAAR,CAAcd,KAAK,QAAnB,oCACA,cAACW,GAAA,EAAOI,OAAR,CAAeC,gBAAc,qBAC7B,eAACL,GAAA,EAAOM,SAAR,CAAiB/T,GAAG,mBAApB,UACE,eAACsT,GAAA,EAAD,CAAK/K,UAAU,UAAf,UACE,cAAC,GAAD,CAASyD,GAAG,iBAAZ,sBACA,eAACoH,GAAA,EAAD,CAAa5S,MAAM,gBAAgBR,GAAG,qBAAtC,UACE,cAAC,GAAD,CAAiBgM,GAAG,oCAApB,gCACA,cAAC,GAAD,CAAiBA,GAAG,8BAApB,0BACA,cAAC,GAAD,CAAiBA,GAAG,0BAApB,8CAGJ,cAACsH,GAAA,EAAD,CAAK/K,UAAU,UAAf,SACE,eAAC6K,GAAA,EAAD,CAAa5S,MAAM,OAAOR,GAAG,qBAA7B,UACE,cAACoT,GAAA,EAAY1I,KAAb,CAAkBoI,KAAK,aAAvB,uBACA,cAACM,GAAA,EAAYY,QAAb,IACA,cAACZ,GAAA,EAAY1I,KAAb,CAAkBoI,KAAK,SAAS5O,QAAS+O,EAAzC,gCCpBGzG,GAAmB,WAC9B,IAAM5H,EAAOkD,uBAAY7B,IACnBgO,EAAWC,yBAEXjB,EAAW,WACfgB,EAASlO,OAGX,OAAInB,GAAQA,EAAKC,MACXD,EAAKG,MAAMoP,MAAK,SAACrO,GAAD,MAAkB,UAAXA,EAAE7H,QAA0B,cAACmW,GAAD,CAAaxP,KAAMA,EAAMqO,SAAUA,IAC9E,cAAC,GAAD,CAAYrO,KAAMA,EAAMqO,SAAUA,IAGzC,cAAC,GAAD,K,yCClBIrN,GAAY,yCAAG,iCAAAgL,EAAA,6DAClB/M,EAASC,aAAaC,QAAQ,WAC9Bc,EAAQf,aAAaC,QAAQ,cAC7B6B,EAAe9B,aAAaC,QAAQ,qBAHlB,kBAIjBsQ,KAAMC,KAAN,UAAcC,0BAAd,YAAoD,CACvDvT,MAAM,qSAQNyB,UAAW,CACPoB,SACAgB,QACAe,mBAhBgB,2CAAH,qDCInB4O,GAAY,I,OAAIC,GAAU,CAC9BC,SAAU,SAACC,EAAOC,EAAWvS,GAC3B,OAAO,GAETwS,MAAO,SAACF,EAAOC,EAAWvS,GACxB,OAAe,IAARsS,EAAeG,KAAKC,YAI3BC,IAAe,EACfC,GAAuB,GASrBC,GAAyB,SAACC,EAAcP,GAG5C,IAAIQ,EA8CJ,OA5CKJ,GAmCHI,EAAWC,sBACT,IAAIC,SAAQ,SAACC,GAEXN,GAAgB7J,MAAK,kBAAMmK,YArC/BP,IAAe,EACfI,EAAWC,sBACTzP,KAEG4P,MAAK,YAAe,IAETC,EAFQ,EAAXlS,KAELA,KAAQkS,gBAEV3R,aAAa6B,QAAQ,aAAc8P,EAAgB5Q,OACnDf,aAAa6B,QAAQ,oBAAqB8P,EAAgB7P,cApBlEqP,GAAgBzV,KAAI,SAACkW,GAAD,OAAcA,OAClCT,GAAkB,GAuBV,IAAMU,EAAaf,EAAUgB,aAAaC,QAQ1C,OANAjB,EAAUkB,WAAW,CACnBD,QAAQ,2BACHF,GADE,IAELI,cAAc,UAAD,OAAYN,EAAgB5Q,WAGtCsQ,EAAQP,MAEhBoB,OAAM,SAAC3T,GACN4S,GAAkB,MAInBgB,SAAQ,WACPjB,IAAe,MAEnBtL,QAAO,SAACnL,GAAD,OAAW6F,QAAQ7F,OAYvB6W,EAASc,SAAQ,WACtB,OAAOf,EAAQP,OAIbuB,GAAWL,cAAW,SAAC7O,EAAD,GAAqB,IAAf4O,EAAc,EAAdA,QAE1BhR,EAAQf,aAAaC,QAAQ,cAEnC,MAAO,CACL8R,QAAQ,2BACHA,GADE,IAELE,cAAelR,EAAK,iBAAaA,GAAU,SAK3CuR,GAAWC,yBAAe,CAC9BC,IAAI,GAAD,OAAK/B,0BAAL,cAKCgC,GAAWvT,cAAQ,YAA0D,IAAvDwT,EAAsD,EAAtDA,cAAeC,EAAuC,EAAvCA,aAAc7B,EAAyB,EAAzBA,UAAWO,EAAc,EAAdA,QAClE,GAAIqB,GAAiBA,EAAc5U,MAAK,SAACS,GAAD,OAAYA,EAAcqU,gBAChE,OAAOxB,GAAuBC,EAASP,GAGrC4B,GAAeA,EAAchX,KAAI,gBAAG2C,EAAH,EAAGA,QAASwU,EAAZ,EAAYA,UAAWC,EAAvB,EAAuBA,KAAvB,OAAkChU,QAAQC,IAAR,oCAAyCV,EAAzC,uBAA+DwU,EAA/D,mBAAmFC,OAEtJH,GAAc7T,QAAQC,IAAR,2BAAgC4T,OAmBrCI,GAhBa,IAAIC,eAAa,CAC3CC,KAAMC,aAAWC,KAAK,CAACzC,GAAW+B,GAAUJ,GAAUC,KACtDtF,MAAO,IAAIoG,gBACXC,eAAgB,CACdC,WAAY,CACV/T,YAAa,QAEfrC,MAAO,CACLqC,YAAa,QAEfgU,OAAQ,CACNhU,YAAa,UClHboK,GAAkB2C,aAAH,sJAUf5C,GAAmB4C,aAAH,mJAShBrC,GAAkBqC,aAAH,yHAgBNkH,GARiE,SAAC,GAAmC,IAAjCzT,EAAgC,EAAhCA,OAAgC,IAAxBiJ,iBAAwB,SACjH,OACE,8BACE,cAAC,GAAD,CAAc7O,KAAM,QAASqB,OAAQ,CAAC,QAASuE,OAAQA,EAAQiJ,UAAWA,EAAWC,QAAS,CAAEU,mBAAiBD,oBAAkBO,yBC3BnI3K,GAAkBgN,aAAH,+IASf1M,GAAkB0M,aAAH,iKASf5N,GAAQ4N,aAAH,2GA2BImH,GApBa,SAAChU,GAC3B,IAAMvD,EAAKiH,MAAM1D,EAAM,mBAGvB,OACE,mCACE,cAAC,GAAD,CACEvD,GAAIA,EACJ/B,KAAM,WACNqB,OAAQ,CAAC,QACT0B,MAAO,CACHoC,mBACAM,mBACAlB,e,UCNGgV,GAjCuC,SAACjU,GACrD,IAAMkU,EAAY3P,uBAAY7B,KAAe,CAAEjG,GAAI,KAAM6E,MAAO,MAC1D+C,EAAYX,IAAEyQ,IAAInU,EAAM,0BACxBoU,EAAQ,UAAMpD,0BAAN,mBAA2CkD,EAAUzX,GAArD,oBAAmE4H,EAAnE,YAORrC,EAAQqS,SAAMC,WAEdC,EAAWC,uBAAYxS,GAc7B,OAbAuS,EAAS,gBAAkB,QAC3BA,EAAS,0BAA2B,EACpCA,EAAS,yBAA2B,CAElCE,cAAc,UAAD,OAAYlU,aAAaC,QAAQ,eAC9CkU,MAAM,GAAD,OAAKR,EAAUzX,IACpBkY,SAAS,GAAD,OAAKtQ,IAMfgQ,SAAM3D,SAASkE,6BAAkBC,KAAKC,UAAUP,EAAU,KAAM,KAE9D,cAAC,YAAD,CAAUF,MAAOA,SAAjB,SACE,cAAC,cAAD,CAAYD,SAAUA,EAAUW,cAAe1Q,EAAW2Q,cAAe,oB,qBCiBhEC,GA9CK,WAEhB,OACI,sBAAKjQ,UAAU,mBAAmBvI,GAAG,UAArC,UACI,yBAASuI,UAAU,8BAAnB,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,yBAAf,UACI,sBAAKA,UAAU,WAAWkQ,iBAAe,MAAzC,UACI,sBAAKlQ,UAAU,kBAAf,4BACI,2CAEI,cAAC,KAAD,CAAOA,UAAU,iBAEbmQ,QAAS,CACL,UACA,UACA,eACJC,UAAW,GACXC,UAAW,GACXC,WAAY,IAEZC,MAAI,UAKhB,mBAAGvQ,UAAU,SAAb,sKACA,cAAC,IAAD,CAAMA,UAAU,4BAA4ByD,GAAG,YAA/C,6BApBJ,WAqBI,cAAC,IAAD,CAAMzD,UAAU,gBAAgByD,GAAG,YAAnC,8BACA,qBAAKzD,UAAU,gBAGnB,qBAAKA,UAAU,uBAAuBkQ,iBAAe,MAArD,SACI,qBAAK9I,IAAI,QAAQpH,UAAU,YAAYsH,IAAI,cAM3D,yBAAStH,UAAU,oCC1ClBwQ,GAAe,SAACjU,GAGzB,OAAO,IAAIkU,OAAO,4CAA4CC,KAAKnU,IAgB1DoU,GAAiB,SAACC,GAC3B,IAAMhV,EAASgV,EAAShV,OAExB,GAAGA,EAAS,EACR,MAAO,CACJiV,OAAO,EACPC,OAAQ,EACRpb,KAAM,GACNL,QAAS,UAIhB,GAAGuG,GAAU,GACT,MAAO,CACHiV,OAAO,EACPC,OAAQ,IACRpb,KAAM,SACNL,QAAS,WAIjB,IAAM0b,EAAU,kBAAkBL,KAAKE,GAAY,EAAM,cAAcF,KAAKE,GAAY,EAAI,EACtFI,EAAQ,kBAAkBN,KAAKE,GAAY,EAAM,cAAcF,KAAKE,GAAY,EAAI,EACpFK,EAAS,kBAAkBP,KAAKE,GAAY,EAAM,cAAcF,KAAKE,GAAY,EAAI,EAGrF5a,EAAQ+a,EAAUC,EAAQC,GAFhB,uBAAuBP,KAAKE,GAAY,EAAM,mBAAmBF,KAAKE,GAAY,EAAI,GAIhGC,EAASjV,EAAS,GAAKoV,EAAQ,GAAKC,EAAS,IAAMjF,EACrDkF,EAAclb,EAAO4F,EAAO,EAGhC,OAFGsV,EAAa,KAAIA,EAAa,IAE1B,CACHL,QACAC,OAAqB,GAAbI,EACRxb,KAAMM,EAAQ,EAAI,SAAYA,EAAQ,EAAI,eAAkB6a,EAAQ,OAAS,OAC7Exb,QAAS6b,EAAa,EAAI,UAAaL,EAAQ,UAAY,W,UCtCpDM,GATgD,SAAC,GAAD,IAAGC,EAAH,EAAGA,iBAAkBR,EAArB,EAAqBA,SAAUS,EAA/B,EAA+BA,eAA/B,OAC7D,eAACjb,EAAA,EAAKC,MAAN,CAAYC,UAAU,oBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,uBACA,cAACH,EAAA,EAAKM,QAAN,CAAcC,KAAK,WAAWb,YAAY,WAAWL,SAAU2b,EAAkBpb,MAAO4a,EAAU7R,WAAYsS,EAAeR,QAC7H,cAACza,EAAA,EAAKkb,KAAN,uHACA,cAACC,GAAA,EAAD,CAAaC,IAAKH,EAAeP,OAAQlb,MAAOyb,EAAe3b,KAAML,QAASgc,EAAehc,cCXpFoc,GAAiB,kBAAM9F,0BCO9B+F,IDNyDnS,eCMrCsI,aAAH,sSAiBV8J,GAAqB,WAAO,IAAD,EACZ5b,mBAAS,IADG,mBAC/BwG,EAD+B,KACxBqV,EADwB,OAEd7b,mBAAS,IAFK,mBAE/B8b,EAF+B,KAEzBC,EAFyB,OAGd/b,mBAAS,IAHK,mBAG/Bgc,EAH+B,KAGzBC,EAHyB,KAKhC1S,EAAUE,cACVkM,EAAW+F,KANqB,EAQe7W,sBAAY8W,GAAmB,CAClF5W,YAAa,SATuB,mBAQ/BmX,EAR+B,YAQXtX,EARW,EAQXA,QAASK,EARE,EAQFA,KARE,KAQIlB,MAIF/D,oBAAS,IAZX,mBAY/Bmc,EAZ+B,KAYjBC,EAZiB,OAacpc,oBAAS,GAbvB,mBAa/Bqc,EAb+B,KAaXC,EAbW,OAcVtc,mBAAS4a,GAAe,KAdd,mBAc/BG,EAd+B,KAcvBwB,EAduB,OAgBAvc,oBAAS,GAhBT,mBAgB/Bwc,EAhB+B,KAgBlBC,EAhBkB,KAkBhCC,EAAU,yCAAG,iCAAApK,EAAA,yDACZmI,GAAajU,GADD,yCAER4V,GAAgB,IAFR,UAKbN,IAASE,EALI,uBAMfS,GAAe,GANA,mDAWQP,EAAiB,CAAE/X,UAAW,CAAEqC,QAAOsV,UAX/C,gBAWP7W,EAXO,EAWPA,KACFkC,EAAYlC,EAAK0X,YACvBhH,EAAS3O,GAAMG,IACfoC,EAAQuD,KAAK,kBAdE,kDAgBfxI,QAAQC,IAAI,UAAWU,GACvBqX,GAAsB,GAjBP,0DAAH,qDA6ChB,OACE,qCACE,yBAAS5a,GAAG,YAAYkb,eAAa,sCAArC,SACE,qBAAK3S,UAAU,gCAAgCgI,oBAAkB,IAAjE,SACE,qBAAKhI,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,uBAAM/C,OAAO,YAAY+C,UAAU,MAAMvI,GAAG,iBAAiBmb,OAAO,OAAOld,KAAK,SAAhF,UACE,sBAAKsK,UAAU,wBAAf,UACE,mDACA,gEAEF,qBAAKA,UAAU,0BAQ3B,yBAASA,UAAU,SAAS2S,eAAa,mCAAzC,SACE,qBAAK3S,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,uBAAMtK,KAAK,cAAc+B,GAAG,eAAeuI,UAAU,cAAc4S,OAAO,OAAO3V,OAAO,YAAxF,UACE,eAAC7G,EAAA,EAAD,WACG8b,GAAgB,cAAC9c,EAAA,EAAD,CAAOC,QAAS,SAAhB,2CAChB+c,GACC,eAAChd,EAAA,EAAD,CAAOC,QAAS,SAAhB,8CACmC,cAAC,IAAD,CAAMoO,GAAG,sBAAT,gCADnC,OAID8O,GAAe,cAACnd,EAAA,EAAD,CAAOC,QAAS,SAAhB,kDAChB,eAACe,EAAA,EAAKC,MAAN,CAAYC,UAAU,iBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,4BACA,cAACH,EAAA,EAAKM,QAAN,CAAcC,KAAK,QAAQb,YAAY,cAAcL,SA3DjD,SAACod,GACrBjB,EAASiB,EAAMpc,OAAOT,OACtBmc,GAAgB,GAChBE,GAAsB,IAwDwErc,MAAOuG,EAAOwC,UAAWmT,IACvG,cAAC9b,EAAA,EAAKkb,KAAN,CAAWtR,UAAU,aAArB,+DAGF,cAAC,GAAD,CAAmB4Q,SAAUiB,EAAMT,iBAzD1B,SAACyB,GACxB,IAAMhB,EAAOgB,EAAMpc,OAAOT,MAE1B8b,EAAQD,GACRM,GAAgB,GAChBG,EAAU3B,GAAekB,KAoD4DR,eAAgBP,IAEvF,eAAC1a,EAAA,EAAKC,MAAN,CAAYC,UAAU,oBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,0BACA,cAACH,EAAA,EAAKM,QAAN,CAAcC,KAAK,WAAWb,YAAY,kBAAkBL,SArDzD,SAACod,GACpB,IAAMC,EAAID,EAAMpc,OAAOT,MACvBgc,EAAQc,GACRX,GAAgB,GAEZW,GAAKjB,GACPW,GAAe,IA+CmFxc,MAAO+b,EAAMhT,UAAWwT,UAIhH,sBAAK9a,GAAG,SAASuI,UAAU,YAA3B,WACIrF,GACA,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAUsG,QAAS,kBAAM8W,KAA/D,sBAID9X,GACC,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAU8K,UAAQ,EAAxD,wBAKF,qBAAKH,UAAU,aAEf,qBAAKA,UAAU,oCC/I3B+S,GAAWlL,aAAH,+RA2ICmL,GA1HgB,WAAO,IAAD,EACTjd,mBAASwF,aAAaC,QAAQ,eADrB,mBAC5Be,EAD4B,KACrBqV,EADqB,OAEX7b,mBAAS,IAFE,mBAE5B8b,EAF4B,KAEtBC,EAFsB,OAIK/b,oBAAS,GAJd,mBAI5Bmc,EAJ4B,KAIdC,EAJc,OAKGpc,oBAAS,GALZ,mBAK5Bkd,EAL4B,KAKfC,EALe,KAO7B5T,EAAUE,cACVkM,EAAW+F,KARkB,EAUe7W,sBAAYmY,GAAU,CAAEjY,YAAa,SAVpD,mBAU5BqY,EAV4B,YAUXxY,EAVW,EAUXA,QAElByY,GAZ6B,EAUFpY,KAVE,EAUIlB,MAE1B,yCAAG,iCAAAuO,EAAA,yDACTmI,GAAajU,GADJ,yCAEL4V,GAAgB,IAFX,gCAMgBgB,EAAc,CAAEjZ,UAAW,CAAEqC,QAAOsV,UANpD,gBAMJ7W,EANI,EAMJA,KACFkC,EAAYlC,EAAKqY,SAEvB3H,EAAS3O,GAAMG,IACfoC,EAAQuD,KAAK,kBAVD,kDAYZsP,GAAgB,GAChBe,GAAe,GACfpB,EAAQ,IAdI,0DAAH,sDA8Bb,OACE,qCACE,yBAASra,GAAG,YAAYkb,eAAa,sCAArC,SACE,qBAAK3S,UAAU,gCAAgCgI,oBAAkB,IAAjE,SACE,qBAAKhI,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,uBAAM/C,OAAO,YAAY+C,UAAU,MAAMvI,GAAG,iBAAiBmb,OAAO,OAAOld,KAAK,SAAhF,UACE,sBAAKsK,UAAU,wBAAf,UACE,4CACA,6DAEF,qBAAKA,UAAU,0BAQ3B,yBAASA,UAAU,SAAS2S,eAAa,mCAAzC,SACE,qBAAK3S,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,eAAC5J,EAAA,EAAD,CAAMV,KAAK,cAAc+B,GAAG,eAAeuI,UAAU,cAArD,WACIiT,GAAe,uDAChBA,GACC,eAAC7d,EAAA,EAAD,CAAOC,QAAS,SAAhB,qDAC0C,cAAC,IAAD,CAAMoO,GAAG,sBAAT,qCAD1C,OAIDyO,GAAgB,cAAC9c,EAAA,EAAD,CAAOC,QAAS,SAAhB,2CACjB,eAACe,EAAA,EAAKC,MAAN,CAAYC,UAAU,iBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,4BACA,cAACH,EAAA,EAAKM,QAAN,CAAcC,KAAK,OAAOb,YAAY,cAAcL,SA9C9C,SAACod,GACrBjB,EAASiB,EAAMpc,OAAOT,OACtBmc,GAAgB,GAChBe,GAAe,IA2C4Eld,MAAOuG,EAAOwC,UAAWmT,OAGxG,eAAC9b,EAAA,EAAKC,MAAN,CAAYC,UAAU,oBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,uBACA,cAACH,EAAA,EAAKM,QAAN,CAAcC,KAAK,WAAWlB,SA7CrB,SAACod,GACxBf,EAAQe,EAAMpc,OAAOT,OACrBmc,GAAgB,GAChBe,GAAe,IA0CyDld,MAAO6b,EAAM9S,UAAWkU,IAClF,cAAC7c,EAAA,EAAKkb,KAAN,CAAWtR,UAAU,aAArB,kEAGF,sBAAKvI,GAAG,SAASuI,UAAU,YAA3B,WACIrF,GACA,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAUsG,QAAS,kBAAMyX,KAA/D,mBAIDzY,GACC,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAU8K,UAAQ,EAAxD,wBAIF,qBAAKH,UAAU,aAEf,qBAAKA,UAAU,kBAEf,qBAAIA,UAAU,UAAd,UACE,gDACA,6BACE,mBAAGuK,KAAI,UAAKyB,0BAAL,gBAAP,sBAEF,6BACE,mBAAGzB,KAAI,UAAKyB,0BAAL,kBAAP,wBAEF,6BACE,mBAAGzB,KAAI,UAAKyB,0BAAL,gBAAP,2CCpITsH,GAAwB,kBACnC,qCACE,yBAAS7b,GAAG,YAAYkb,eAAa,sCAArC,SACE,qBAAK3S,UAAU,gCAAgCgI,oBAAkB,IAAjE,SACE,qBAAKhI,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,uBAAM/C,OAAO,YAAY+C,UAAU,MAAMvI,GAAG,iBAAiBmb,OAAO,OAAOld,KAAK,SAAhF,UACE,sBAAKsK,UAAU,wBAAf,UACE,yCACA,kDAEF,qBAAKA,UAAU,0BAQ3B,yBAASA,UAAU,iBAAnB,SACE,sBAAKA,UAAU,kCAAf,UACE,qBAAKA,UAAU,wBAAf,SACE,sBAAKA,UAAU,iCAAf,UACE,oBAAIA,UAAU,0CAAd,mBACA,qBAAIA,UAAU,sBAAd,eACI,sBAAMA,UAAU,qCAAhB,wBAEJ,qBAAKA,UAAU,6CALjB,yBAOE,qBAAIA,UAAU,0CAAd,UACE,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,mDAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,gCAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,gCAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,4BAGA,qBAAIA,UAAU,kBAAd,UACE,mBAAGA,UAAU,qBACb,6DAEF,qBAAIA,UAAU,kBAAd,UACE,mBAAGA,UAAU,qBACb,6EAEF,qBAAIA,UAAU,kBAAd,UACE,mBAAGA,UAAU,qBACb,yDAEF,qBAAIA,UAAU,kBAAd,UACE,mBAAGA,UAAU,qBACb,yEAGJ,cAAC,IAAD,CAAMyD,GAAG,WAAWzD,UAAU,oDAA9B,6BAKJ,qBAAKA,UAAU,wBAAf,SACE,sBAAKA,UAAU,iCAAf,UACE,oBAAIA,UAAU,0CAAd,iBACA,qBAAIA,UAAU,sBAAd,mBACQ,sBAAMA,UAAU,qCAAhB,wBAER,qBAAKA,UAAU,6CALjB,qCAME,qBAAIA,UAAU,6DAAd,UACE,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,mDAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,iCAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,uCAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,mCAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,8BAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,8CAGA,qBAAIA,UAAU,kBAAd,UACE,mBAAGA,UAAU,qBACb,0DAEF,qBAAIA,UAAU,kBAAd,UACE,mBAAGA,UAAU,qBACb,yEAGJ,cAAC,IAAD,CAAMyD,GAAG,YAAYzD,UAAU,oDAA/B,4BAKJ,qBAAKA,UAAU,WAAf,SACE,sBAAKA,UAAU,iCAAf,UACE,oBAAIA,UAAU,0CAAd,uBACA,qBAAIA,UAAU,sBAAd,oBACS,sBAAMA,UAAU,qCAAhB,wBAET,qBAAKA,UAAU,6CALjB,4BAOE,qBAAIA,UAAU,6DAAd,UACE,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,mDAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,2BAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,yBAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,qBAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,8BAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,8CAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,0BAGA,qBAAIA,UAAU,OAAd,UACE,mBAAGA,UAAU,kCADf,0CAIF,cAAC,IAAD,CAAMyD,GAAG,YAAYzD,UAAU,oDAA/B,qC,qBCxINuT,GAAwB1L,aAAH,uKAwIZ2L,GAjIwB,WAAO,IAAD,EACjBzd,mBAAS,IADQ,mBACpCwG,EADoC,KAC7BqV,EAD6B,OAEhB7b,mBAAS,IAFO,mBAEpC6D,EAFoC,KAE3BkY,EAF2B,OAIH/b,oBAAS,GAJN,mBAIpCmc,EAJoC,KAItBC,EAJsB,OAKLpc,oBAAS,GALJ,mBAKpCkd,EALoC,KAKvBC,EALuB,OAMbnd,oBAAS,GANI,mBAMpC2G,EANoC,KAM1B+W,EAN0B,OAQT1d,oBAAS,GARA,mBAQpC2d,EARoC,KAQzBC,EARyB,OAUE/Y,sBAAY2Y,GAAuB,CAC9EzY,YAAa,OACbjC,YAAa,SAACmC,GACZX,QAAQC,IAAI,MAAOU,GACnB2Y,GAAa,IAEflZ,QAAS,WACPJ,QAAQC,IAAI,UAAWU,GACvBmX,GAAgB,MAlBuB,mBAUpCyB,EAVoC,YAUxBjZ,EAVwB,EAUxBA,QAASK,EAVe,EAUfA,KAYtB6Y,GAtBqC,EAUT/Z,MAYlB,yCAAG,uBAAAuO,EAAA,sDACjBuL,EAAS,CAAE1Z,UAAW,CAAEqC,QAAO3C,aADd,2CAAH,sDA0BhB,OACE,qCACE,yBAASnC,GAAG,YAAYkb,eAAa,sCAArC,SACE,qBAAK3S,UAAU,gCAAgCgI,oBAAkB,IAAjE,SACE,qBAAKhI,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,uBAAM/C,OAAO,YAAY+C,UAAU,MAAMvI,GAAG,iBAAiBmb,OAAO,OAAOld,KAAK,SAAhF,UACE,sBAAKsK,UAAU,wBAAf,UACE,2CACA,sDAEF,qBAAKA,UAAU,0BAQ3B,yBAASA,UAAU,SAAS2S,eAAa,mCAAzC,SACE,qBAAK3S,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,eAAC5J,EAAA,EAAD,CAAMV,KAAK,cAAc+B,GAAG,eAAeuI,UAAU,cAArD,UACE,sEACA,mBAAGA,UAAU,SAAb,4ZAKA,eAAC5J,EAAA,EAAKC,MAAN,CAAYC,UAAU,iBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,4BAEA,cAACH,EAAA,EAAKM,QAAN,CAAcC,KAAK,OAAOb,YAAY,cAAcL,SAxD9C,SAACod,GACrB,IAAMtW,EAAQsW,EAAMpc,OAAOT,MACrB8d,GAAc,0DAA0DpD,KAAKnU,GAEnFqV,EAASrV,GACT4V,EAAgB2B,GAChBZ,GAAe,IAkD4Eld,MAAOuG,EAAOwC,UAAWmT,IACtG,cAAC9b,EAAA,EAAKM,QAAQG,SAAd,CAAuBF,KAAK,UAA5B,oDAGF,eAACP,EAAA,EAAKC,MAAN,CAAYC,UAAU,oBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,4DACA,cAACH,EAAA,EAAKM,QAAN,CAAcsL,GAAG,WAAW+R,KAAM,GAAIte,SArDjC,SAACod,GACpBf,EAAQe,EAAMpc,OAAOT,OACrBmc,GAAgB,GAChBe,GAAe,IAkD6Dld,MAAO4D,EAASmF,UAAWkU,QAGzFS,GACA,sBAAKjc,GAAG,SAASuI,UAAU,YAA3B,WAEIrF,GACA,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAUsG,QAAS,kBAAMkY,KAAc1T,UAAWzD,GAAYwV,EAApG,wBAIDvX,GACC,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAU8K,UAAQ,EAAxD,wBAIF,qBAAKH,UAAU,iBAIjB0T,GACA,8BACE,cAAC,KAAD,CACEM,QAAS,2CACTC,eAAgB,SAACC,GACf7Z,QAAQC,IAAI,iBAAkB4Z,GAC9BC,YAAW,kBAAMV,GAAU,KAAO,UAKzCC,GAAa,mH,0CC/GfU,I,OAV+B,WAC5C,OACE,qBAAKpU,UAAU,YAAf,SACE,qBAAKA,UAAU,mBAAf,SACE,cAAC,KAAD,CAAeqU,QAAS,CAACC,MAAMtY,SCdT,20YDc6BuY,oBAAoB,UEVzErP,GAAkB2C,aAAH,0JAQf5C,GAAmB4C,aAAH,0JAQhBrC,GAAkBqC,aAAH,0HA0CN2M,GA9BoE,SAAC,GAA+B,IAA9BlZ,EAA6B,EAA7BA,OAA6B,IAArBiJ,iBAAqB,SAC9G,OACE,mCAEM,qBAAKvE,UAAU,gCAAgCgI,oBAAkB,IAAjE,SACI,qBAAKhI,UAAU,YAAf,SACI,qBAAKA,UAAU,MAAf,SACI,sBAAKA,UAAU,wBAAf,UACQ,qBAAKA,UAAU,wBAAf,SAEpB,cAAC,GAAD,CACItK,KAAM,WACNqB,OAAQ,CACN,QACA,WACFuE,OAAQA,EACRiJ,UAAWA,EACXC,QAAS,CAACU,mBAAiBD,oBAAkBO,wBAI7B,qBAAKxF,UAAU,yBC7CzCyU,GAAwB5M,aAAH,4RA8FZ6M,GA7E0B,SAAC,GAAe,IAAbC,EAAY,EAAZA,MACpCC,EAAclW,MAAMiW,EAAO,sBADqB,EAEtB5e,oBAAS,GAFa,mBAE/C2G,EAF+C,KAErCmY,EAFqC,KAIhDvV,EAAUE,cACVkM,EAAW+F,KALqC,EAOe7W,sBAAY6Z,GAAuB,CACtG3Z,YAAa,SARuC,mBAO/Cga,EAP+C,YAO5BC,EAP4B,EAOrCpa,QAAoBK,EAPiB,EAOjBA,KAAaga,EAPI,EAOXlb,MAIrCmb,EAAY,yCAAG,+BAAA5M,EAAA,+EAEMyM,EAAO,CAAE5a,UAAW,CAAE0a,iBAF5B,gBAET5Z,EAFS,EAETA,KAKR0Q,EAAS3O,GAAM/B,EAAKka,iBACpBL,GAAY,GACZtZ,aAAa6B,QAAQ,mBAAoBwX,GACzCT,YAAW,WACT7U,EAAQY,QAAQ,oBACf,KAZc,kDAcjB7F,QAAQC,IAAI,UAAWU,GAdN,0DAAH,qDAqClB,OANA9E,qBAAU,WACJ0e,GAde,WACnB,IAAMO,EAAqB5Z,aAAaC,QAAQ,oBACc,QAAzCD,aAAaC,QAAQ,kBAItB2Z,GAAsBP,EACxCtV,EAAQY,QAAQ,kBAEhB+U,IAMAG,KAED,CAACR,IAGF,kCACE,qBAAK5U,UAAU,gCAAgCgI,oBAAkB,IAAjE,SACE,qBAAKhI,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,sBAAKA,UAAU,uBAAf,UACGtD,EACC,sBAAKsD,UAAU,sBAAsBvD,KAAK,QAA1C,uCAC4B,cAACf,GAAA,EAAD,gCAE1B,KACHqZ,EACC,qBAAK/U,UAAU,mBAAmBvD,KAAK,QAAvC,wCAGE,MACFmY,GAAeI,EACf,qBAAKhV,UAAU,mBAAmBvD,KAAK,QAAvC,oDAGE,iBClFZ4Y,GAA2BxN,aAAH,mXAiBxByN,GAA+BzN,aAAH,kJAwMnB0N,GAhMmB,WAAO,IAAD,EACAxf,mBAAS,IADT,mBAC/Byf,EAD+B,KAClBC,EADkB,OAEA1f,mBAAS,IAFT,mBAE/B2f,EAF+B,KAElBC,EAFkB,OAGQ5f,mBAAS,IAHjB,mBAG/B6f,EAH+B,KAGdC,EAHc,OAIgB9f,oBAAS,GAJzB,mBAI/B+f,EAJ+B,KAIVC,EAJU,OAKmBhgB,oBAAS,GAL5B,mBAK/BigB,EAL+B,KAKVC,EALU,OAOoBlgB,oBAAS,GAP7B,mBAO/BmgB,EAP+B,KAORC,EAPQ,QAQtB3W,cAEoCzJ,oBAAS,IAVvB,mBAU/BqgB,EAV+B,KAUXC,EAVW,OAYAtgB,oBAAS,GAZT,mBAYlBmd,GAZkB,aAaJnd,oBAAS,GAbL,gCAcVA,mBAAS4a,GAAe,MAdd,mBAc/BG,EAd+B,KAcvBwB,EAduB,KAgBhC5G,EAAW+F,KAEXnW,EAASC,aAAaC,QAAQ,YAAc,GAC5C8a,EAAY/a,aAAaC,QAAQ,eAAiB,GAClD+a,EAAwD,QAAzChb,aAAaC,QAAQ,iBApBJ,EAsBaZ,sBAAYya,GAA0B,CACvFva,YAAa,SAvBuB,mBAsB/B0b,EAtB+B,YAsBb7b,EAtBa,EAsBbA,QAASK,EAtBI,EAsBJA,KAtBI,MAsBElB,MAIkDc,sBAAY0a,GAA8B,CAClIxa,YAAa,UA3BuB,qBA0B/B2b,GA1B+B,eA8BhCC,IA9BgC,GA0BV/b,QA1BU,GA0BcK,KA1Bd,GA0B4BlB,MAIzC,yCAAG,6BAAAuO,EAAA,+EAEDoO,GAAkB,CAAEvc,UAAW,CAAEoB,YAFhC,kBAEhBN,KACRmb,GAAyB,GAEzBhC,YAAW,WACTgC,GAAyB,KACxB,KAPqB,gDASxB9b,QAAQC,IAAI,UAAWU,GATC,yDAAH,sDAanB2b,GAAgB,yCAAG,+BAAAtO,EAAA,yDAClByI,EAAOD,MADW,oDAGnB6E,IAAgBE,EAHG,uBAIrBK,GAA0B,GAJL,mDASEO,EAAe,CAAEtc,UAAW,CAAEoB,SAAQka,cAAaE,iBATrD,gBASb1a,EATa,EASbA,KAKR0Q,EAAS3O,GAAM/B,EAAK4b,oBACpBb,GAAuB,GAEvBN,EAAe,IACfE,EAAe,IACfE,EAAmB,IAGnB1B,YAAW,WACT4B,GAAuB,KACtB,KAxBkB,kDA0BrB1b,QAAQC,IAAI,UAAWU,GACvBqb,GAAsB,GA3BD,0DAAH,qDA4DtB,OACE,mCACE,0BAASrW,UAAU,SAAS2S,eAAa,mCAAzC,UACE,sBAAK3S,UAAU,wBAAf,UACE,8CACC8V,EACC,qBAAK9V,UAAU,sBAAsBvD,KAAK,QAA1C,sCAGE,KACHyZ,EACC,sBAAKlW,UAAU,sBAAsBvD,KAAK,QAA1C,mDACyC6Z,KAEvC,QAEN,qBAAKtW,UAAU,wBAAf,SACE,yCAEF,qBAAKA,UAAU,YAAf,SACE,sBAAKA,UAAU,MAAf,UACE,qBAAKA,UAAU,uBAAf,SAAuCsW,IACvC,qBAAKtW,UAAU,YAAf,SACGuW,EACC,2CAEA,+CACe,IACb,cAAC7a,GAAA,EAAD,CAAQsE,UAAU,SAAS3K,QAAQ,UAAUsG,QAAS,kBAAM+a,MAAuBvW,SAAU+V,EAA7F,oDAMN,qBAAKlW,UAAU,uBAGnB,qBAAKA,UAAU,wBAAf,SACE,kDAEF,qBAAKA,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,uBAAMtK,KAAK,cAAc+B,GAAG,eAAeuI,UAAU,cAAc4S,OAAO,OAAO3V,OAAO,YAAxF,UACE,eAAC7G,EAAA,EAAD,WACGggB,GAAsB,cAAChhB,EAAA,EAAD,CAAOC,QAAS,SAAhB,0CACtB2gB,GAAuB,cAAC5gB,EAAA,EAAD,CAAOC,QAAS,SAAhB,kDACxB,eAACe,EAAA,EAAKC,MAAN,CAAYC,UAAU,iBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,+BACA,cAACH,EAAA,EAAKM,QAAN,CAAcC,KAAK,WAAWb,YAAY,cAAcL,SA9E1C,SAACod,GAC/B4C,EAAe5C,EAAMpc,OAAOT,OAC5BqgB,GAAsB,IA4EqFrgB,MAAOwf,EAAazW,UAAWqX,OAG5H,cAAC,GAAD,CAAmBxF,SAAU8E,EAAatE,iBA5E9B,SAACyB,GAC3B,IAAMhB,EAAOgB,EAAMpc,OAAOT,MAC1Bsc,EAAU3B,GAAekB,IAEzB8D,EAAe9D,GACfwE,GAAsB,GACtBnD,GAAe,GAEXrB,GAAQ+D,GACVK,GAA0B,IAmEmE5E,eAAgBP,IAEjG,eAAC1a,EAAA,EAAKC,MAAN,CAAYC,UAAU,oBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,kCACA,cAACH,EAAA,EAAKM,QAAN,CACEC,KAAK,WACLb,YAAY,kBACZL,SAtEY,SAACod,GAC/B,IAAMC,EAAID,EAAMpc,OAAOT,MACvB6f,EAAmB/C,GACnBuD,GAAsB,GACtBnD,GAAe,GAEXJ,GAAK4C,GACPO,GAA0B,IAgEVjgB,MAAO4f,EACP7W,UAAWiX,UAKjB,sBAAKve,GAAG,SAASuI,UAAU,YAA3B,WACIrF,GACA,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAUsG,QAAS,kBAAMgb,MAAoBxW,UAAW2Q,EAAOD,MAArG,6BAIDlW,GACC,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAU8K,UAAQ,EAAxD,wBAKF,qBAAKH,UAAU,+BCpN3B6W,GAAsChP,aAAH,gKA8G1BiP,GArG4B,WAAO,IAAD,EACrB/gB,mBAAS,IADY,mBACxCwG,EADwC,KACjCqV,EADiC,OAEP7b,oBAAS,GAFF,mBAExCmc,EAFwC,KAE1BC,EAF0B,OAGbpc,oBAAS,GAHI,mBAGxCghB,EAHwC,KAG7BC,EAH6B,OAKwEpc,sBACrHic,GACA,CACE/b,YAAa,SAR8B,sCAKrBH,QALqB,EAKYK,KALZ,EAKuClB,MAO9Bc,sBAAYic,GAAqC,CACvG/b,YAAa,UAbgC,mBAYxCmc,EAZwC,YAYjBtc,EAZiB,EAYjBA,QAASK,EAZQ,EAYRA,KAIjCkc,GAhByC,EAYFpd,MAI1B,yCAAG,6BAAAuO,EAAA,yDACpB2O,GAAa,IACTza,IAASiU,GAAajU,GAFN,wBAGlB4V,GAAgB,GAHE,kBAKO8E,EAAoB,CAAE/c,UAAW,CAAEqC,WAL1C,kBAKRvB,KACRgc,GAAa,GANG,kDAQhB3c,QAAQC,IAAI,UAAWU,GACvBmX,GAAgB,GATA,gCAYlBA,GAAgB,GAZE,0DAAH,sDAqBnB,OAAI4E,EAEA,mCACE,eAAC3hB,EAAA,EAAD,CAAOC,QAAS,UAAhB,iDAAgEkH,EAAhE,8DAMJ,qCACE,yBAAS9E,GAAG,YAAYkb,eAAa,sCAArC,SACE,qBAAK3S,UAAU,gCAAgCgI,oBAAkB,IAAjE,SACE,qBAAKhI,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,uBAAM/C,OAAO,YAAY+C,UAAU,MAAMvI,GAAG,iBAAiBmb,OAAO,OAAOld,KAAK,SAAhF,UACE,sBAAKsK,UAAU,wBAAf,UACE,oDACA,4DAEF,qBAAKA,UAAU,0BAQ3B,yBAASA,UAAU,SAAS2S,eAAa,mCAAzC,SACE,qBAAK3S,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,uBAAMtK,KAAK,cAAc+B,GAAG,eAAeuI,UAAU,cAAc4S,OAAO,OAAO3V,OAAO,YAAxF,UACE,cAAC7G,EAAA,EAAD,UACE,eAACA,EAAA,EAAKC,MAAN,CAAYC,UAAU,iBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,4BACA,cAACH,EAAA,EAAKM,QAAN,CAAcC,KAAK,QAAQb,YAAY,cAAcL,SAzCjD,SAACod,GACrBjB,EAASiB,EAAMpc,OAAOT,OACtBmc,GAAgB,IAuC8Enc,MAAOuG,EAAOwC,UAAWmT,IACvG,cAAC9b,EAAA,EAAKkb,KAAN,CAAWtR,UAAU,aAArB,iEAIJ,sBAAKvI,GAAG,SAASuI,UAAU,YAA3B,WACIrF,GACA,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAUsG,QAAS,kBAAMub,KAA/D,gCAIDvc,GACC,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAU8K,UAAQ,EAAxD,wBAKF,qBAAKH,UAAU,+BC9F3BmX,GAAoCtP,aAAH,oKAQjCuP,GAAoCvP,aAAH,gVAqKxBwP,GApJqC,SAAC,GAAe,IAAb1C,EAAY,EAAZA,MAC/CrY,EAAQoC,IAAEyQ,IAAIwF,EAAO,gBADsC,EAEjC5e,mBAAS,IAFwB,mBAE1D6a,EAF0D,KAEhD0G,EAFgD,OAGzCvhB,mBAAS,IAHgC,mBAG1Dgc,EAH0D,KAGpDC,EAHoD,KAK3D1S,EAAUE,cACVkM,EAAW+F,KANgD,EAQoF7W,sBACnJuc,GACA,CACErc,YAAa,SAXgD,mBAQ1Dyc,EAR0D,YAQrBC,EARqB,EAQ9B7c,QAA8C8c,EARhB,EAQUzc,KARV,KAQ4ClB,MAOhDc,sBAAYwc,GAAmC,CAC1Gtc,YAAa,UAhBkD,mBAe1D4c,EAf0D,YAe9B/c,EAf8B,EAe9BA,QAASK,EAfqB,EAerBA,KAfqB,KAeflB,MAIZ/D,oBAAS,IAnBkB,mBAmB7Cmd,GAnB6C,aAoBrCnd,mBAAS4a,GAAe,KApBa,mBAoB1DG,EApB0D,KAoBlDwB,EApBkD,OAqB/Bvc,oBAAS,GArBsB,gCAuB3BA,oBAAS,IAvBkB,mBAuB1Dwc,EAvB0D,KAuB7CC,EAvB6C,KAyBjEtc,qBAAU,YACK,yCAAG,uBAAAmS,EAAA,+EAENkP,EAAyB,CAAErd,UAAW,CAAEoC,WAFlC,qJAAH,qDAQbqb,KACC,CAACrb,EAAOib,IAEX,IAAMK,EAAO,yCAAG,+BAAAvP,EAAA,yDACTyI,EAAOD,MADE,oDAKVD,IAAamB,EALH,uBAMZS,GAAe,GANH,mDAWWkF,EAAyB,CAAExd,UAAW,CAAEoC,QAAOsU,cAX1D,gBAWJ5V,EAXI,EAWJA,KAKR0Q,EAAS3O,GAAM/B,EAAK6c,QACpBvY,EAAQY,QAAQ,kBAjBJ,kDAmBZ7F,QAAQC,IAAI,UAAWU,GAnBX,0DAAH,qDA0Cb,OAAIwc,EACK,cAACpiB,EAAA,EAAD,CAAOC,QAAS,UAAhB,4BACEoiB,GAA8BA,EAA2BK,OAAqD,UAA5CL,EAA2BK,MAAMC,OAE1G,qCACE,yBAAStgB,GAAG,YAAYkb,eAAa,sCAArC,SACE,qBAAK3S,UAAU,gCAAgCgI,oBAAkB,IAAjE,SACE,qBAAKhI,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,uBAAM/C,OAAO,YAAY+C,UAAU,MAAMvI,GAAG,iBAAiBmb,OAAO,OAAOld,KAAK,SAAhF,UACE,sBAAKsK,UAAU,wBAAf,UACE,qDACA,yDAEF,qBAAKA,UAAU,0BAQ3B,yBAASA,UAAU,SAAS2S,eAAa,mCAAzC,SACE,qBAAK3S,UAAU,YAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,uBAAMtK,KAAK,cAAc+B,GAAG,eAAeuI,UAAU,cAAc4S,OAAO,OAAO3V,OAAO,YAAxF,UACE,eAAC7G,EAAA,EAAD,WAEGmc,GAAe,cAACnd,EAAA,EAAD,CAAOC,QAAS,SAAhB,kDAChB,cAAC,GAAD,CAAmBub,SAAUA,EAAUQ,iBAlDhC,SAACyB,GACxB,IAAMhB,EAAOgB,EAAMpc,OAAOT,MAE1BshB,EAAYzF,GACZ,IAAMhB,Eb5FqB,SAACD,GAI5B,MAD0B,yDACDF,KAAKE,GawFhBoH,CAAgBnG,GAC9BqB,GAAgBrC,GAChByB,EAAU3B,GAAekB,KA4CkER,eAAgBP,IAE3F,eAAC1a,EAAA,EAAKC,MAAN,CAAYC,UAAU,oBAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,0BACA,cAACH,EAAA,EAAKM,QAAN,CAAcC,KAAK,WAAWb,YAAY,kBAAkBL,SA7C3D,SAACod,GACpB,IAAMC,EAAID,EAAMpc,OAAOT,MACvBgc,EAAQc,GACRI,GAAe,GAEXJ,GAAKlC,GACP4B,GAAe,IAuCqFxc,MAAO+b,EAAMhT,UAAWwT,UAIhH,sBAAK9a,GAAG,SAASuI,UAAU,YAA3B,WACIrF,GACA,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAUsG,QAAS,kBAAMic,KAAWzX,UAAW2Q,EAAOD,MAA5F,4BAIDlW,GACC,cAACe,GAAA,EAAD,CAAQsE,UAAU,YAAY3K,QAAQ,UAAU8K,UAAQ,EAAxD,wBAKF,qBAAKH,UAAU,8BAW7B,eAAC5K,EAAA,EAAD,CAAOC,QAAS,SAAhB,iBACM,4BAAIiH,IADV,oCCzKO2b,GAAqB,yCAAG,WAAOthB,EAAcuhB,GAArB,UAAA7P,EAAA,+EAC5ByD,KAAMqD,IAAN,UAAanD,0BAAb,iBAAgDrV,EAAhD,0BAAsEuhB,KAD1C,2CAAH,wDAIrBC,GAA+C,SAAC,GAAc,IAAZxhB,EAAW,EAAXA,KACvD+U,EAAW+F,KACX2G,EAAWC,cACXC,EAAU5Z,IAAEyQ,IAAIiJ,EAAU,SAAU,IAAIve,MAAM,UAC9Cqe,EAAOI,EAAQ1c,OAAS,EAAI0c,EAAQ,GAAK,GAEzChZ,EAAUE,cANwD,EAQ9CzJ,qBAR8C,mBAQjE+D,EARiE,KAQ1DkL,EAR0D,KAUlEuT,EAAY,SAACC,GACjBxT,EAASwT,GACTrE,YAAW,WACT7U,EAAQY,QAAQ,YACf,MAoBL,OAlBAhK,qBAAU,WAcJgiB,EAbS,yCAAG,qCAAA7P,EAAA,+EAEO4P,GAAsBthB,EAAMuhB,GAFnC,OAENld,EAFM,OAGNkC,EAAYlC,EAAKA,KAEvB0Q,EAAS3O,GAAMG,IACfoC,EAAQY,QAAQ,kBANJ,gDAQNuY,EAAW5I,KAAK6I,MAAMha,IAAEyQ,IAAF,KAAU,mBAAoB,OAC1DoJ,GAAU,UAAAE,EAAS3e,aAAT,eAAgBA,SAAhB,UAAyB2e,EAAS3e,aAAlC,aAAyB,EAAgBF,UAAW,KAAGA,SATrD,yDAAH,oDAaH+e,GACLJ,EAAU,iBACd,CAACH,IAGF,mCACGte,GACC,eAAC1E,EAAA,EAAD,CAAOC,QAAS,SAAhB,UACE,wCAAWsB,EAAX,YACA,4BAAImD,IACJ,8DAC+B,cAAC,IAAD,CAAM2J,GAAG,SAAT,4B,qBC9C5B5I,GAAe,08IACfM,GAAe,s0IACfyd,GAAS,yjECNf,IAyBQC,GAzBW,SAAC,GAAsD,IAArDnjB,EAAoD,EAApDA,KAAMM,EAA8C,EAA9CA,MAAO+H,EAAuC,EAAvCA,SAAU9H,EAA6B,EAA7BA,SAAUgG,EAAmB,EAAnBA,WAEnD6c,EAAapjB,EAAKqjB,SAAS,MAC3BC,EAAiBF,EAAapjB,EAAKkN,OAAO,EAAGlN,EAAKkG,OAAO,GAAKlG,EAepE,OAbAQ,qBAAU,WAEF,IAAI+iB,EADLhd,GAAcA,EAAW+c,IAGTC,EAAZH,EAAuBpa,IAAEyQ,IAAIlT,EAAY,CAAC+c,EAAgB,OAC7C/c,EAAW+c,GAE3B/iB,EAASP,EAAMujB,IAEZhjB,EAASP,EAAMM,KACvB,CAACiG,EAAYjG,IAIZ,cAAC,IAAMsI,SAAP,UACI,mCAAO3H,KAAK,UAAaoH,EAASrI,QClBjCwjB,GAAsD,SAAC,GAAmB,IAAjBC,EAAgB,EAAhBA,GAAIrf,EAAY,EAAZA,MACxE,OAAIqf,EACK,cAAC/jB,EAAA,EAAD,CAAOC,QAAQ,UAAf,oCAGLyE,EAEA,cAAC1E,EAAA,EAAD,CAAOC,QAAQ,UAAf,SACE,+BAAOwa,KAAKC,UAAUhW,YAH5B,G,uDCWF,WAA2Bsf,EAA2CC,GAAtE,8CAAAhR,EAAA,6DAAmFiR,EAAnF,+BAA8F,eAAgBhd,EAA9G,+BAAsH,GAChHgR,EAAU,IAAIiM,QACdjd,GAAOgR,EAAQkM,OAAO,gBAAf,iBAA0Cld,IACrD8c,EAAU,IAHZ,kBAKuBK,MAAMJ,EAAK,CAC5BzG,OAAQ,MACRtF,QAASA,IAPf,cAKUtS,EALV,iBASuBA,EAAK0e,OAT5B,QASUA,EATV,OAUQ1e,EAAKme,IAEDQ,EAAU,IAAIC,KAAK,CAACF,GAAO,CAAE/iB,KAAM,oBAGrCkjB,OAAOrS,WAAaqS,OAAOrS,UAAUsS,iBACvCD,OAAOrS,UAAUsS,iBAAiBH,IAG5BI,EAASF,OAAOG,IAAIC,gBAAgBN,IAEtCnL,EAAO0L,SAASC,cAAc,MAC7B5P,KAAOwP,EACZvL,EAAK4L,SAAWd,EAChB9K,EAAK6L,QAGLlG,YAAW,WACT0F,OAAOG,IAAIM,gBAAgBP,KAC1B,KAEHX,EAAU,CAAED,IAAI,OAGdoB,EAAI,IAAIX,KAAK,CAACF,GAAO,CAAE/iB,KAAM,sBAC3B6jB,EAAK,IAAIC,YAEZC,OAAS,SAAUC,GACpBvB,EAAU,CAAEtf,MAAO8gB,KAAKC,SACxBxgB,QAAQC,IAAIuV,KAAK6I,MAAMkC,KAAKC,UAG9BL,EAAGM,WAAWP,IA1CpB,kDA6CInB,EAAU,CAAEtf,MAAM,EAAD,KACjBO,QAAQC,IAAR,MA9CJ,2D,sBAkDO,I,SAAMygB,GAAa,SAAC,GAA4D,IAA1D5e,EAAyD,EAAzDA,SAAUF,EAA+C,EAA/CA,WAA0BoD,GAAqB,EAAnCD,aAAmC,EAArBC,WACzDhD,EAAOkD,uBAAY7B,KAAe,CAAEjG,GAAI,MACxCkI,EAAYC,eACAC,GAAwDF,EAAlE5B,SAAkE4B,EAAxDE,cAA8CE,GAAUJ,EAA1C7B,UAA0C6B,EAA/B1J,SAA+B0J,EAArB3B,UAAqB2B,EAAVI,OAHoB,EAKpChK,mBAA4B,IALQ,mBAK7EilB,EAL6E,KAK3DC,EAL2D,KAM9EvlB,EAAOqK,EAAM,QACbmb,EAAgBnb,EAAM,iBACtBob,EAAYpb,EAAM,aAElBqb,EAAW7X,mBAAQ,WACvB,IAAM8X,EAAYH,EAAgBI,KAAMxL,UAAUwL,KAAM5C,MAAMwC,IAAkB,GAC1EK,EAAeC,UAAUH,EAAUzY,OAAO,EAAGyY,EAAUzf,OAAS,IACtE,MAAM,GAAN,OAAUoQ,0BAAV,mBAA+C3P,EAAK5E,GAApD,oBAAkE4H,EAAlE,gBAAmFpD,EAAU,GAA7F,YAAuGsf,KACtG,CAACL,IAEEO,EAAiBpgB,uBAAY,Y,uCACjCqgB,CAAYT,EAAqBG,EAAtB,wBAAiD1lB,GAAQylB,KACnE,CAACC,EAAUD,EAAWzlB,IAMzB,OACE,gCACE,eAACU,EAAA,EAAD,CAAM+F,SAAU0D,GANE,SAAC7E,GACrBmB,EAASnB,MAKP,UACE,wCACA,wCACA,cAAC,GAAD,aAAStF,KAAM,OAAQE,MAAO,OAAQiI,UAAU,EAAM5B,WAAYA,GAAgB0D,IAIlF,cAAC,GAAD,yBAAYjK,KAAM,QAASE,MAAO,SAAa+J,GAA/C,IAA0D1D,WAAYA,KACtE,cAAC,GAAD,yBAAYvG,KAAM,WAAYE,MAAO,YAAgB+J,GAArD,IAAgE1D,WAAYA,KAC5E,cAAC,GAAD,yBAAYvG,KAAM,OAAQM,MAAO,OAAW2J,GAA5C,IAAuD1D,WAAYA,KACnE,cAAC,GAAD,yBAAYvG,KAAM,YAAaM,MAAOqJ,GAAeM,GAArD,IAAgE1D,WAAYA,KAE5E,uBACA,kDACA,cAAC,GAAD,yBAAYvG,KAAM,gBAAiBE,MAAO,kBAAsB+J,GAAhE,IAA2E1D,WAAYA,EAAYgC,aAAc,OAGjH,sBAAK+B,UAAU,oBAAf,UACE,sDACuB,IACrB,sCAEE,cAAC,IAAD,CAAMyD,GAAE,yBAAoBpE,EAApB,aAA0C5I,OAAQ,SAA1D,8BAFF,UAQF,qBAAKuJ,UAAU,aAAf,SACE,+BA/Gc,sGAiHhB,cAAC,GAAD,aAAStK,KAAM,YAAaE,MAAO,4BAA6BqG,WAAYA,GAAgB0D,IAE3Fqb,EAAiB7B,IAAO6B,EAAiBlhB,OAAS,cAAC,GAAD,eAAsBkhB,IAEzE,sBAAKhb,UAAU,cAAf,UACE,uBAAOrJ,KAAK,OAAOqJ,UAAU,eAAehK,MAAOolB,EAAUtlB,YAAY,uBAAuB2B,GAAG,eACnG,sBAAKuI,UAAU,qBAAf,UACE,cAACtE,GAAA,EAAD,CAAQsE,UAAU,kBAAkBrE,QAAS8f,EAAgBxjB,MAAM,oBAAnE,2BAGA,cAACyD,GAAA,EAAD,CACEsE,UAAU,kBACVrE,QAAS,WACP6L,UAAUC,UAAUC,UAAU0T,IAEhCnjB,MAAM,oBALR,2BAYN,uBAEA,cAACyD,GAAA,EAAD,CAAQ/E,KAAK,SAAb,qBAGF,6BA2BSglB,GAtByC,SAAC,GAAwD,IAAtDjmB,EAAqD,EAArDA,KAAMkmB,EAA+C,EAA/CA,eAAgBC,EAA+B,EAA/BA,eAAgBC,EAAe,EAAfA,SACzFvV,EAASyC,cAETvR,EAAmB,WAAd8O,EAAO9O,IAAmB8O,EAAO9O,GAE5C,OACE,qBAAKuI,UAAS,8BAAd,SACE,cAAC,GAAD,CACExH,SAAUf,EACV/B,KAAMA,GAAQ,WACd+C,MAAO,CACLoC,gBAAiB+gB,GAAkB/gB,GACnCM,gBAAiB0gB,GAAkB1gB,GACnClB,MAAO6hB,GAAYlD,IANvB,SASG,SAAC3c,EAAiBE,EAAejD,GAAjC,OAAiD,cAAC,GAAD,CAAY+C,WAAYA,EAAYE,SAAUA,EAAUiD,aAAclG,EAAQmG,UAAWkH,EAAOlH,kBC7K7IgQ,GAAQ0M,aAAe,CAClCC,QAAS,CACP3f,KAAM4f,M,OCOcpU,aAAH,2JAUIA,aAAH,2JAUEA,aAAH,uH,SAQNqU,G,qFAAf,WAAyBC,EAAmB1jB,GAA5C,8BAAA4P,EAAA,6DAA2DnO,EAA3D,+BAA4E,IAAIoT,EAAhF,+BAA+F,IACrF,gBAAkB,mBAD5B,SAGexB,KAAMC,KACjBoQ,EACA,CACE1jB,QACAyB,aAEF,CACEoT,YAVN,oF,sBAmGA,SAAS8O,GAAT,GAAuC,IAAlBC,EAAiB,EAAjBA,SACnB,OACE,eAAC,KAAD,CAAOxW,YAAU,EAAjB,UACE,gCACE,+BACE,oCACA,sCACA,sCACA,sCACA,4CACA,4BAGJ,gCACGwW,EAASplB,KAAI,SAACqlB,GAAD,OACZ,+BACE,oBAAItc,UAAU,KAAd,SAAoBsc,EAAK7kB,KACzB,6BAAK6kB,EAAK5mB,OACV,6BAAK4mB,EAAK3lB,OACV,6BAAK2lB,EAAK3d,OACV,+BACG,IACD,+BACE,sBAAKqB,UAAU,cAAf,UACE,uBAAOrJ,KAAK,OAAOqJ,UAAU,eAAehK,MAAOsmB,EAAKC,UAAWzmB,YAAY,uBAAuB2B,GAAG,eACzG,sBAAKuI,UAAU,qBAAf,UACE,cAACtE,GAAA,EAAD,CACEsE,UAAU,kBACVrE,QAAS,WACP6L,UAAUC,UAAUC,UAAU4U,EAAKC,YAErCtkB,MAAM,oBALR,kBASA,cAACyD,GAAA,EAAD,CACEsE,UAAU,kBACVrE,QAAS,WACP6L,UAAUC,UAAUC,UAAU4U,EAAKC,YAErCtkB,MAAM,WALR,4CAoBLukB,OA3IqE,SAAC,GAAkC,EAAhClhB,OAAgC,EAAxBiJ,UAAyB,IAAD,EACrFxO,mBAAS,IAD4E,mBAC9GsmB,EAD8G,KACpGI,EADoG,KAE/GpgB,EAAOkD,uBAAY7B,KAAe,CAAEjG,GAAI,KAAM6E,MAAO,IACrDgD,EAAUE,cACV+G,EAASyC,cACTgR,EAAMzW,mBAAQ,2BAASyI,0BAAT,mBAA8C3P,EAAK5E,GAAnD,2BAAiE8O,QAAjE,IAAiEA,OAAjE,EAAiEA,EAAQlH,aAAa,CAAChD,EAAK5E,GAAN,OAAU8O,QAAV,IAAUA,OAAV,EAAUA,EAAQlH,YAEtHqd,EAAmB,yCAAG,iCAAArU,EAAA,sEACD6T,GAAU,GAAD,OAC7BlC,EAD6B,mFAKhC,GACA,CACEvK,cAAc,UAAD,OAAYlU,aAAaC,QAAQ,eAC9CmhB,MAAOtgB,EAAK5E,GACZmlB,SAAQ,OAAErW,QAAF,IAAEA,OAAF,EAAEA,EAAQlH,YAVI,OACpBwd,EADoB,OAc1BJ,EAAW,OAACI,QAAD,IAACA,GAAD,UAACA,EAAY7hB,YAAb,iBAAC,EAAkBA,YAAnB,aAAC,EAAwB8hB,SAdV,2CAAH,qDAyCzB,IAAKzgB,EAAM,OAAO,6BAElBnG,qBAAU,WACJ8jB,GAAO3d,EAAKC,OAAOogB,MACtB,CAAC1C,EAAK3d,EAAKC,QAad,OACE,qBAAK0D,UAAU,YAAf,SACE,eAACxI,GAAA,EAAD,CAAMwI,UAAU,iBAAiBtI,UAAW,QAASC,SAbrB,SAACsI,GACpB,YAAXA,GACFX,EAAQY,QAAR,yBAAkCqG,EAAOlH,YAG5B,YAAXY,GACFX,EAAQY,QAAR,yBAAkCqG,EAAOlH,UAAzC,cAOA,UACE,cAACtH,GAAA,EAAD,CAAKC,SAAU,OAAQC,MAAO,SAC9B,cAACF,GAAA,EAAD,CAAKC,SAAU,QAASC,MAAO,WAC/B,cAACF,GAAA,EAAD,CAAKC,SAAU,QAASC,MAAO,WAC/B,cAACF,GAAA,EAAD,CAAKC,SAAU,UAAWC,MAAO,YACjC,cAACF,GAAA,EAAD,CAAKC,SAAU,QAASC,MAAO,QAA/B,SACE,sBAAK+H,UAAU,cAAf,UACE,uBAAOrJ,KAAK,OAAOqJ,UAAU,oBAAoBvI,GAAG,aAAahC,SAlD1D,SAACod,GAA8C,IAAD,EAEvDyJ,IADQ,UAAAzJ,EAAMkK,qBAAN,eAAqBC,QAAS,IACzB,GAEbhiB,EAAO,IAAIiiB,SACjBjiB,EAAKwe,OAAO,OAAQ8C,GACpB,IAAIvP,QAAJ,yCAAY,WAAOC,EAASkQ,GAAhB,gBAAA7U,EAAA,sEACUyD,KAAMC,KAAN,UAAciO,EAAd,WAA4Bhf,EAAM,CAEpDsS,QAAS,CACPmC,cAAc,UAAD,OAAYpT,EAAKC,OAC9BqgB,MAAOtgB,EAAK5E,GACZmlB,SAAQ,OAAErW,QAAF,IAAEA,OAAF,EAAEA,EAAQlH,aANZ,OACJwT,EADI,OASVxY,QAAQC,IAAIuY,GACZ6J,IACA1P,EAAQ6F,GAXE,2CAAZ,4DA6CQ,uBAAO7S,UAAU,oBAAjB,yBACA,cAACoc,GAAD,CAAWC,SAAUA,eC9GlBc,GAVyB,WACtC,OACE,qBAAKnd,UAAU,YAAf,SACE,qBAAKA,UAAU,mBAAf,SACE,cAAC,KAAD,CAAeqU,QAAS,CAACC,MAAMtY,SCdT,swODc6BuY,oBAAoB,SEMhE6I,GAV2B,WACxC,OACE,qBAAKpd,UAAU,YAAf,SACE,qBAAKA,UAAU,mBAAf,SACE,cAAC,KAAD,CAAeqU,QAAS,CAACC,MAAMtY,SCdT,0soBDc6BuY,oBAAoB,SE6BhE,SAAS8I,KACtB,OACE,cAAC,YAAD,CAAUhO,MAAOA,GAAjB,SACE,cAAC,iBAAD,CAAgBiO,OAAQhP,GAAxB,SACE,cAAC,IAAD,UACE,gCACE,cAAC,GAAD,IAQA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOiP,OAAK,EAAClP,KAAK,IAAlB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOkP,OAAK,EAAClP,KAAK,SAAlB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,kBAAZ,SACE,cAAC,GAAD,CAAkB1X,KAAM,eAE1B,cAAC,IAAD,CAAO0X,KAAK,gBAAZ,SACE,cAAC,GAAD,CAAkB1X,KAAM,aAE1B,cAAC,IAAD,CAAO0X,KAAK,gBAAZ,SACE,cAAC,GAAD,CAAkB1X,KAAM,aAE1B,cAAC,IAAD,CAAO0X,KAAK,YAAZ,SACE,cAAC,GAAD,MAGF,cAAC,IAAD,CAAOA,KAAK,6BAA6B1L,UAAW6a,KACpD,cAAC,IAAD,CAAOD,OAAK,EAAClP,KAAK,sBAAlB,SACE,cAAC,GAAD,MAGF,cAAC,IAAD,CAAOA,KAAK,4BAA4B1L,UAAW+R,KACnD,cAAC,IAAD,CAAOrG,KAAK,WAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,aAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,oCAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,8BAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,0BAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,wBAAwB1L,UAAWkG,KAC/C,cAAC,IAAD,CAAOwF,KAAK,qCAAqC1L,UAAWsM,KAC5D,cAAC,IAAD,CAAOZ,KAAK,wCAAwC1L,UAAWgZ,KAC/D,cAAC,IAAD,CAAOtN,KAAK,oCAAoC1L,UAAW8a,KAC3D,cAAC,IAAD,CAAOpP,KAAK,kCAAkC1L,UAAW6Z,KACzD,cAAC,IAAD,CAAOnO,KAAK,4BAA4B1L,UAAWkG,KACnD,cAAC,IAAD,CAAOwF,KAAK,iBAAZ,SACE,cAAC,GAAD,MAGF,cAAC,IAAD,CAAOA,KAAK,aAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,kBAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,eAAZ,SACE,cAAC,GAAD,CAAU9J,WAAW,MAEvB,cAAC,IAAD,CAAO8J,KAAK,eAAZ,SACE,cAAC,GAAD,CAAc9J,WAAW,MAE3B,cAAC,IAAD,CAAO8J,KAAK,mBAAZ,SACE,cAAC,GAAD,CAAmB9J,WAAW,MAEhC,cAAC,IAAD,CAAO8J,KAAK,qBAAqB1L,UAAWqM,KAC5C,cAAC,IAAD,CAAOX,KAAK,kBAAkB1L,UAAWqM,iBCjHnCnT,QACW,cAA7Bge,OAAOzB,SAASsF,UAEe,UAA7B7D,OAAOzB,SAASsF,UAEhB7D,OAAOzB,SAASsF,SAAS/I,MACvB,2DCZNgJ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEF3D,SAAS4D,eAAe,SDiIpB,kBAAmBtW,WACrBA,UAAUuW,cAAcC,MACrB/Q,MAAK,SAAAgR,GACJA,EAAaC,gBAEdzQ,OAAM,SAAA3T,GACLO,QAAQP,MAAMA,EAAMF,c","file":"static/js/main.d2e4bb5f.chunk.js","sourcesContent":["\r\nimport React from \"react\";\r\n\r\nexport const Loading = ({what = ''}) => {\r\n    return (<div>{`Loading ${what}... `}</div>)\r\n}\r\n\r\nexport default Loading","import React from \"react\";\r\nimport { Alert } from 'react-bootstrap'\r\n\r\nexport const Unauthorized = ({where = ''}) => {\r\n    return (<Alert variant={'danger'}>{`Unauthorized ${where} access`}</Alert>)\r\n}\r\n\r\nexport default Unauthorized","import React, { useState, useEffect } from \"react\";\r\nimport { Form, FormControl, Button } from \"react-bootstrap\";\r\n\r\nexport type TControl = {\r\n  placeholder? : string\r\n  onChange: (env: any) => void\r\n  value: string\r\n}\r\n\r\nexport type TControlField = {\r\n  name: string\r\n  label?: string\r\n  placeholder?: string\r\n  control?: React.FC<TControl>\r\n  valid?: string\r\n}\r\n\r\nexport type TField = string | TControlField\r\n\r\nexport interface IBaseControl {\r\n  model: any;\r\n  onChange: (name: string, value:any) => void;\r\n  edit?: boolean\r\n  field: TField\r\n}\r\n\r\nexport const BaseControl: React.FC<IBaseControl> = ({ model, field, onChange, edit = false }) => {\r\n  const name = (field as TControlField).name ? (field as TControlField).name : field as string\r\n  const label = (field as TControlField).label ? (field as TControlField).label : name\r\n  const control = (field as TControlField).control ? (field as TControlField).control : null\r\n  const placeholder = (field as TControlField).placeholder ? (field as TControlField).placeholder : ''\r\n\r\n  const [value, setValue] = useState(model[name]);\r\n\r\n  useEffect(()=>{\r\n    setValue(model[name])\r\n  }, [field, model])\r\n\r\n  const onUpdate = (value:string) => {\r\n    const obj = {...model} as any\r\n    obj[name] = value\r\n\r\n    setValue(value)\r\n    onChange(name, value)\r\n  }\r\n\r\n  return (\r\n    <Form.Group controlId=\"formBasicEmail\">\r\n          <Form.Label>{label}</Form.Label>\r\n          {control ? \r\n            control({onChange:(env: any) => onUpdate(env.target.value), value, placeholder}) :\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder={placeholder}\r\n              onChange={(env: any) => onUpdate(env.target.value)}\r\n              value={value}\r\n            />\r\n          }\r\n          <FormControl.Feedback type=\"valid\">\r\n            Yeah you did it!\r\n          </FormControl.Feedback>\r\n        </Form.Group>\r\n  );\r\n};\r\n\r\nexport default BaseControl","import React, { useState, useEffect } from \"react\";\r\nimport { Form, FormControl, Button } from \"react-bootstrap\";\r\n\r\nimport BaseControl, { TField } from './Control'\r\n\r\nexport type TBaseForm = {\r\n  model: any;\r\n  doUpdate: (model:any) => void;\r\n  edit?: boolean\r\n  fields: TField[]\r\n}\r\n\r\nexport const BaseForm: React.FC<TBaseForm> = ({ model, fields, doUpdate, edit = false }) => {\r\n  \r\n  const onUpdate = () => {\r\n      doUpdate(model)\r\n  }\r\n\r\n  const onChange = (field:string, value:any) => {\r\n    model[field] = value\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Form>\r\n        {fields.map((field:any)=>(<BaseControl model={model} field={field} onChange={onChange}/>))}\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react'\r\nimport { Tab, Tabs } from 'react-bootstrap'\r\nimport { TTabFields } from './Edit'\r\nimport { BaseForm, TBaseForm } from './Form'\r\n\r\ntype TEditTabs = Pick<TBaseForm, 'model' | 'doUpdate' | 'edit'> & {\r\n    fields:TTabFields\r\n}\r\n\r\nexport const EditTabs:React.FC<TEditTabs> = ({model, doUpdate, fields, edit}) => {\r\n    const tabs = Object.keys(fields)\r\n    const [key, setKey] = useState(tabs[0]);\r\n    \r\n    return (\r\n        <div>\r\n        <Tabs\r\n            id=\"controlled-tab-example\"\r\n            activeKey={key}\r\n            onSelect={(k) => setKey(k || '')}\r\n            >\r\n            {tabs.map((tab,idx)=>(<Tab eventKey={tab} title={tab}  style={{marginTop:'15px'}}>\r\n                <BaseForm key={`tab-${tabs.join()}-${idx}`} model={model} doUpdate={doUpdate} edit={edit} fields={fields[tab]} />\r\n            </Tab>))}\r\n            \r\n            </Tabs>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditTabs","import React, { useState, useEffect, useCallback } from \"react\";\r\n\r\nimport { BaseForm, TBaseForm } from \"./Form\";\r\nimport gql from \"graphql-tag\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { DEFAULT_SCHEMA } from \"../../pages/Projects/defaultSchema\";\r\nimport * as _ from 'lodash'\r\nimport { Alert, Button } from 'react-bootstrap'\r\nimport Unauthorized from '../Unauthorized/Unauthorized'\r\nimport Loading from '../Loading/Loading'\r\nimport { TField, TControlField } from \"./Control\";\r\nimport EditTabs from \"./Tabs\";\r\n\r\nexport const getDataFromRaw = (rawData: any) => {\r\n  const rawName = Object.keys(rawData)[0]\r\n  return rawData[rawName]\r\n}\r\n\r\nexport type TBaseEditUpdateCacheFn = (cache: any, data: any) => void\r\nexport type TBaseEdiRenameErrorFn = (error: string) => string\r\nexport type TBaseEdiOnCompletedFn = (data: any) => void\r\n\r\nexport type TTabFields = {[key:string]: TBaseForm['fields']}\r\n\r\nexport type TBaseEdit = {\r\n  id: string\r\n  name: string\r\n  query: any\r\n  fields: TBaseForm['fields'] | TTabFields\r\n  onUpdated? : (data:any) => void\r\n  updateCache?: TBaseEditUpdateCacheFn\r\n  renameError?: TBaseEdiRenameErrorFn\r\n  onCompleted?: TBaseEdiOnCompletedFn\r\n}\r\n\r\nexport const BaseEdit:React.FC<TBaseEdit> = ({id: externId, query, name, fields, onUpdated, updateCache, renameError, onCompleted}) => {\r\n  const [localId, setLocalId] = useState(externId);\r\n  const [unauthorized, setUnauthorized] = useState(false);\r\n  const [errors, setErrors] = useState<string[]|null>([])\r\n\r\n  // if the fields is not ust simle array\r\n  // we consider is it a object defined tabs \r\n  const haveTabs = Object.keys(fields).some((k)=>isNaN(+k))\r\n\r\n  const [model, setModel] = useState({\r\n    name: \"Project A\",\r\n    models: DEFAULT_SCHEMA\r\n  });\r\n\r\n  const handleError = (incommingError:{message: string}) => {\r\n    let incomingErrors = incommingError.message.split('\\n')\r\n    if(renameError) {\r\n      incomingErrors = incomingErrors.map(error=>renameError(error))\r\n    }\r\n    setErrors(incomingErrors)\r\n  }\r\n\r\n  const updateDataFromLoaded = (loadedDataRaw: any) => {\r\n    if(!loadedDataRaw){\r\n      return\r\n    }\r\n    \r\n    const loadedData = getDataFromRaw(loadedDataRaw)\r\n\r\n    if(loadedData){\r\n      // const np = fields.reduce((o:any, field: TField)=> {\r\n      //   const fieldName = (field as TControlField).name ? (field as TControlField).name : field as string\r\n      //   o[fieldName] = loadedData[fieldName]\r\n      //   return o\r\n      // }, {})\r\n\r\n      setModel({...loadedData})\r\n    } else {\r\n      setUnauthorized(true)\r\n    }\r\n\r\n    if(onUpdated) onUpdated(loadedData)\r\n  }\r\n\r\n  const skipLoading = !externId\r\n  const { loading, error } = useQuery(query.QUERY, {\r\n    variables: {id: externId},\r\n    skip: skipLoading,\r\n    onCompleted: (loadedDataRaw: any) =>{\r\n      console.log('loadedDataRaw', loadedDataRaw, skipLoading)\r\n      updateDataFromLoaded(loadedDataRaw)\r\n      \r\n    }, onError: (e) => {\r\n      console.log('onError >>> ', e.message)\r\n      if(e.message == 'GraphQL error: Unauhorized'){\r\n        setUnauthorized(true)\r\n      }\r\n      setModel({name:'', models: ''})\r\n      \r\n    }\r\n  });\r\n\r\n  const [\r\n    createProjectMutation,\r\n    { loading: createLoading, data: createData, error: createError }\r\n  ] = useMutation(query.CREATE_MUTATION, {\r\n    errorPolicy: \"none\",\r\n    onCompleted: (raw: any) => {\r\n      const data = getDataFromRaw(raw)\r\n      setLocalId(data.id);\r\n\r\n      setErrors(null)\r\n\r\n      if(onCompleted) onCompleted(raw)\r\n      if(onUpdated) onUpdated(raw)\r\n      // updateDataFromLoaded(raw)\r\n    },\r\n    update: updateCache,\r\n    onError: handleError\r\n  });\r\n\r\n  const [updateProjectMutation, { loading:updateLoading, data: updateData, error:updateError }] = useMutation(\r\n    query.UPDATE_MUTATION,\r\n    {\r\n      errorPolicy: \"none\",\r\n      onCompleted: (data: any) => { \r\n        \r\n        const raw =  getDataFromRaw(data)\r\n        console.log(\"UPDATED\", data, raw);\r\n        setLocalId(raw.id);\r\n\r\n        setErrors(null)\r\n\r\n        if(onCompleted) onCompleted(raw)\r\n        if(onUpdated) onUpdated(raw)\r\n        // updateDataFromLoaded(raw)\r\n      },\r\n      update: updateCache,\r\n      onError: handleError\r\n    }\r\n  );\r\n\r\n  const onUpdate = useCallback(() => {\r\n    console.log('onUpdate >>> ', localId, model)\r\n    if(localId){\r\n        updateProjectMutation({\r\n            variables: {\r\n              id:localId,\r\n              ...model\r\n            }\r\n          });\r\n    } else {\r\n        createProjectMutation({\r\n            variables: {\r\n              userId: localStorage.getItem(\"user.id\"),\r\n              ...model\r\n            }\r\n          });\r\n    }\r\n    \r\n  }, [localId, model]);\r\n\r\n  if(unauthorized) {\r\n    return (<Unauthorized where={`${name} edit`} />)\r\n  }\r\n\r\n  if(loading) {\r\n    return (<Loading what={name}/>)\r\n  }\r\n\r\n  return (\r\n    <div style={{margin:'15px'}}>\r\n      {externId ? <h3>{name} Edit ({externId}) <Button onClick={onUpdate}>{externId ? 'Update' : 'Create'}</Button></h3> : <h3>{name} create <Button onClick={onUpdate}>{externId ? 'Update' : 'Create'}</Button></h3>}\r\n      {error && <Alert variant={'danger'}>`${error.message}`</Alert>}\r\n      {errors && errors.length > 0 && errors.map((e)=>(<Alert variant={'danger'}>{e}</Alert>))}\r\n      {haveTabs ? <EditTabs fields={fields as TTabFields} model={model} doUpdate={onUpdate} edit={Boolean(localId)} /> : <BaseForm model={model} doUpdate={onUpdate} edit={Boolean(localId)} fields={fields as TField[]} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BaseEdit\r\n\r\n","export const DEFAULT_SCHEMA = `\r\n\r\ntype Todo @model {\r\n    id: ID! @isUnique\r\n    name: String!\r\n}\r\n\r\n`","import { useMutation, useQuery } from '@apollo/client'\r\nimport React, { useCallback, useState } from 'react'\r\nimport Loading from '../Loading/Loading'\r\nimport Unauthorized from '../Unauthorized/Unauthorized'\r\nimport { getDataFromRaw } from '../EditorEx/Edit'\r\n\r\nexport const BaseEditor = ({ name, form, externId, renameError, onUpdated, updateCache, query, children }: any) => {\r\n  const [localId, setLocalId] = useState(externId)\r\n  const [unauthorized, setUnauthorized] = useState(false)\r\n  const [errors, setErrors] = useState<string[] | null>([])\r\n\r\n  const [storedData, setStoredData] = useState({})\r\n\r\n  const handleError = (incommingError: { message: string }) => {\r\n    let incomingErrors = incommingError.message.split('\\n')\r\n    if (renameError) {\r\n      incomingErrors = incomingErrors.map((error) => renameError(error))\r\n    }\r\n    setErrors(incomingErrors)\r\n  }\r\n\r\n  const updateDataFromLoaded = (loadedDataRaw: any) => {\r\n    if (!loadedDataRaw) {\r\n      return\r\n    }\r\n\r\n    const loadedData = getDataFromRaw(loadedDataRaw)\r\n\r\n    if (loadedData) {\r\n      setStoredData({ ...loadedData })\r\n    } else {\r\n      setUnauthorized(true)\r\n    }\r\n  }\r\n\r\n  const onCompleted = (raw: any) => {\r\n    const data = getDataFromRaw(raw)\r\n    setLocalId(data.id)\r\n    setErrors(null)\r\n    if (onUpdated) onUpdated(raw)\r\n  }\r\n\r\n  const skipLoading = !externId\r\n  const { loading, error } = useQuery(query.QUERY, {\r\n    variables: { id: externId },\r\n    skip: skipLoading,\r\n    onCompleted: (loadedDataRaw: any) => {\r\n      updateDataFromLoaded(loadedDataRaw)\r\n    },\r\n    onError: (e) => {\r\n      if (e.message == 'GraphQL error: Unauhorized') {\r\n        setUnauthorized(true)\r\n      }\r\n    },\r\n  })\r\n\r\n  const [createProjectMutation] = useMutation(query.CREATE_MUTATION, {\r\n    errorPolicy: 'none',\r\n    onCompleted: onCompleted,\r\n    update: updateCache,\r\n    onError: handleError,\r\n  })\r\n\r\n  const [updateProjectMutation] = useMutation(query.UPDATE_MUTATION, {\r\n    errorPolicy: 'none',\r\n    onCompleted: onCompleted,\r\n    update: updateCache,\r\n    onError: handleError,\r\n  })\r\n\r\n  // const onSubmit = (data:any) => {\r\n  //   console.log(data)\r\n  // }\r\n\r\n  const onSubmit = useCallback(\r\n    (data) => {\r\n      if (localId) {\r\n        setErrors(null)\r\n        updateProjectMutation({\r\n          variables: {\r\n            id: localId,\r\n            ...data,\r\n          },\r\n        })\r\n      } else {\r\n        createProjectMutation({\r\n          variables: {\r\n            userId: localStorage.getItem('user.id'),\r\n            ...data,\r\n          },\r\n        })\r\n      }\r\n    },\r\n    [localId, storedData],\r\n  )\r\n\r\n  if (unauthorized) {\r\n    return <Unauthorized where={`${name} edit`} />\r\n  }\r\n\r\n  if (loading) {\r\n    return <Loading what={name} />\r\n  }\r\n\r\n  return <div>{children(storedData, onSubmit, errors)}</div>\r\n}\r\n\r\nexport default BaseEditor\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\r\nimport { RootState } from '../store'\r\n\r\nexport interface UserToken {\r\n  token: string\r\n  refreshToken: string\r\n  user: User\r\n}\r\n\r\nexport interface User {\r\n  id: string\r\n  email: string\r\n  verified: boolean\r\n  roles: UserRole[]\r\n  selectedOrgId?: string\r\n  organizations?: any[]\r\n}\r\n\r\nexport interface UserRole {\r\n  name: string\r\n}\r\n\r\nexport interface UserState {\r\n  user?: UserWithToken\r\n}\r\n\r\nexport type UserWithToken = User & {\r\n  token: string\r\n}\r\n\r\nconst userToStorage = (userToken: UserToken) => {\r\n  localStorage.setItem('user.token', userToken.token)\r\n  localStorage.setItem('user.refreshToken', userToken.refreshToken)\r\n  localStorage.setItem('user.id', userToken.user.id)\r\n  localStorage.setItem('user.email', userToken.user.email)\r\n  localStorage.setItem('user.verified', Boolean(userToken.user.verified).toString())\r\n  localStorage.setItem('user.roles', userToken.user.roles.map((r) => r.name).toString())\r\n}\r\n\r\nconst removeUserFromStorage = () => {\r\n  localStorage.removeItem('user.refreshToken')\r\n  localStorage.removeItem('user.token')\r\n  localStorage.removeItem('user.id')\r\n  // localStorage.removeItem('user.email')\r\n  localStorage.removeItem('user.verified')\r\n  localStorage.removeItem('user.roles')\r\n}\r\n\r\nconst userFromStorage = () => {\r\n  const token = localStorage.getItem('user.token')\r\n  if (!token) {\r\n    return\r\n  }\r\n\r\n  return {\r\n    token,\r\n    email: localStorage.getItem('user.email'),\r\n    id: localStorage.getItem('user.id'),\r\n    roles: localStorage\r\n      .getItem('user.roles')\r\n      ?.split(',')\r\n      .map((role) => ({ name: role })),\r\n    verified: Boolean(localStorage.getItem('user.verified')),\r\n  } as UserWithToken\r\n}\r\n\r\nconst initialSelected = localStorage.getItem('organization.selected')\r\n\r\nconst initialState: UserState = {\r\n  user: userFromStorage(),\r\n}\r\n\r\nexport const userSlice = createSlice({\r\n  name: 'user',\r\n  initialState,\r\n  reducers: {\r\n    login(state, action: PayloadAction<UserToken>) {\r\n      userToStorage(action.payload)\r\n      state.user = {\r\n        id: action.payload.user.id,\r\n        token: action.payload.token,\r\n        email: action.payload.user.email,\r\n        roles: action.payload.user.roles,\r\n        verified: Boolean(action.payload.user.verified),\r\n      } as UserWithToken\r\n    },\r\n    logout(state) {\r\n      removeUserFromStorage()\r\n      delete state.user\r\n    },\r\n  },\r\n})\r\n\r\nexport const selectUser = (state: RootState) => state.user.user\r\n// Action creators are generated for each case reducer function\r\nexport const { login, logout } = userSlice.actions\r\n\r\nexport default userSlice.reducer\r\n","import React, { useEffect, useState } from 'react'\r\nimport AceEditor from 'react-ace'\r\nimport { Form, FormControl } from 'react-bootstrap'\r\nimport { Resizable } from 'react-resizable'\r\n\r\nexport const AceControl = ({ name, storedData, label, required, register, placeholder, formState, setValue, getValues, defaultHight }: any) => {\r\n  const { errors, touchedFields, dirtyFields } = formState\r\n  const error = errors && errors[name]\r\n  const touched = touchedFields && touchedFields[name]\r\n  const dirty = dirtyFields && dirtyFields[name]\r\n  const [height, setHeight] = useState(defaultHight || 300)\r\n\r\n  const value = getValues(name)\r\n\r\n  useEffect(() => {\r\n    if (storedData && storedData[name]) setValue(name, storedData[name])\r\n  }, [storedData])\r\n\r\n  const onResize = (_: unknown, { size }: any) => {\r\n    setHeight(size.height)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Form.Group controlId={`form-${name}`}>\r\n        <Form.Label>\r\n          {label} {required && '*'}\r\n        </Form.Label>\r\n\r\n        <Resizable width={1000} height={height} resizeHandles={['s']} onResize={onResize} minConstraints={[100, 100]}>\r\n          <div style={{ height: `${height}px` }}>\r\n            <AceEditor\r\n              width={`100%`}\r\n              height={`${height - 15}px`}\r\n              value={value != null ? value : storedData && storedData[name]}\r\n              onChange={(value) => {\r\n                setValue(name, value)\r\n              }}\r\n              editorProps={{ $blockScrolling: true }}\r\n              name={`ace-control-${name}`}\r\n            />\r\n          </div>\r\n        </Resizable>\r\n\r\n        <FormControl.Feedback type=\"valid\">Perfect!</FormControl.Feedback>\r\n        <Form.Control.Feedback type=\"invalid\">Please provide a valid {label}.</Form.Control.Feedback>\r\n      </Form.Group>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default AceControl\r\n","import React, { useEffect } from 'react'\r\nimport { Form, FormControl } from 'react-bootstrap'\r\n\r\nexport const Control = ({name, storedData, label, required, register, placeholder, formState, setValue}:any) => {\r\n    const {errors, touchedFields, dirtyFields} = formState\r\n    const error = (errors && errors[name])\r\n    const touched = touchedFields && touchedFields[name]\r\n    const dirty = dirtyFields && dirtyFields[name]\r\n    \r\n    useEffect(()=>{\r\n      if(storedData && storedData[name]) setValue(name, storedData[name])\r\n    },[storedData])\r\n  \r\n    return (\r\n      <React.Fragment >\r\n        <Form.Group controlId={`form-${name}`}>\r\n            <Form.Label>{label} {required && '*'}</Form.Label>\r\n            <Form.Control\r\n                type=\"text\"\r\n                placeholder={placeholder}\r\n                {...register(name as any, {required})}\r\n                \r\n                isInvalid={error}\r\n                /* isValid={dirty && !error} */\r\n              />\r\n            \r\n            <FormControl.Feedback type=\"valid\">\r\n              Perfect!\r\n            </FormControl.Feedback>\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              Please provide a valid {label}.\r\n            </Form.Control.Feedback>\r\n          </Form.Group>\r\n        </React.Fragment>\r\n    )\r\n  }\r\n\r\n  export default Control","import * as React from 'react'\r\nimport { Alert } from 'react-bootstrap'\r\n\r\nexport const GraphQLError = ({graphQLError}:any) =>{\r\n    return (<>\r\n        {graphQLError.map((gqe:string)=>(<Alert variant={'danger'}>{gqe}</Alert>))}\r\n        </>\r\n)}","import React, { useState } from 'react'\r\nimport { Alert, Button, Form, Tab, Tabs } from 'react-bootstrap'\r\nimport { SelectCallback } from 'react-bootstrap/esm/helpers'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { selectUser } from '../../app/reducers/userSlice'\r\nimport AceControl from '../../components/Editor/AceControl'\r\nimport Control from '../../components/Editor/Control'\r\nimport { GraphQLError } from './GraphQLError'\r\n\r\nexport const ProjectEditForm = ({ onSubmit, storedData, graphQlError, projectId }: any) => {\r\n  const user = useSelector(selectUser) || { id: null }\r\n  const history = useHistory()\r\n\r\n  const [selectedTab, setSelectedTab] = useState('main')\r\n  const reactForm = useForm()\r\n  const { register, handleSubmit, formState, setValue, getValues, watch } = reactForm\r\n\r\n  const processSubmit = (data: any) => {\r\n    onSubmit(data)\r\n  }\r\n\r\n  const onTabSelect: SelectCallback = (tabKey) => {\r\n    if (tabKey === 'exports') {\r\n      history.replace(`/user/projects/${projectId}/exports`)\r\n    }\r\n\r\n    if (tabKey === 'files') {\r\n      history.replace(`/user/projects/${projectId}/files`)\r\n    }\r\n\r\n    setSelectedTab(tabKey || '')\r\n  }\r\n\r\n  return (\r\n    <Tabs className=\"base-edit-tabs\" activeKey={selectedTab} onSelect={onTabSelect}>\r\n      <Tab eventKey={'main'} title={'Main'}>\r\n        <Form onSubmit={handleSubmit(processSubmit)}>\r\n          <Control name={'name'} label={'Service name (SERVICE_NAME)'} required={true} storedData={storedData} {...reactForm} />\r\n          {graphQlError?.length > 0 && <GraphQLError graphQLError={graphQlError} />}\r\n          <AceControl name={'models'} label={'Schema'} {...reactForm} storedData={storedData} />\r\n          <hr />\r\n          <Button type=\"submit\">Save</Button>\r\n        </Form>\r\n      </Tab>\r\n      <Tab eventKey={'email'} title={'Email'}>\r\n        <Form onSubmit={handleSubmit(processSubmit)}>\r\n          <Control name={'emailWelcomeTitle'} label={'Welcome Email Title'} storedData={storedData} {...reactForm} placeholder={'Wellcome in {{SERVICE_NAME}}'} />\r\n          <AceControl\r\n            name={'emailWelcomeMessage'}\r\n            label={'Welcome Email Message'}\r\n            {...reactForm}\r\n            storedData={storedData}\r\n            placeholder={\r\n              'Please verify your email by click to this <a href=\"{{SERVICE_URL}}/email/${user.__verifyToken}/verify\">{{SERVICE_URL}}/email/${user.__verifyToken}/verify</a>'\r\n            }\r\n          />\r\n          <Control\r\n            name={'emailForgottenPasswordTitle'}\r\n            label={'Reset Password Email Title'}\r\n            storedData={storedData}\r\n            {...reactForm}\r\n            placeholder={'Change password request for {{SERVICE_NAME}}'}\r\n          />\r\n          <AceControl\r\n            name={'emailForgottenPasswordMessage'}\r\n            label={'Change password request for {{SERVICE_NAME}}'}\r\n            {...reactForm}\r\n            storedData={storedData}\r\n            placeholder={\r\n              'We recaive request about reset Your password. If is not your action, please ignore this message. If you want reset your password follow instruction on this link <a href=\"{{SERVICE_URL}}/forgotten-password/${user.__resetPasswordToken}\">{{SERVICE_URL}}/forgotten-password/${user.__resetPasswordToken}</a>'\r\n            }\r\n          />\r\n          <hr />\r\n          <Button type=\"submit\">Save</Button>\r\n        </Form>\r\n      </Tab>\r\n      <Tab eventKey={'login'} title={'Login'}>\r\n        <Form onSubmit={handleSubmit(processSubmit)}>\r\n          <h2>Github</h2>\r\n          <Control name={'loginGithubId'} label={'ID'} storedData={storedData} {...reactForm} />\r\n          <Control name={'loginGithubSecret'} label={'Secret'} storedData={storedData} {...reactForm} />\r\n          <Control name={'loginGithubCallbackURL'} label={'CallbackURL'} storedData={storedData} {...reactForm} />\r\n          <hr />\r\n          <h2>Google</h2>\r\n          <Control name={'loginGmailId'} label={'ID'} storedData={storedData} {...reactForm} />\r\n          <Control name={'loginGmailSecret'} label={'Secret'} storedData={storedData} {...reactForm} />\r\n          <Control name={'loginGmailCallbackURL'} label={'CallbackURL'} storedData={storedData} {...reactForm} />\r\n          <hr />\r\n          <h2>Facebook</h2>\r\n          <Control name={'loginFacebookId'} label={'ID'} storedData={storedData} {...reactForm} />\r\n          <Control name={'loginFacebookSecret'} label={'Secret'} storedData={storedData} {...reactForm} />\r\n          <Control name={'loginFacebookCallbackURL'} label={'CallbackURL'} storedData={storedData} {...reactForm} />\r\n          <hr />\r\n          <Button type=\"submit\">Save</Button>\r\n        </Form>\r\n      </Tab>\r\n      <Tab eventKey={'exports'} title={'Exports'} disabled={!projectId}></Tab>\r\n      <Tab eventKey={'files'} title={'Files'} disabled={!projectId}></Tab>\r\n    </Tabs>\r\n  )\r\n}\r\n","import React, {useState, useEffect, useCallback} from 'react'\r\nimport { Col, Form, Alert, Button, InputGroup, DropdownButton, Dropdown } from \"react-bootstrap\";\r\nimport './FilterItem.scss'\r\n\r\nconst basicOptionsName = {\r\n    contains : 'contains',\r\n    not_contains : 'not contains',\r\n    starts_with : 'starts with',\r\n    not_starts_with : 'not starts with',\r\n    ends_with : 'ends with',\r\n    not_ends_with : 'not ends with',\r\n    isEmpty : 'is empty',\r\n}\r\n\r\ntype basicOptionsNameType = 'contains' | 'not_contains' | 'starts_with' | 'not_starts_with' | 'ends_with' | 'not_ends_with' | 'isEmpty'\r\n\r\n\r\n\r\nexport interface IFilterItemParam {\r\n    fields: any[]\r\n    onChange: (filter: string | null) => void\r\n}\r\n\r\n  \r\n\r\nexport const FilterItem: React.FC<IFilterItemParam> = ({fields, onChange}) => {\r\n    const [fieldSelected, setFieldSelected] = useState(fields[0])\r\n    const [optionSelected, setOptionSelected] = useState('contains')\r\n    const [filterText, setFilterText] = useState('')\r\n    const [filter, setFilter] = useState<string|null>('null')\r\n\r\n    const onFieldChange = (field:any) => {\r\n        console.log('onFieldChange', field)\r\n        setFieldSelected(field)\r\n        processFilter(field, optionSelected, filterText)\r\n    }\r\n\r\n    const onOptionChange = (option:any) => {\r\n        console.log('onOptionChange', option)\r\n        setOptionSelected(option)\r\n        processFilter(fieldSelected, option, filterText)\r\n    }\r\n\r\n    const onFilterChange = (e:any) => {\r\n        const text = e.target.value\r\n        console.log('onFilterChange', e, text)\r\n        setFilterText(text)\r\n        processFilter(fieldSelected, optionSelected, text)\r\n    }\r\n\r\n    const doFilter = useCallback((f: string | null) => {\r\n        if(filter != f){\r\n            console.log('useFilter>>>', f)\r\n            setFilter(f)\r\n            onChange(f)\r\n        }\r\n    }, [filter, onChange, setFilter])\r\n\r\n    const processFilter = useCallback((field, option, text) => {\r\n        if(!text && option != 'isEmpty') {\r\n            doFilter(null)\r\n            return\r\n        }\r\n\r\n        const f = {} as any\r\n        f[`${field}_${option}`] = text\r\n        doFilter(f)\r\n\r\n    }, [doFilter] )\r\n\r\n    const gc = (o:any) => {\r\n        const o2 = o\r\n        return () => {\r\n            onFieldChange(o2)\r\n        }\r\n    }\r\n\r\n    const go = (o:any) => {\r\n        const o2 = o\r\n        return () => {onOptionChange(o2);}\r\n    }\r\n\r\n\r\n    return (\r\n        <InputGroup className=\"mb-3\">\r\n            <DropdownButton\r\n                className=\"field-option\"\r\n                as={InputGroup.Prepend}\r\n                variant=\"success\"\r\n                title={fieldSelected}\r\n                id=\"input-group-dropdown-0\" >\r\n                    {fields.map((o)=> (<Dropdown.Item key={o} onClick={gc(o)}>{o.toString()}</Dropdown.Item>))}\r\n            </DropdownButton>\r\n            <DropdownButton\r\n                className=\"select-option\"\r\n                as={InputGroup.Prepend}\r\n                variant=\"outline-link\"\r\n                title={basicOptionsName[optionSelected as basicOptionsNameType]}\r\n                id=\"input-group-dropdown-1\" >\r\n                    {Object.getOwnPropertyNames(basicOptionsName).map((o)=> (<Dropdown.Item key={o} onClick={go(o)}>{basicOptionsName[o as basicOptionsNameType]}</Dropdown.Item>))}\r\n            </DropdownButton>\r\n            <Form.Control value={filterText} onChange={onFilterChange}/>\r\n        </InputGroup>)\r\n\r\n}\r\n\r\nexport default FilterItem","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from 'react-bootstrap'\r\nimport './Row1.scss'\r\n\r\n\r\nexport interface IFilteredFieldDesc {\r\n  name: string\r\n  title?: string\r\n  component?: React.FC<any>\r\n}\r\n\r\nexport type IFilteredField = IFilteredFieldDesc | string\r\n\r\nexport interface IListRowParams {\r\n  item: any\r\n  field: IFilteredField\r\n}\r\n\r\nconst getElementFromField = (item: any, field: IFilteredField) => {\r\n  const fieldDesc = field as IFilteredFieldDesc\r\n\r\n  const names = fieldDesc.name ? fieldDesc.name.split('.') : (field as string).split('.')\r\n  const element = item[names[0]]\r\n\r\n  return {element, name: names[0], names}\r\n}\r\n\r\nexport const ListRowItem: React.FC<IListRowParams> = ({ item, field }) => {\r\n  const {element, name, names} = getElementFromField(item, field)\r\n\r\n  if(!element) {\r\n    return (<>ERR NOT EXIST:{name}</>)\r\n  }\r\n\r\n  if((field as IFilteredFieldDesc).component) {\r\n    const component = (field as IFilteredFieldDesc).component\r\n    return (<>{component && component({value:element, names, item})}</>)\r\n  }\r\n\r\n  if(element.substr && element.length > 50) {\r\n    return (<>{element.substr(0, 47)}...</>)\r\n  }\r\n\r\n  if(element.push && element.reduce && names.length > 1) {\r\n    return (<>{(element as any[]).reduce((p, e)=>p + e[names[1]], '')}</>)\r\n  }\r\n\r\n  return (\r\n    <>\r\n    {element}\r\n    </>\r\n  );\r\n};\r\n\r\n","import React, { useCallback, useMemo } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Button } from 'react-bootstrap'\r\nimport './Row1.scss'\r\nimport { ListRowItem, IFilteredField } from './RowItem'\r\n\r\nexport interface IListRowItem {\r\n  id: string\r\n  name: string\r\n  user: any\r\n}\r\n\r\nexport interface IListRowParams {\r\n  name: string\r\n  item: any\r\n  fields?: IFilteredField[]\r\n  onDelete: (obj: any) => void\r\n  showDelete?: boolean\r\n  onEdit?: (item: any) => void\r\n  getEditLink?: (item: unknown) => string\r\n}\r\n\r\nexport const ListRow: React.FC<IListRowParams> = ({ item, onDelete, name, fields = ['id'], showDelete = false, onEdit, getEditLink }) => {\r\n  const doEdit = useCallback(() => {\r\n    if (onEdit) onEdit(item)\r\n  }, [item, onEdit])\r\n\r\n  const editLink = useMemo(() => {\r\n    if (getEditLink) return getEditLink(item)\r\n    else return `/user/${name.toLowerCase()}/${item.id}`\r\n  }, [name, item, getEditLink])\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <tr>\r\n        <td className=\"id\">{onEdit ? <span onClick={doEdit}>{item.id}</span> : <Link to={editLink}>{item.id}</Link>}</td>\r\n        {fields.map(\r\n          (field) =>\r\n            field !== 'id' && (\r\n              <td>\r\n                <ListRowItem item={item} field={field} />\r\n              </td>\r\n            ),\r\n        )}\r\n        {item.user && <td>{item.user.email}</td>}\r\n        {showDelete && (\r\n          <td className=\"right\">\r\n            <Button\r\n              variant=\"danger\"\r\n              size=\"sm\"\r\n              onClick={() => {\r\n                onDelete(item)\r\n              }}\r\n            >\r\n              delete\r\n            </Button>\r\n          </td>\r\n        )}\r\n      </tr>\r\n    </React.Fragment>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Button, Modal } from 'react-bootstrap'\r\n\r\nexport interface IDeleteModalParams {\r\n  show: boolean\r\n  onHide: () => void\r\n  onDelete: (deleteObject: any) => void\r\n  category: string\r\n  deleteObject?: any\r\n  deleting?: boolean\r\n}\r\n\r\nexport const DeleteModal: React.FC<IDeleteModalParams> = ({ show, onHide, onDelete, category, deleteObject, deleting }) => {\r\n  const onDeleteAction = () => {\r\n    if (!deleting) {\r\n      onDelete(deleteObject)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Modal show={show} onHide={onHide}>\r\n        <Modal.Header closeButton>\r\n          <div>\r\n            <Modal.Title>\r\n              Delete {'>>'} {deleteObject && deleteObject.name} {'<<'}\r\n            </Modal.Title>\r\n          </div>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body>\r\n          {!deleting ? (\r\n            <p>\r\n              Are you sure, you want delete {category} item with name <b>'{deleteObject && deleteObject.name}'</b> and id <i>'{deleteObject && deleteObject.id}'</i>\r\n            </p>\r\n          ) : (\r\n            <p>\r\n              Deleting {category} item with name '{deleteObject && deleteObject.name}' and id '{deleteObject && deleteObject.id}' ...\r\n            </p>\r\n          )}\r\n        </Modal.Body>\r\n\r\n        <Modal.Footer>\r\n          <Button disabled={deleting} variant=\"danger\" type=\"submit\" onClick={onDeleteAction}>\r\n            Delete\r\n          </Button>\r\n          <Button disabled={deleting} variant=\"primary\" onClick={onHide}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DeleteModal\r\n","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Table as BTable, Button } from 'react-bootstrap'\r\n\r\nimport { useQuery, useMutation } from '@apollo/client'\r\nimport { IListRowParams, ListRow } from './Row1'\r\nimport Loading from '../Loading/Loading'\r\nimport DeleteModal from '../DeleteModal/DeleteModal'\r\nimport Unauthorized from '../Unauthorized/Unauthorized'\r\nimport { DocumentNode } from 'graphql'\r\nimport { IFilteredField } from './RowItem'\r\n\r\nexport interface IFilterWithParams {\r\n  filter?: string\r\n  params?: string\r\n}\r\n\r\nexport interface ITableQueries {\r\n  ADMIN_LIST_QUERY: DocumentNode\r\n  USER_LIST_QUERY: DocumentNode\r\n  DELETE_MUTATION: DocumentNode\r\n}\r\n\r\nexport interface ITableList {\r\n  userId?: string\r\n  adminMode?: boolean\r\n  filter: any\r\n  queries: ITableQueries\r\n  fields?: IFilteredField[]\r\n  name: string\r\n  onEdit: IListRowParams['onEdit']\r\n  getEditLink?: IListRowParams['getEditLink']\r\n}\r\n\r\nexport const Table: React.FC<ITableList> = ({ filter, name, adminMode = false, queries, fields, onEdit, getEditLink }) => {\r\n  const [unauthorized, setUnauthorized] = useState(false)\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false)\r\n  const [deleteObject, setDeleteObject] = useState(null)\r\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\r\n  const [deletingOnDeleteDialog, setDeletingOnDeleteDialog] = useState(false)\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [data, setData] = useState<any>([])\r\n  const [error, setError] = useState<any>()\r\n\r\n  const { refetch: userRefetch, loading: userLoading } = useQuery(adminMode ? queries.ADMIN_LIST_QUERY : queries.USER_LIST_QUERY, {\r\n    onError: (e) => {\r\n      console.log('onError >>> ', e.message)\r\n      if (e.message == 'GraphQL error: Unauhorized') {\r\n        setUnauthorized(true)\r\n      } else {\r\n        setError(e)\r\n      }\r\n    },\r\n    onCompleted: (d) => {\r\n      console.log('user: onCompleted', d)\r\n      setLoading(false)\r\n\r\n      const dataFields = Object.getOwnPropertyNames(d)\r\n      if (dataFields.length > 0 && d[dataFields[0]].length > 0) {\r\n        setData(d[dataFields[0]])\r\n      } else {\r\n        setData([])\r\n      }\r\n    },\r\n    variables: { filter },\r\n  })\r\n\r\n  const [deleteProjectMutation, { loading: deleteLoading, error: deleteError }] = useMutation(queries.DELETE_MUTATION, {\r\n    errorPolicy: 'none',\r\n    onCompleted: (data: any) => {\r\n      console.log('DELETE', data.deleteProject)\r\n      onHideDidaloDelete()\r\n      userRefetch()\r\n    },\r\n    onError: (e) => {\r\n      console.log('onError >>> ', e.message)\r\n      if (e.message == 'GraphQL error: Unauhorized') {\r\n        setUnauthorized(true)\r\n      }\r\n    },\r\n  })\r\n\r\n  const onHideDidaloDelete = () => {\r\n    setShowDeleteDialog(false)\r\n    setDeleteObject(null)\r\n  }\r\n\r\n  const onDelete = (obj: any) => {\r\n    setDeletingOnDeleteDialog(false)\r\n    setShowDeleteDialog(true)\r\n    setDeleteObject(obj)\r\n  }\r\n\r\n  const doDelete = (deleteObject: any) => {\r\n    setDeletingOnDeleteDialog(true)\r\n    deleteProjectMutation({\r\n      variables: {\r\n        id: deleteObject.id,\r\n      },\r\n    })\r\n  }\r\n\r\n  if (unauthorized) {\r\n    return <Unauthorized where={'projects'} />\r\n  }\r\n  if (userLoading) return <Loading what={'projects'} />\r\n\r\n  return (\r\n    <div>\r\n      {error && <div>{`Error! ${error.message}`}</div>}\r\n\r\n      <BTable responsive>\r\n        <thead>\r\n          <tr>\r\n            <th>Id</th>\r\n            {fields?.map((f) => f !== 'id' && <th>{(f as any).name ? (f as any).name : f}</th>)}\r\n            {adminMode && <th>User</th>}\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {data.length &&\r\n            data.map((projectItem: any) => (\r\n              <ListRow name={name} item={projectItem} onDelete={onDelete} fields={fields} showDelete={adminMode} onEdit={onEdit} getEditLink={getEditLink} />\r\n            ))}\r\n        </tbody>\r\n      </BTable>\r\n\r\n      <DeleteModal\r\n        show={showDeleteDialog}\r\n        onHide={onHideDidaloDelete}\r\n        onDelete={doDelete}\r\n        category={'project'}\r\n        deleteObject={deleteObject}\r\n        deleting={deletingOnDeleteDialog}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Table\r\n","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport FilterItem from './FilterItem'\r\nimport { Navbar, Button } from 'react-bootstrap'\r\nimport './FilteredList.scss'\r\nimport { IFilteredField } from './RowItem'\r\nimport Table, { ITableList, ITableQueries } from './Table'\r\n\r\nexport interface IProjectFilterList {\r\n  name: string\r\n  userId?: string\r\n  adminMode?: boolean\r\n  queries: ITableQueries\r\n  fields: IFilteredField[]\r\n  filter?: any\r\n  onCreate?: () => void\r\n  onEdit?: ITableList['onEdit']\r\n  getEditLink?: ITableList['getEditLink']\r\n}\r\n\r\nconst createFilter = () => {\r\n  const obj: any = []\r\n  obj.name = 'AND'\r\n  return { AND: obj }\r\n}\r\n\r\nconst addAnd = (node: any, filter: any) => {\r\n  let obj: any = filter\r\n\r\n  if (node.name != 'AND') {\r\n    obj = [obj]\r\n    obj.name = 'AND'\r\n  }\r\n\r\n  node.push(obj)\r\n}\r\n\r\nconst filterDestructNode = (node: any) => {\r\n  let filter = ''\r\n\r\n  for (const n of node) {\r\n    if (n.name && n.length > 0) {\r\n      filter += `,${filterDestructNode(n)}`\r\n    } else {\r\n      filter += `,{${n.filter}}`\r\n    }\r\n  }\r\n\r\n  return `{${node.name}:[${filter.substr(1)}]}`\r\n}\r\n\r\nconst filterDestruct = (filter: any) => {\r\n  const fo = {\r\n    filter: '',\r\n    params: '',\r\n  }\r\n\r\n  fo.filter = filter.AND.length > 0 ? `(filter: ${filterDestructNode(filter.AND)})` : ''\r\n  fo.params = fo.params.length > 2 ? `(${fo.params.substr(1)})` : ''\r\n\r\n  return fo\r\n}\r\n\r\nexport const FilteredList: React.FC<IProjectFilterList> = ({ name, userId, adminMode = false, queries, fields, filter: staticFilter, onCreate, onEdit, getEditLink }) => {\r\n  const [filter, setFilter] = useState(adminMode ? createFilter() : null)\r\n  const history = useHistory()\r\n\r\n  // console.log(filter, listFilter)\r\n  const createDefaultFilter = (userId?: string) => {\r\n    const defaultFilter = createFilter()\r\n\r\n    if (userId) {\r\n      addAnd(defaultFilter.AND, { user_every: { id: userId } })\r\n    }\r\n\r\n    if (staticFilter) {\r\n      addAnd(defaultFilter.AND, staticFilter)\r\n    }\r\n\r\n    return defaultFilter\r\n  }\r\n\r\n  const processFilter = (filter: any) => {\r\n    const filterDestructed = filterDestruct(filter)\r\n\r\n    console.log('processFilter', { filter, filterDestructed })\r\n\r\n    setFilter(filter)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const defaultFilter = createDefaultFilter(userId)\r\n    processFilter(defaultFilter)\r\n  }, [userId])\r\n\r\n  const onFilterChange = useCallback(\r\n    (f: string | null) => {\r\n      const defaultFilter = createDefaultFilter(userId)\r\n\r\n      if (f) {\r\n        addAnd(defaultFilter.AND, f)\r\n      }\r\n\r\n      processFilter(defaultFilter)\r\n    },\r\n    [userId],\r\n  )\r\n\r\n  const onCreateNew = () => {\r\n    if (onCreate) onCreate()\r\n    else history.push('/user/' + name.toLowerCase() + '/create')\r\n  }\r\n\r\n  // if is not adminMode,\r\n  // the useEffect will update filter with user after render\r\n  // but in render is already called the query\r\n  // but the query will call without properly setuped filter and return unauthorized\r\n  if (!adminMode && !filter) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"base-filtered-list\">\r\n      <section>\r\n        <h1>{name}</h1>\r\n        <div className=\"row-head\">\r\n          <FilterItem fields={fields} onChange={onFilterChange} />\r\n          <div></div>\r\n        </div>\r\n        <div className=\"row-table\">\r\n          <Table name={name} filter={filter} queries={queries} adminMode={adminMode} fields={fields} onEdit={onEdit} getEditLink={getEditLink} />\r\n          <Button onClick={onCreateNew}>Create New</Button>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FilteredList\r\n","export default __webpack_public_path__ + \"static/media/3.017f06c9.png\";","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport './Card.scss'\r\nimport logo from './3.png'\r\nimport { Alert, Button } from 'react-bootstrap'\r\n\r\ninterface ICards {\r\n  project: any\r\n  onRemove: (project: any) => void\r\n}\r\n\r\nexport const Card: React.FC<ICards> = ({ project, onRemove }) => {\r\n  const history = useHistory()\r\n\r\n  const projectConnectLink = `https://graphql.monster/client/${project.user.id}/project/${project.id}/graphql`\r\n\r\n  const onEdit = () => {\r\n    history.push('/user/projects/' + project.id)\r\n  }\r\n\r\n  const onExports = () => {\r\n    history.push(`/user/projects/${project.id}/exports`)\r\n  }\r\n\r\n  const onFiles = () => {\r\n    history.push(`/user/projects/${project.id}/files`)\r\n  }\r\n\r\n  const onPlayground = () => {\r\n    history.push(`/user/projects/${project.id}/graphiql`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"projectCard\">\r\n      <div>\r\n        <img className=\"projectCardImg\" src={logo} alt=\"...\" />\r\n      </div>\r\n      <div className=\"\">\r\n        <div>\r\n          <h4 className=\"projectCardName\">{`${project.name} (basic)`}</h4>\r\n          <h5>{project.domain}</h5>\r\n          <Alert variant=\"warning\">Be aware system is in beta mode, not store any importand data without back-up. This is only for demostration or study purposes</Alert>\r\n          <form>\r\n            <div className=\"input-group\">\r\n              <input type=\"text\" className=\"form-control\" value={projectConnectLink} placeholder=\"Project connect link\" id=\"copy-input\" />\r\n              <span className=\"input-group-btn\">\r\n                <Button\r\n                  className=\"btn btn-default\"\r\n                  onClick={() => {\r\n                    navigator.clipboard.writeText(projectConnectLink)\r\n                  }}\r\n                  title=\"Copy to clipboard\"\r\n                >\r\n                  Copy\r\n                </Button>\r\n              </span>\r\n            </div>\r\n          </form>\r\n        </div>\r\n\r\n        <div className=\"projectCardButtons\">\r\n          <button type=\"button\" className=\"btn btn-sm btn-primary projectCardButtons\" onClick={onEdit}>\r\n            Configuration\r\n          </button>\r\n          <button type=\"button\" className=\"btn btn-sm btn-primary projectCardButtons\" onClick={onExports}>\r\n            Exports\r\n          </button>\r\n          <button type=\"button\" className=\"btn btn-sm btn-primary projectCardButtons\" onClick={onFiles}>\r\n            Files\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-sm btn-primary projectCardButtons\"\r\n            onClick={onPlayground}\r\n            title=\"In Admin Playground button you will connect to GraphQL playground with admin rights\"\r\n          >\r\n            Admin Playground\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-sm btn-danger projectCardButtons\"\r\n            onClick={() => {\r\n              onRemove(project)\r\n            }}\r\n          >\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Card\r\n","import React from 'react'\r\nimport DeleteModal from '../../components/DeleteModal/DeleteModal'\r\nimport Card from './Card'\r\n\r\nimport './ProjectCards.scss'\r\n\r\ninterface IProjectCards {\r\n  projects?: any[]\r\n  onRemove: (project: any) => void\r\n}\r\n\r\nexport const ProjectCards: React.FC<IProjectCards> = ({ projects, onRemove }) => {\r\n  if (!projects || projects.length < 1) {\r\n    return (\r\n      <div className=\"projectCards\">\r\n        <div className=\"alert alert-info\" role=\"alert\">\r\n          You do not have any project created, please start with creating a project\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"projectCards\">\r\n      {projects.map((project) => {\r\n        return (\r\n          <div className=\"projectSingleCard\">\r\n            <Card project={project} onRemove={onRemove} />\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProjectCards\r\n","import React, { useState, useEffect } from 'react'\r\nimport FilteredList from '../../components/List1/FilteredList'\r\nimport gql from 'graphql-tag'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport ProjectCards from './ProjectCards'\r\nimport { Button } from 'react-bootstrap'\r\nimport { useMutation, useQuery } from '@apollo/client'\r\nimport { selectUser } from '../../app/reducers/userSlice'\r\nimport { useSelector } from 'react-redux'\r\nimport DeleteModal from '../../components/DeleteModal/DeleteModal'\r\n\r\nexport const USER_LIST_QUERY = gql`\r\n  query allProjects1($filter: ProjectFilter) {\r\n    allProject(filter: $filter) {\r\n      id\r\n      name\r\n      models\r\n      modelsInfo\r\n      user {\r\n        id\r\n        email\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nconst ADMIN_LIST_QUERY = gql`\r\n  query allProjects($filter: ProjectFilter) {\r\n    allProject(filter: $filter) {\r\n      id\r\n      name\r\n      models\r\n      user {\r\n        id\r\n        email\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nconst DELETE_MUTATION = gql`\r\n  mutation deleteProject($id: ID!) {\r\n    removeProject(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`\r\n\r\nconst GraphiqlLink: React.FC<{ value: any; names?: any; item: any }> = ({ value, names, item }) => {\r\n  return <Link to={`/user/projects/${item.id}/graphiql`}>playground</Link>\r\n}\r\n\r\nexport const ProjectList: React.FC<{ adminMode?: boolean }> = ({ adminMode = false }) => {\r\n  const history = useHistory()\r\n  const [data, setData] = useState<any[]>()\r\n  const user = useSelector(selectUser) || { id: null }\r\n\r\n  const [projectForRemove, setProjectForRemove] = useState<any>(null)\r\n\r\n  const onHideDidaloDelete = () => {\r\n    setProjectForRemove(null)\r\n  }\r\n\r\n  const onRemove = (project: any) => {\r\n    setProjectForRemove(project)\r\n  }\r\n\r\n  const doRemove = async () => {\r\n    setProjectForRemove(null)\r\n    await removeMutation({ variables: { id: projectForRemove.id } })\r\n  }\r\n\r\n  const { refetch, loading: userLoading } = useQuery(USER_LIST_QUERY, {\r\n    onError: (e) => {\r\n      console.log('onError >>> ', e.message)\r\n      if (e.message == 'GraphQL error: Unauhorized') {\r\n        // setUnauthorized(true)\r\n      } else {\r\n        // setError(e)\r\n      }\r\n    },\r\n    onCompleted: (d) => {\r\n      console.log('user: onCompleted', d)\r\n      //setLoading(false)\r\n\r\n      const dataFields = Object.getOwnPropertyNames(d)\r\n      if (dataFields.length > 0 && d[dataFields[0]].length > 0) {\r\n        setData(d[dataFields[0]])\r\n      } else {\r\n        setData([])\r\n      }\r\n    },\r\n    variables: {\r\n      filter: {\r\n        user_every: { id: user.id },\r\n      },\r\n    },\r\n  })\r\n\r\n  const [removeMutation] = useMutation(DELETE_MUTATION, {\r\n    errorPolicy: 'none',\r\n    update: (cache, { data }) => {\r\n      const removeProject = data.removeProject\r\n\r\n      if (removeProject) {\r\n        const cacheRead = cache.readQuery({\r\n          query: USER_LIST_QUERY,\r\n          variables: {\r\n            filter: { user_every: { id: user.id } },\r\n          },\r\n        }) as any\r\n\r\n        cache.writeQuery({\r\n          query: USER_LIST_QUERY,\r\n          variables: {\r\n            filter: { user_every: { id: user.id } },\r\n          },\r\n          data: {\r\n            allProject: cacheRead.allProject.filter((project: any) => project.id !== removeProject.id),\r\n          },\r\n        })\r\n        refetch()\r\n        console.log(data)\r\n      }\r\n    },\r\n  })\r\n\r\n  const onCreateNew = () => {\r\n    history.push('/user/projects/create')\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"center-y relative \" data-scroll-speed=\"4\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-10 offset-md-1\">\r\n              <div className=\"col-md-12 \">\r\n                <ProjectCards projects={data} onRemove={onRemove} />\r\n                <Button onClick={onCreateNew}>Create New Project</Button>\r\n              </div>\r\n              <div className=\"clearfix\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <DeleteModal show={!!projectForRemove} onHide={onHideDidaloDelete} onDelete={doRemove} category={'project'} deleteObject={projectForRemove} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport const ProjectAdminList: React.FC<{ adminMode?: boolean }> = () => {\r\n  const userId = localStorage.getItem('user.id') || ''\r\n  return (\r\n    <>\r\n      <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-10 offset-md-1\">\r\n              <div className=\"col-md-12 text-center\">\r\n                {\r\n                  <FilteredList\r\n                    name={'Projects'}\r\n                    fields={['name', { name: 'id', title: 'playground', component: GraphiqlLink }]}\r\n                    userId={userId}\r\n                    adminMode={true}\r\n                    queries={{ USER_LIST_QUERY, ADMIN_LIST_QUERY, DELETE_MUTATION }}\r\n                  />\r\n                }\r\n              </div>\r\n\r\n              <div className=\"clearfix\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProjectList\r\n","import { loader } from 'graphql.macro'\r\nimport * as _ from 'lodash'\r\nimport React, { useState } from 'react'\r\nimport AceEditor from 'react-ace'\r\nimport { Form } from 'react-bootstrap'\r\nimport { useHistory } from 'react-router'\r\nimport BaseEditor from '../../components/Editor/BaseEditor'\r\nimport { TControl, TField } from '../../components/EditorEx/Control'\r\nimport { ProjectEditForm } from './EditForm'\r\nimport { USER_LIST_QUERY } from './List'\r\n\r\nimport 'ace-builds/src-noconflict/mode-java'\r\nimport 'ace-builds/src-noconflict/theme-github'\r\n\r\nconst CREATE_MUTATION = loader('./graphql/create.gql')\r\nconst UPDATE_MUTATION = loader('./graphql/update.gql')\r\nconst QUERY = loader('./graphql/query.gql')\r\n\r\nconst ProjectSchemaControl: React.FC<TControl> = ({ onChange, value }) => (\r\n  <React.Fragment>\r\n    <AceEditor\r\n      width=\"1000px\"\r\n      value={value}\r\n      onChange={(value) => {\r\n        console.log(value)\r\n        onChange({ target: { value } })\r\n      }}\r\n      name=\"UNIQUE_ID_OF_DIV\"\r\n      editorProps={{ $blockScrolling: true }}\r\n    />\r\n    {/* <Form.Control as=\"textarea\" rows={30} {...{onChange, value}} /> */}\r\n  </React.Fragment>\r\n)\r\n\r\nconst TextEditControl: React.FC<TControl> = ({ onChange, value, placeholder }) => (\r\n  <React.Fragment>\r\n    <Form.Control as=\"textarea\" rows={3} {...{ onChange, value }} placeholder={placeholder} />\r\n  </React.Fragment>\r\n)\r\n\r\nconst ProjectErrorControl: React.FC<TControl> = ({ onChange, value }) => (\r\n  <>\r\n    {value ? (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        {value}\r\n      </div>\r\n    ) : (\r\n      'all good'\r\n    )}\r\n  </>\r\n)\r\n\r\nconst SchemaTab = [\r\n  { label: 'Service name (SERVICE_NAME)', name: 'name', placeholder: 'your-service-name' },\r\n  { name: 'models', label: 'Schema', control: ProjectSchemaControl },\r\n]\r\n\r\nconst EmailTab: TField[] = [\r\n  // {label: 'Service name (same as project name)', name: 'name', placeholder: 'service name'},\r\n  { label: 'Service url (SERVICE_URL)', name: 'domain', placeholder: 'http(s)://your-service.domain' },\r\n  { label: 'Email from', name: 'email', placeholder: 'info@your-service.domain' },\r\n  { label: 'Welcome Email Title', name: 'emailWelcomeTitle', placeholder: 'Wellcome in {{SERVICE_NAME}}' },\r\n  {\r\n    label: 'Welcome Email Message',\r\n    name: 'emailWelcomeMessage',\r\n    control: TextEditControl,\r\n    placeholder:\r\n      'Please verify your email by click to this <a href=\"{{SERVICE_URL}}/email/${user.__verifyToken}/verify\">{{SERVICE_URL}}/email/${user.__verifyToken}/verify</a>',\r\n  },\r\n  { label: 'Reset Password Email Title', name: 'emailForgottenPasswordTitle', placeholder: 'Change password request for {{SERVICE_NAME}}' },\r\n  {\r\n    label: 'Reset Password Email Message',\r\n    name: 'emailForgottenPasswordMessage',\r\n    control: TextEditControl,\r\n    placeholder:\r\n      'We recaive request about reset Your password. If is not your action, please ignore this message. If you want reset your password follow instruction on this link <a href=\"{{SERVICE_URL}}/forgotten-password/${user.__resetPasswordToken}\">{{SERVICE_URL}}/forgotten-password/${user.__resetPasswordToken}</a>',\r\n  },\r\n]\r\n\r\nconst LoginTab = [\r\n  { label: 'Facebook:ID', name: 'loginFacebookId' },\r\n  { label: 'Facebook:SECRET', name: 'loginFacebookSecret' },\r\n  { label: 'Facebook:CallbackURL', name: 'loginFacebookCallbackURL' },\r\n\r\n  { label: 'Github:Id', name: 'loginGithubId' },\r\n  { label: 'Github:Secret', name: 'loginGithubSecret' },\r\n  { label: 'Github:CallbackURL', name: 'loginGithubCallbackURL' },\r\n\r\n  { label: 'Gmail:ID', name: 'loginGmailId' },\r\n  { label: 'Gmail:Secret', name: 'loginGmailSecret' },\r\n  { label: 'Gmail:CallbackURL', name: 'loginGmailCallbackURL' },\r\n]\r\n\r\nexport const ProjectEdit = (data: any) => {\r\n  const userId = localStorage.getItem('user.id')\r\n  const projectId = _.get(data, 'match.params.projectId')\r\n  const [key, setKey] = useState<string>('home')\r\n\r\n  const [error, setError] = useState('')\r\n  const history = useHistory()\r\n\r\n  const updateCache: (cache: any, data: any) => void = (cache, { data }) => {\r\n    const createProject = data.createProject\r\n\r\n    if (createProject) {\r\n      const cacheRead = cache.readQuery({\r\n        query: USER_LIST_QUERY,\r\n        variables: {\r\n          filter: { user_every: { id: userId } },\r\n        },\r\n      })\r\n\r\n      cache.writeQuery({\r\n        query: USER_LIST_QUERY,\r\n        variables: {\r\n          filter: { user_every: { id: userId } },\r\n        },\r\n        data: {\r\n          allProject: [...cacheRead.allProject, createProject],\r\n        },\r\n      })\r\n\r\n      console.log(cacheRead)\r\n    }\r\n  }\r\n\r\n  const renameError = (error: string) => {\r\n    const dupkeyRegEx = /index: name_1_user_1 dup key: { name: \"(.*?)\"/\r\n\r\n    const dupkeyMatch = error.match(dupkeyRegEx)\r\n    if (dupkeyMatch) {\r\n      return `Field project name have to be unique, you want '${dupkeyMatch[1]}' what is already in your project list`\r\n    }\r\n\r\n    const pathNameRegEx = /validation failed: name: Path `name` is required./\r\n    const pathNameMatch = error.match(pathNameRegEx)\r\n    if (pathNameMatch) {\r\n      return `Field project name can't be empty`\r\n    }\r\n\r\n    return error\r\n  }\r\n\r\n  const onCompleted = () => {\r\n    history.push('/user/projects')\r\n  }\r\n\r\n  return (\r\n    <div className={`base-edit-project base-edit`}>\r\n      <BaseEditor\r\n        externId={projectId}\r\n        name={'Project'}\r\n        query={{\r\n          CREATE_MUTATION: CREATE_MUTATION,\r\n          UPDATE_MUTATION: UPDATE_MUTATION,\r\n          QUERY,\r\n        }}\r\n        updateCache={updateCache}\r\n      >\r\n        {(storedData: any, onSubmit: any, errors: any) => <ProjectEditForm storedData={storedData} onSubmit={onSubmit} graphQlError={errors} projectId={projectId} />}\r\n      </BaseEditor>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport FilteredList from '../../components/List1/FilteredList'\r\nimport gql from 'graphql-tag'\r\nimport { useHistory, useParams } from 'react-router'\r\nimport { useSelector } from 'react-redux'\r\nimport { selectUser } from '../../app/reducers/userSlice'\r\nimport { Link } from 'react-router-dom'\r\nimport { Tab, Tabs } from 'react-bootstrap'\r\nimport { SelectCallback } from 'react-bootstrap/esm/helpers'\r\n\r\nconst USER_LIST_QUERY = gql`\r\n  query allExport($filter: ExportFilter) {\r\n    allExport(filter: $filter) {\r\n      id\r\n      type\r\n      name\r\n    }\r\n  }\r\n`\r\n\r\nconst ADMIN_LIST_QUERY = gql`\r\n  query allExport($filter: ExportFilter) {\r\n    allExport(filter: $filter) {\r\n      id\r\n      type\r\n      name\r\n    }\r\n  }\r\n`\r\n\r\nconst DELETE_MUTATION = gql`\r\n  mutation deleteExport($id: ID!) {\r\n    deleteExport(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`\r\n\r\nexport const UserList: React.FC<{ userId?: string; adminMode?: boolean }> = ({ userId, adminMode = false }) => {\r\n  const user = useSelector(selectUser)\r\n  const history = useHistory()\r\n  const params = useParams() as any\r\n\r\n  const onCreate = () => {\r\n    history.push(`/user/projects/${params.projectId}/exports/create`)\r\n  }\r\n\r\n  const getEditLink = (item: any) => `/user/projects/${params.projectId}/exports/${item.id}`\r\n\r\n  if (!user) return <></>\r\n\r\n  const onTabSelect: SelectCallback = (tabKey) => {\r\n    if (tabKey !== 'exports') {\r\n      history.replace(`/user/projects/${params.projectId}`)\r\n      // history\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"base-edit\">\r\n      <Tabs className=\"base-edit-tabs\" activeKey={'exports'} onSelect={onTabSelect}>\r\n        <Tab eventKey={'main'} title={'Main'}></Tab>\r\n        <Tab eventKey={'email'} title={'Emails'}></Tab>\r\n        <Tab eventKey={'login'} title={'Logins'}></Tab>\r\n        <Tab eventKey={'exports'} title={'Exports'}>\r\n          <FilteredList\r\n            name={'Exports'}\r\n            fields={['id', 'name', 'type']}\r\n            userId={user.id}\r\n            adminMode={adminMode}\r\n            queries={{ USER_LIST_QUERY, ADMIN_LIST_QUERY, DELETE_MUTATION }}\r\n            filter={{ project_every: { id: params.projectId } }}\r\n            onCreate={onCreate}\r\n            // onEdit={onEdit}\r\n            getEditLink={getEditLink}\r\n          />\r\n        </Tab>\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserList\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { DropdownButton, Dropdown, Form } from \"react-bootstrap\";\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport { getDataFromRaw } from \"../EditorEx/Edit\";\r\n\r\nexport const ConnectBase: React.FC<{value:any, names?:any, gql: any, item: any}> = ({value, names, gql, item}) => {\r\n    const element = value\r\n    const name = names.length>1 && names[1]\r\n    const elementTitle = element.push && element.reduce && names.length > 1 ? (element as any[]).reduce((p, e)=>p + `, ${e[name]}`, '').substr(2) : element\r\n  \r\n    const [title, setTitle] = useState(elementTitle)\r\n    const [data, setData] = useState<any[]>([])\r\n  \r\n    const { refetch: userRefetch, loading: userLoading } = useQuery(gql.QUERY, {\r\n      onError: (e) => {\r\n        console.log('ConnectBase:onError >>> ', e.message)\r\n        if(e.message == 'GraphQL error: Unauhorized'){\r\n          // setUnauthorized(true)\r\n        } else {\r\n          // setError(e)\r\n        }\r\n      }, onCompleted: (iraw) => {\r\n        console.log('user: onCompleted', iraw)\r\n        // setLoading(false)\r\n  \r\n        const dataFields = Object.getOwnPropertyNames(iraw)\r\n        if(dataFields.length > 0 && iraw[dataFields[0]].length > 0){\r\n          const raw = iraw[dataFields[0]]\r\n  \r\n          const final = raw.map((r:any)=>{\r\n            return {\r\n              id: r.id,\r\n              checked: title.indexOf(r[name]) !== -1,\r\n              label: r[name]\r\n            }\r\n          })\r\n  \r\n          setData(final)\r\n        } else {\r\n          setData([])\r\n        }\r\n        \r\n      },\r\n    });\r\n  \r\n    const [\r\n      addMutation,\r\n      { loading: addMutaionLoading, data: addMutationData, error: addMutationError }\r\n    ] = useMutation(gql.ADD, {\r\n      errorPolicy: \"none\",\r\n      onCompleted: (raw: any) => {\r\n        const data = getDataFromRaw(raw)\r\n        console.log(\"ADDED\", raw, data.id);\r\n      },\r\n      onError: () => {}\r\n    });\r\n  \r\n    const [\r\n      removeMutation,\r\n      { loading: removeMutaionLoading, data: removeMutationData, error: removeMutationError }\r\n    ] = useMutation(gql.REMOVE, {\r\n      errorPolicy: \"none\",\r\n      onCompleted: (raw: any) => {\r\n        const data = getDataFromRaw(raw)\r\n        console.log(\"REMOVE\", raw, data.id);\r\n      },\r\n      onError: () => {}\r\n    });\r\n  \r\n    const onChecked = (value:any) => {\r\n      const updated = data.map((d:any)=>{\r\n        if(d.label === value.label) {\r\n          d.checked = !d.checked\r\n        }\r\n        return {...d}\r\n      })\r\n  \r\n      const updateTitle = (updated as any[]).reduce((p, e) => {\r\n        if(e.checked) return `${p}, ${e.label}`\r\n        else return p\r\n      }, '').substr(1)\r\n  \r\n      console.log('onChecked:', {updated, value, updateTitle})\r\n  \r\n      if(value.checked){\r\n        addMutation({\r\n          variables: {\r\n            id1: value.id,\r\n            id2: item.id\r\n          }\r\n        });\r\n      } else {\r\n        removeMutation({\r\n          variables: {\r\n            id1: value.id,\r\n            id2: item.id\r\n          }\r\n        });\r\n      }\r\n      \r\n  \r\n      setData(updated)\r\n      setTitle(updateTitle)\r\n    }\r\n    \r\n    // if(element.push && element.reduce && names.length > 1) {\r\n    //   return (<>ahoj: {(element as any[]).reduce((p, e)=>p + e[names[1]], '')}</>)\r\n    // }\r\n  \r\n    return (<DropdownButton id=\"dropdown-basic-button\" title={title}>\r\n        {data && data.map((d:any)=>(\r\n        <Dropdown.Item  onClick={(e:any) => onChecked(d)} >\r\n          <Form.Check \r\n              type=\"checkbox\" \r\n              label={d.label} \r\n              checked={d.checked} />\r\n        </Dropdown.Item>))\r\n        }\r\n      </DropdownButton>)\r\n  }\r\n\r\n  export default ConnectBase","import React from 'react'\r\nimport FilteredList from '../../components/List1/FilteredList'\r\nimport gql from 'graphql-tag'\r\nimport ConnectBase from '../../components/List1/ConnectBase'\r\n\r\nconst USER_LIST_QUERY = gql`\r\n  query allUsers($filter: UserFilter) {\r\n    allUsers(filter: $filter) {\r\n      id\r\n      name\r\n      models\r\n    }\r\n  }\r\n`\r\n\r\nconst ADMIN_LIST_QUERY = gql`\r\n  query allUser($filter: UserFilter) {\r\n    allUser(filter: $filter) {\r\n      id\r\n      email\r\n      password\r\n      roles {\r\n        id\r\n        name\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nconst DELETE_MUTATION = gql`\r\n  mutation deleteUser($id: ID!) {\r\n    deleteUser(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`\r\n\r\nconst USER_ROLE_QUERY = gql`\r\n  query allUserRoles {\r\n    allUserRoles {\r\n      id\r\n      name\r\n    }\r\n  }\r\n`\r\n\r\nconst ADD_MUTATION = gql`\r\n  mutation addToRoleOnUser($id1: ID!, $id2: ID!) {\r\n    addToRoleOnUser(rolesUserRoleId: $id1, usersUserId: $id2) {\r\n      rolesUserRole {\r\n        id\r\n      }\r\n      usersUser {\r\n        id\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nconst REMOVE_MUTATION = gql`\r\n  mutation removeFromRoleOnUser($id1: ID!, $id2: ID!) {\r\n    removeFromRoleOnUser(rolesUserRoleId: $id1, usersUserId: $id2) {\r\n      rolesUserRole {\r\n        id\r\n      }\r\n      usersUser {\r\n        id\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nconst ConnectRole: React.FC<{ value: any; names?: any; item: any }> = ({ value, names, item }) => {\r\n  const gql = {\r\n    QUERY: USER_ROLE_QUERY,\r\n    ADD: ADD_MUTATION,\r\n    REMOVE: REMOVE_MUTATION,\r\n  }\r\n\r\n  return <ConnectBase value={value} names={names} gql={gql} item={item} />\r\n}\r\n\r\nexport const UserList: React.FC<{ userId?: string; adminMode?: boolean }> = ({ userId, adminMode = false }) => {\r\n  return (\r\n    <div>\r\n      <FilteredList\r\n        name={'Users'}\r\n        fields={['email', 'password', { name: 'roles.name', component: ConnectRole }, 'roles.id']}\r\n        userId={userId}\r\n        adminMode={adminMode}\r\n        queries={{ USER_LIST_QUERY, ADMIN_LIST_QUERY, DELETE_MUTATION }}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserList\r\n","import React from 'react'\r\nimport { Badge } from 'react-bootstrap'\r\n\r\n\r\nexport const Logo = () => (\r\n    <div id=\"logo\">\r\n        <a href=\"/\">\r\n        <img alt=\"\" src=\"/logoPQL2.png\" />\r\n        <Badge className=\"beta-badge\" variant=\"danger\">beta</Badge>\r\n        </a>\r\n        \r\n    </div>\r\n)\r\n\r\nexport default Logo","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Dropdown from 'react-bootstrap/Dropdown'\r\nimport Nav from 'react-bootstrap/Nav'\r\nimport Badge from 'react-bootstrap/Badge'\r\nimport Logo from './Logo'\r\n\r\nconst UserHeader = ({user, onLogout}:any) =>  (  <div className=\"header-light transparent scroll-light container\">\r\n<div className=\"row\">\r\n  <div className=\"col-md-12\">\r\n    <div className=\"d-flex justify-content-between\">\r\n      <div className=\"align-self-center header-col-left\">\r\n        <Logo />\r\n      </div>\r\n      <div className=\"align-self-center ml-auto header-col-mid\">\r\n        <ul id=\"mainmenu\">\r\n        <li>\r\n            <Link to=\"/user/projects\">Projects</Link>\r\n          </li>\r\n          <li>\r\n            <a href=\"/documentation\">Documentation</a>\r\n            <ul>\r\n              <li><a href=\"/documentation#model\">Model</a></li>\r\n              <li><a href=\"/documentation#fields\">Fields</a></li>\r\n              <li><a href=\"/documentation#relations\">Relations</a></li>\r\n              <li><a href=\"/documentation#model-permissions\">Model Permissions</a></li>\r\n            </ul>\r\n          </li>\r\n          <li>\r\n            <Link to=\"#\">Administration</Link>\r\n            <ul>\r\n              <li><Link to=\"/admin/projects\">All projects</Link></li>\r\n              <li><Link to=\"/admin/subsribes\">All subsribes</Link></li>\r\n              <li><Link to=\"/admin/users\">All users</Link></li>\r\n              <li><Link to=\"/admin/roles\">All roles</Link></li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n\r\n      </div>\r\n      <div className=\"align-self-center ml-auto header-col-right\">\r\n      <ul id=\"mainmenu\">\r\n                <li>\r\n                  <Link to=\"/user/info\">User</Link>\r\n                  <ul>\r\n                    <li><Link to=\"/user/info\" >User Info</Link></li>\r\n                    <li><Link to=\"/login\" onClick={onLogout}>Logout</Link></li>\r\n                    \r\n                  </ul>\r\n                </li>\r\n                </ul>\r\n                              <span id=\"menu-btn\"></span>\r\n      </div>\r\n      <div className=\"clearfix\"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</div>)\r\n\r\nexport default UserHeader","import React, { useCallback } from \"react\"\r\nimport { NavDropdown } from \"react-bootstrap\"\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nexport const NavDropdownItem: React.FC<{ to: string }> = ({ to, children }) => {\r\n    const history = useHistory()\r\n\r\n    const goTo = useCallback(() => {\r\n        history.push(to)\r\n    }, [history, to])\r\n\r\n    return (<React.Fragment>\r\n        <NavDropdown.Item onClick={goTo}>{children}</NavDropdown.Item>\r\n    </React.Fragment>)\r\n}\r\nexport default NavDropdownItem","import React, { useCallback } from \"react\"\r\nimport { Nav, NavDropdown } from \"react-bootstrap\"\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nexport const NavLink: React.FC<{ to: string }> = ({ to, children }) => {\r\n    const history = useHistory()\r\n\r\n    const goTo = useCallback(() => {\r\n        history.push(to)\r\n    }, [history, to])\r\n\r\n    return (<React.Fragment>\r\n        <Nav.Link onClick={goTo}>{children}</Nav.Link>\r\n    </React.Fragment>)\r\n}\r\nexport default NavLink","import React, { useCallback } from 'react'\r\nimport { Button, Dropdown, Nav, Navbar, NavDropdown } from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom'\r\nimport NavDropdownItem from '../NavDropdownItem/NavDropdownItem'\r\nimport NavLink from '../NavLink/NavLink'\r\n\r\nimport './Header.css'\r\nimport Logo from './Logo'\r\n\r\nexport const PublicHeader = () => (\r\n  <Navbar bg=\"light\" expand=\"lg\">\r\n    <Navbar.Brand href=\"/\">Graphql Monster (beta)</Navbar.Brand>\r\n    <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n    <Navbar.Collapse id=\"basic-navbar-nav\">\r\n      <Nav className=\"mr-auto\">\r\n        <NavLink to=\"/pricing\">Pricing</NavLink>\r\n        <NavDropdown title=\"Documentation\" id=\"basic-nav-dropdown\">\r\n          <NavDropdownItem to=\"/documentation/schema-description\">Schema description</NavDropdownItem>\r\n          <NavDropdownItem to=\"/documentation/obtain-token\">Obtain token</NavDropdownItem>\r\n          <NavDropdownItem to=\"/documentation/todo-app\">Create Todo App Typescript</NavDropdownItem>\r\n        </NavDropdown>\r\n      </Nav>\r\n      <Nav className=\"mr-left\">\r\n        <Link className=\"\" to=\"/login\">\r\n          Login\r\n        </Link>{' '}\r\n        or{' '}\r\n        <Link className=\"\" to=\"/register\">\r\n          Register\r\n        </Link>\r\n      </Nav>\r\n    </Navbar.Collapse>\r\n  </Navbar>\r\n)\r\n\r\nexport default PublicHeader\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Dropdown from 'react-bootstrap/Dropdown'\r\nimport Nav from 'react-bootstrap/Nav'\r\nimport Badge from 'react-bootstrap/Badge'\r\nimport Logo from './Logo'\r\nimport { Navbar, NavDropdown } from 'react-bootstrap'\r\nimport NavDropdownItem from '../NavDropdownItem/NavDropdownItem'\r\nimport NavLink from '../NavLink/NavLink'\r\n\r\nconst UserHeader = ({ user, onLogout }: any) => (\r\n  <Navbar bg=\"light\" expand=\"lg\">\r\n    <Navbar.Brand href=\"#home\">Graphql Monster (beta)</Navbar.Brand>\r\n    <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n    <Navbar.Collapse id=\"basic-navbar-nav\">\r\n      <Nav className=\"mr-auto\">\r\n        <NavLink to=\"/user/projects\">Projects</NavLink>\r\n        <NavDropdown title=\"Documentation\" id=\"basic-nav-dropdown\">\r\n          <NavDropdownItem to=\"/documentation/schema-description\">Schema description</NavDropdownItem>\r\n          <NavDropdownItem to=\"/documentation/obtain-token\">Obtain token</NavDropdownItem>\r\n          <NavDropdownItem to=\"/documentation/todo-app\">Create Todo App Typescript</NavDropdownItem>\r\n        </NavDropdown>\r\n      </Nav>\r\n      <Nav className=\"mr-left\">\r\n        <NavDropdown title=\"User\" id=\"basic-nav-dropdown\">\r\n          <NavDropdown.Item href=\"/user/info\">User Info</NavDropdown.Item>\r\n          <NavDropdown.Divider />\r\n          <NavDropdown.Item href=\"/login\" onClick={onLogout}>\r\n            Logout\r\n          </NavDropdown.Item>\r\n        </NavDropdown>\r\n      </Nav>\r\n    </Navbar.Collapse>\r\n  </Navbar>\r\n)\r\n\r\nexport default UserHeader\r\n","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { logout, selectUser } from '../../app/reducers/userSlice'\r\nimport AdminHeader from './AdminHeader'\r\nimport PublicHeader from './PublicHeader'\r\nimport UserHeader from './UserHeader'\r\n\r\nexport const Header: React.FC = () => {\r\n  const user = useSelector(selectUser)\r\n  const dispatch = useDispatch()\r\n\r\n  const onLogout = () => {\r\n    dispatch(logout())\r\n  }\r\n\r\n  if (user && user.token) {\r\n    if (user.roles.find((r) => r.name === 'admin')) return <AdminHeader user={user} onLogout={onLogout} />\r\n    else return <UserHeader user={user} onLogout={onLogout} />\r\n  }\r\n\r\n  return <PublicHeader />\r\n}\r\n\r\nexport default Header\r\n","import axios from 'axios'\r\n\r\nexport const refreshToken = async () => {\r\n    const userId = localStorage.getItem('user.id')\r\n    const token = localStorage.getItem('user.token')\r\n    const refreshToken = localStorage.getItem('user.refreshToken')\r\n    return axios.post(`${process.env.REACT_APP_HOST}/graphql`, {\r\n        query: `\r\n            mutation refreshToken($userId: ID!, $token: String!, $refreshToken:String!){\r\n                refreshToken_v1(userId: $userId, token: $token, refreshToken:$refreshToken){\r\n                    token,\r\n                    refreshToken\r\n                }\r\n            }\r\n        `,\r\n        variables: {\r\n            userId,\r\n            token,\r\n            refreshToken\r\n        }\r\n    })\r\n}","import { ApolloClient, InMemoryCache, createHttpLink, ApolloLink, fromPromise } from '@apollo/client'\r\nimport { setContext } from '@apollo/client/link/context'\r\nimport { onError } from '@apollo/client/link/error'\r\nimport { refreshToken } from './refreshToken'\r\nimport { RetryLink } from '@apollo/client/link/retry'\r\n\r\nconst retryLink = new RetryLink({\r\n  attempts: (count, operation, error) => {\r\n    return true\r\n  },\r\n  delay: (count, operation, error) => {\r\n    return count * 1000 * Math.random()\r\n  },\r\n})\r\n\r\nlet isRefreshing = false\r\nlet pendingRequests: any = []\r\n\r\nconst resolvePendingRequests = () => {\r\n  //@ts-ignore\r\n  pendingRequests.map((callback) => callback())\r\n  pendingRequests = []\r\n}\r\n\r\n// https://able.bio/AnasT/apollo-graphql-async-access-token-refresh--470t1c8\r\nconst unautheniticatedAction = (forward: any, operation: any) => {\r\n  // error code is set to UNAUTHENTICATED\r\n  // when AuthenticationError thrown in resolver\r\n  let forward$\r\n\r\n  if (!isRefreshing) {\r\n    isRefreshing = true\r\n    forward$ = fromPromise(\r\n      refreshToken()\r\n        // @ts-ignore\r\n        .then(({ data }) => {\r\n          const {\r\n            data: { refreshToken_v1 },\r\n          } = data\r\n          localStorage.setItem('user.token', refreshToken_v1.token)\r\n          localStorage.setItem('user.refreshToken', refreshToken_v1.refreshToken)\r\n\r\n          // Store the new tokens for your auth link\r\n          resolvePendingRequests()\r\n          const oldHeaders = operation.getContext().headers\r\n          // modify the operation context with a new token\r\n          operation.setContext({\r\n            headers: {\r\n              ...oldHeaders,\r\n              authorization: `Bearer ${refreshToken_v1.token}`,\r\n            },\r\n          })\r\n          return forward(operation)\r\n        })\r\n        .catch((error) => {\r\n          pendingRequests = []\r\n          // Handle token refresh errors e.g clear stored tokens, redirect to login, ...\r\n          return\r\n        })\r\n        .finally(() => {\r\n          isRefreshing = false\r\n        }),\r\n    ).filter((value) => Boolean(value))\r\n  } else {\r\n    // Will only emit once the Promise is resolved\r\n    forward$ = fromPromise(\r\n      new Promise((resolve) => {\r\n        // @ts-ignore\r\n        pendingRequests.push(() => resolve())\r\n      }),\r\n    )\r\n  }\r\n\r\n  // @ts-ignore\r\n  return forward$.flatMap(() => {\r\n    return forward(operation)\r\n  })\r\n}\r\n\r\nconst authLink = setContext((_, { headers }) => {\r\n  // get the authentication token from local storage if it exists\r\n  const token = localStorage.getItem('user.token')\r\n  // return the headers to the context so httpLink can read them\r\n  return {\r\n    headers: {\r\n      ...headers,\r\n      authorization: token ? `Bearer ${token}` : '',\r\n    },\r\n  }\r\n})\r\n\r\nconst httpLink = createHttpLink({\r\n  uri: `${process.env.REACT_APP_HOST}/graphql`,\r\n  //uri: 'http://protectql.com/graphql',\r\n})\r\n\r\n// @ts-ignore\r\nconst erroLink = onError(({ graphQLErrors, networkError, operation, forward }) => {\r\n  if (graphQLErrors && graphQLErrors.some((error) => (error as any).tokenExpired)) {\r\n    return unautheniticatedAction(forward, operation)\r\n  }\r\n\r\n  if (graphQLErrors) graphQLErrors.map(({ message, locations, path }) => console.log(`[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`))\r\n\r\n  if (networkError) console.log(`[Network error]: ${networkError}`)\r\n})\r\n\r\nexport const apolloClient = new ApolloClient({\r\n  link: ApolloLink.from([retryLink, erroLink, authLink, httpLink]),\r\n  cache: new InMemoryCache(),\r\n  defaultOptions: {\r\n    watchQuery: {\r\n      errorPolicy: 'none',\r\n    },\r\n    query: {\r\n      errorPolicy: 'none',\r\n    },\r\n    mutate: {\r\n      errorPolicy: 'all',\r\n    },\r\n  },\r\n})\r\n\r\nexport default apolloClient\r\n","import React, { useState, useEffect } from 'react'\r\nimport FilteredList from '../../components/List1/FilteredList'\r\nimport gql from 'graphql-tag'\r\n\r\nconst USER_LIST_QUERY = gql`\r\n  query allUser($filter: UserFilter) {\r\n    allUsers(filter: $filter) {\r\n      id\r\n      name\r\n      models\r\n    }\r\n  }\r\n`\r\n\r\nconst ADMIN_LIST_QUERY = gql`\r\n  query allUserRole($filter: UserRoleFilter) {\r\n    allUserRole(filter: $filter) {\r\n      id\r\n      name\r\n    }\r\n  }\r\n`\r\n\r\nconst DELETE_MUTATION = gql`\r\n  mutation deleteUserRole($id: ID!) {\r\n    deleteUserRole(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`\r\n\r\nexport const UserRoleList: React.FC<{ userId?: string; adminMode?: boolean }> = ({ userId, adminMode = false }) => {\r\n  return (\r\n    <div>\r\n      <FilteredList name={'Roles'} fields={['role']} userId={userId} adminMode={adminMode} queries={{ USER_LIST_QUERY, ADMIN_LIST_QUERY, DELETE_MUTATION }} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserRoleList\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport * as _ from 'lodash'\r\nimport gql from \"graphql-tag\";\r\n\r\nimport BaseEdit from \"../../components/EditorEx/Edit\"\r\n\r\n\r\nconst CREATE_MUTATION = gql`\r\n  mutation createUserRole($role: String!) {\r\n    createUserRole(role: $role) {\r\n      id\r\n      role\r\n    }\r\n  }\r\n`;\r\n\r\nconst UPDATE_MUTATION = gql`\r\n  mutation updateUserRole($id:ID!, $role: String!) {\r\n    updateUserRole(id: $id, role: $role) {\r\n      id\r\n      role\r\n    }\r\n  }\r\n`;\r\n\r\nconst QUERY = gql`\r\n  query userRole($id:ID){ UserRole(id:$id) {\r\n      id,\r\n      role,\r\n    }}\r\n`;\r\n\r\nexport const UserRoleEdit = (data:any) => {\r\n  const id = _.get(data, 'match.params.id')\r\n  \r\n\r\n  return (\r\n    <>\r\n      <BaseEdit \r\n        id={id} \r\n        name={'UserRole'}\r\n        fields={['role']}\r\n        query={{\r\n            CREATE_MUTATION,\r\n            UPDATE_MUTATION,\r\n            QUERY\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserRoleEdit","import _ from 'lodash'\r\nimport React from 'react'\r\nimport { Provider, useSelector } from 'react-redux'\r\nimport { Playground, store, getSettings, setSettingsString } from 'graphql-playground-react'\r\nimport { selectUser } from '../../app/reducers/userSlice'\r\n\r\nexport const GQLPlayground: React.FC<{ data: any }> = (data: any) => {\r\n  const userState = useSelector(selectUser) || { id: null, token: null }\r\n  const projectId = _.get(data, 'match.params.projectId')\r\n  const endpoint = `${process.env.REACT_APP_HOST}/client/${userState.id}/project/${projectId}/graphql`\r\n  // const endpoint = `${process.env.REACT_APP_HOST}/graphql`\r\n\r\n  // NOTE: for some reason pass setting over `setting` properties doesn't work\r\n  //       so it is taken this workeround\r\n  // https://github.com/graphql/graphql-playground/issues/1037#issuecomment-559224565\r\n  // grab the redux store\r\n  const state = store.getState()\r\n  // get the current settings\r\n  const settings = getSettings(state)\r\n  settings['editor.theme'] = 'light'\r\n  settings['schema.polling.enable'] = false\r\n  settings['request.globalHeaders'] = {\r\n    // hot reload\r\n    Authorization: `Bearer ${localStorage.getItem('user.token')}`,\r\n    XUser: `${userState.id}`,\r\n    XProject: `${projectId}`,\r\n\r\n    // proxy mode works on authorization\r\n    // 'Authorization': `Bearer ${userState.token}`,\r\n  }\r\n\r\n  store.dispatch(setSettingsString(JSON.stringify(settings, null, 2)))\r\n  return (\r\n    <Provider store={store}>\r\n      <Playground endpoint={endpoint} workspaceName={projectId} platformToken={'ahojk8999333'} />\r\n    </Provider>\r\n  )\r\n}\r\n\r\nexport default GQLPlayground\r\n","import React from 'react'\r\nimport Typed from 'react-typed'\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const Home = () => {\r\n\r\n    return (\r\n        <div className=\"no-bottom no-top\" id=\"content\">\r\n            <section className=\"full-height vertical-center\">\r\n                <div className=\"container\">\r\n                    <div className=\"row align-items-center\">\r\n                        <div className=\"col-lg-5\" data-wow-delay=\".5s\">\r\n                            <div className=\"ready-to-launch\">Ready to launch\r\n                                <div>\r\n                                    your&nbsp;\r\n                                    <Typed className=\"typed id-color\"\r\n                                        // typedRef={(typed) => { this.typed = typed; }}\r\n                                        strings={[\r\n                                            'backend',\r\n                                            'service',\r\n                                            'application']}\r\n                                        typeSpeed={70}\r\n                                        backSpeed={54}\r\n                                        startDelay={2000}\r\n\r\n                                        loop\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <p className=\"p-lead\">Instant protected Graphql service, with models designed by you. You can connect with React.js, Vue.js or Angular.js app and create application right now</p>\r\n                            <Link className=\"btn btn-primary btn-round\" to=\"/register\">Try it for free</Link>&nbsp;&nbsp;\r\n                            <Link className=\"btn btn-round\" to=\"/register\">How it is works?</Link>\r\n                            <div className=\"mb-sm-30\"></div>\r\n                        </div>\r\n\r\n                        <div className=\"col-lg-6 offset-lg-1\" data-wow-delay=\".5s\">\r\n                            <img src=\"3.png\" className=\"img-fluid\" alt=\"\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            <section className=\"full-height vertical-center\">\r\n            </section>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Home","\r\n\r\nexport const isEmailValid = (email: string) => {\r\n    if(process.env.NODE_ENV === 'development') return true\r\n\r\n    return new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,15}/g).test(email)\r\n}\r\n\r\nexport const isPasswordValid = (password: string) => {\r\n    //if(process.env.NODE_ENV === 'development') return true\r\n\r\n    const regularExpression = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/\r\n    return regularExpression.test(password)\r\n}\r\n\r\nexport interface IPasswordStrongResult {\r\n    valid: boolean\r\n    strong: number\r\n    name: string\r\n    variant: string\r\n}\r\nexport const passwordStrong = (password: string):IPasswordStrongResult => {\r\n    const length = password.length\r\n\r\n    if(length < 1){\r\n        return {\r\n           valid: false,\r\n           strong: 0,\r\n           name: '',\r\n           variant: 'danger'  \r\n        } as IPasswordStrongResult\r\n    }\r\n\r\n    if(length >= 15){\r\n        return {\r\n            valid: true,\r\n            strong: 100,\r\n            name: 'strong',\r\n            variant: 'success' \r\n         } as IPasswordStrongResult\r\n    }\r\n\r\n    const capital = /(?=.*[A-Z]){2,}/.test(password) ? 2 : ( /(?=.*[A-Z])/.test(password) ? 1 : 0)\r\n    const lower = /(?=.*[a-z]){2,}/.test(password) ? 2 : ( /(?=.*[a-z])/.test(password) ? 1 : 0)\r\n    const number = /(?=.*[0-9]){2,}/.test(password) ? 2 : ( /(?=.*[0-9])/.test(password) ? 1 : 0)\r\n    const special = /(?=.*[!@#$%^&*]){2,}/.test(password) ? 2 : ( /(?=.*[!@#$%^&*])/.test(password) ? 1 : 0)\r\n    \r\n    const value = capital + lower + number + special\r\n\r\n    const valid = (length > 7 && lower > 0 && number > 0) || process.env.NODE_ENV === 'development'\r\n    let percentage = (value+(length/4))\r\n    if(percentage > 10) percentage = 10\r\n\r\n    return {\r\n        valid,\r\n        strong: percentage * 10,\r\n        name: value > 6 ? 'strong' : (value > 4 ? 'intermediate' : (valid ? 'weak' : 'poor')),\r\n        variant: percentage > 6 ? 'success' : (valid ? 'warning' : 'danger'),\r\n    } as IPasswordStrongResult\r\n    \r\n}","import React from 'react'\r\nimport { Form, ProgressBar } from 'react-bootstrap'\r\nimport { IPasswordStrongResult } from '../../app/utils'\r\n\r\nexport interface IPasswordComponent {\r\n  strongPassword: IPasswordStrongResult\r\n  password: string\r\n  onPasswordChange: (arg: any) => void\r\n}\r\n\r\nexport const PasswordComponent: React.FC<IPasswordComponent> = ({ onPasswordChange, password, strongPassword }) => (\r\n  <Form.Group controlId=\"formBasicPassword\">\r\n    <Form.Label>Password</Form.Label>\r\n    <Form.Control type=\"password\" placeholder=\"Password\" onChange={onPasswordChange} value={password} isInvalid={!strongPassword.valid} />\r\n    <Form.Text>Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter</Form.Text>\r\n    <ProgressBar now={strongPassword.strong} label={strongPassword.name} variant={strongPassword.variant} />\r\n  </Form.Group>\r\n)\r\n\r\nexport default PasswordComponent\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import React, { useState } from 'react'\r\nimport gql from 'graphql-tag'\r\nimport { useMutation } from '@apollo/client'\r\nimport { Modal, Form, Alert, Button, ProgressBar } from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { isEmailValid, passwordStrong } from '../../app/utils'\r\nimport PasswordComponent from './PasswordComponent'\r\nimport { useAppDispatch } from '../../app/hooks'\r\nimport { login, UserToken } from '../../app/reducers/userSlice'\r\n\r\nconst REGISTER_MUTATION = gql`\r\n  mutation register($email: String!, $pass: String!) {\r\n    register_v1(email: $email, password: $pass) {\r\n      refreshToken\r\n      token\r\n      user {\r\n        roles {\r\n          name\r\n        }\r\n        id\r\n        email\r\n        verified\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const Register: React.FC = () => {\r\n  const [email, setEmail] = useState('')\r\n  const [pass, setPass] = useState('')\r\n  const [copy, setCopy] = useState('')\r\n\r\n  const history = useHistory()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const [registerMutation, { loading, data, error }] = useMutation(REGISTER_MUTATION, {\r\n    errorPolicy: 'none',\r\n  })\r\n\r\n  const [invalidEmail, setInvalidEmail] = useState(false)\r\n  const [emailProbablyTaken, setEmailProbablyTaken] = useState(false)\r\n  const [strong, setStrong] = useState(passwordStrong(''))\r\n\r\n  const [invalidCopy, setInvalidCopy] = useState(false)\r\n\r\n  const onRegister = async () => {\r\n    if (!isEmailValid(email)) {\r\n      return setInvalidEmail(true)\r\n    }\r\n\r\n    if (pass !== copy) {\r\n      setInvalidCopy(true)\r\n      return\r\n    }\r\n\r\n    try {\r\n      const { data } = await registerMutation({ variables: { email, pass } })\r\n      const userToken = data.register_v1 as UserToken\r\n      dispatch(login(userToken))\r\n      history.push('/user/projects')\r\n    } catch (ex) {\r\n      console.log('onError', data)\r\n      setEmailProbablyTaken(true)\r\n    }\r\n  }\r\n\r\n  const onEmailChange = (event: any) => {\r\n    setEmail(event.target.value)\r\n    setInvalidEmail(false)\r\n    setEmailProbablyTaken(false)\r\n  }\r\n\r\n  const onPasswordChange = (event: any) => {\r\n    const pass = event.target.value as string\r\n\r\n    setPass(pass)\r\n    setInvalidEmail(false)\r\n    setStrong(passwordStrong(pass))\r\n  }\r\n\r\n  const onCopyChange = (event: any) => {\r\n    const c = event.target.value\r\n    setCopy(c)\r\n    setInvalidEmail(false)\r\n\r\n    if (c == pass) {\r\n      setInvalidCopy(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <section id=\"subheader\" data-bgimage=\"url(images/background/5.png) bottom\">\r\n        <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8 offset-md-2\">\r\n                <form action=\"blank.php\" className=\"row\" id=\"form_subscribe\" method=\"post\" name=\"myForm\">\r\n                  <div className=\"col-md-12 text-center\">\r\n                    <h1>User Registration</h1>\r\n                    <p>All big things starting here</p>\r\n                  </div>\r\n                  <div className=\"clearfix\"></div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <section className=\"no-top\" data-bgimage=\"url(images/background/3.png) top\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 offset-md-3\">\r\n              <form name=\"contactForm\" id=\"contact_form\" className=\"form-border\" method=\"post\" action=\"blank.php\">\r\n                <Form>\r\n                  {invalidEmail && <Alert variant={'danger'}>Email is not in good shape...</Alert>}\r\n                  {emailProbablyTaken && (\r\n                    <Alert variant={'danger'}>\r\n                      Email is probably taken, did you <Link to=\"/forgotten-password\">forgotten password</Link>?\r\n                    </Alert>\r\n                  )}\r\n                  {invalidCopy && <Alert variant={'danger'}>The retyped password is not the same</Alert>}\r\n                  <Form.Group controlId=\"formBasicEmail\">\r\n                    <Form.Label>Email address</Form.Label>\r\n                    <Form.Control type=\"email\" placeholder=\"Enter email\" onChange={onEmailChange} value={email} isInvalid={invalidEmail} />\r\n                    <Form.Text className=\"text-muted\">We'll never share your email with anyone else.</Form.Text>\r\n                  </Form.Group>\r\n\r\n                  <PasswordComponent password={pass} onPasswordChange={onPasswordChange} strongPassword={strong} />\r\n\r\n                  <Form.Group controlId=\"formBasicPassword\">\r\n                    <Form.Label>Re-Password</Form.Label>\r\n                    <Form.Control type=\"password\" placeholder=\"Retype Password\" onChange={onCopyChange} value={copy} isInvalid={invalidCopy} />\r\n                  </Form.Group>\r\n                </Form>\r\n\r\n                <div id=\"submit\" className=\"pull-left\">\r\n                  {!loading && (\r\n                    <Button className=\"btn-round\" variant=\"primary\" onClick={() => onRegister()}>\r\n                      Register\r\n                    </Button>\r\n                  )}\r\n                  {loading && (\r\n                    <Button className=\"btn-round\" variant=\"primary\" disabled>\r\n                      Loading...\r\n                    </Button>\r\n                  )}\r\n\r\n                  <div className=\"clearfix\"></div>\r\n\r\n                  <div className=\"spacer-single\"></div>\r\n\r\n                  {/* <ul className=\"list s3\">\r\n                  <li>Or login with:</li>\r\n                  <li><a href=\"#\">Facebook</a></li>\r\n                  <li><a href=\"#\">Google</a></li>\r\n                  <li><a href=\"#\">Instagram</a></li>\r\n                </ul> */}\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Register\r\n","import { useMutation } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport React, { useState } from 'react'\r\nimport { Alert, Button, Form } from 'react-bootstrap'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { useAppDispatch } from '../../app/hooks'\r\nimport { login, UserToken } from '../../app/reducers/userSlice'\r\nimport { isEmailValid } from '../../app/utils'\r\n\r\nconst LOGIN_QL = gql`\r\n  mutation Login($email: String!, $pass: String!) {\r\n    login_v1(email: $email, password: $pass) {\r\n      token\r\n      refreshToken\r\n      user {\r\n        id\r\n        email\r\n        verified\r\n        roles {\r\n          name\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const Login: React.FC = () => {\r\n  const [email, setEmail] = useState(localStorage.getItem('user.email') as string)\r\n  const [pass, setPass] = useState('')\r\n\r\n  const [invalidEmail, setInvalidEmail] = useState(false)\r\n  const [invalidPass, setInvalidPass] = useState(false)\r\n\r\n  const history = useHistory()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const [loginMutation, { loading, data, error }] = useMutation(LOGIN_QL, { errorPolicy: 'none' })\r\n\r\n  const onLogin = async () => {\r\n    if (!isEmailValid(email)) {\r\n      return setInvalidEmail(true)\r\n    }\r\n\r\n    try {\r\n      const { data }: any = await loginMutation({ variables: { email, pass } })\r\n      const userToken = data.login_v1 as UserToken\r\n\r\n      dispatch(login(userToken))\r\n      history.push('/user/projects')\r\n    } catch (e) {\r\n      setInvalidEmail(true)\r\n      setInvalidPass(true)\r\n      setPass('')\r\n    }\r\n  }\r\n\r\n  const onEmailChange = (event: any) => {\r\n    setEmail(event.target.value)\r\n    setInvalidEmail(false)\r\n    setInvalidPass(false)\r\n  }\r\n\r\n  const onPasswordChange = (event: any) => {\r\n    setPass(event.target.value)\r\n    setInvalidEmail(false)\r\n    setInvalidPass(false)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <section id=\"subheader\" data-bgimage=\"url(images/background/5.png) bottom\">\r\n        <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8 offset-md-2\">\r\n                <form action=\"blank.php\" className=\"row\" id=\"form_subscribe\" method=\"post\" name=\"myForm\">\r\n                  <div className=\"col-md-12 text-center\">\r\n                    <h1>User Login</h1>\r\n                    <p>We was missed you already</p>\r\n                  </div>\r\n                  <div className=\"clearfix\"></div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <section className=\"no-top\" data-bgimage=\"url(images/background/3.png) top\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 offset-md-3\">\r\n              <Form name=\"contactForm\" id=\"contact_form\" className=\"form-border\">\r\n                {!invalidPass && <h3>Login to your account</h3>}\r\n                {invalidPass && (\r\n                  <Alert variant={'danger'}>\r\n                    Email or password is not valid. Did You <Link to=\"/forgotten-password\">forgotten your password</Link>?\r\n                  </Alert>\r\n                )}\r\n                {invalidEmail && <Alert variant={'danger'}>Email is not in good shape...</Alert>}\r\n                <Form.Group controlId=\"formBasicEmail\">\r\n                  <Form.Label>Email address</Form.Label>\r\n                  <Form.Control type=\"text\" placeholder=\"Enter email\" onChange={onEmailChange} value={email} isInvalid={invalidEmail} />\r\n                </Form.Group>\r\n\r\n                <Form.Group controlId=\"formBasicPassword\">\r\n                  <Form.Label>Password</Form.Label>\r\n                  <Form.Control type=\"password\" onChange={onPasswordChange} value={pass} isInvalid={invalidPass} />\r\n                  <Form.Text className=\"text-muted\">We'll never share your password with anyone else.</Form.Text>\r\n                </Form.Group>\r\n\r\n                <div id=\"submit\" className=\"pull-left\">\r\n                  {!loading && (\r\n                    <Button className=\"btn-round\" variant=\"primary\" onClick={() => onLogin()}>\r\n                      Login\r\n                    </Button>\r\n                  )}\r\n                  {loading && (\r\n                    <Button className=\"btn-round\" variant=\"primary\" disabled>\r\n                      Loading...\r\n                    </Button>\r\n                  )}\r\n                  <div className=\"clearfix\"></div>\r\n\r\n                  <div className=\"spacer-single\"></div>\r\n\r\n                  <ul className=\"list s3\">\r\n                    <li>Or login with:</li>\r\n                    <li>\r\n                      <a href={`${process.env.REACT_APP_HOST}/auth/github`}>GitHub</a>\r\n                    </li>\r\n                    <li>\r\n                      <a href={`${process.env.REACT_APP_HOST}/auth/facebook`}>Facebook</a>\r\n                    </li>\r\n                    <li>\r\n                      <a href={`${process.env.REACT_APP_HOST}/auth/google`}>Google</a>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </Form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const PricingPage: React.FC = () => (\r\n  <>\r\n    <section id=\"subheader\" data-bgimage=\"url(images/background/5.png) bottom\">\r\n      <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-8 offset-md-2\">\r\n              <form action=\"blank.php\" className=\"row\" id=\"form_subscribe\" method=\"post\" name=\"myForm\">\r\n                <div className=\"col-md-12 text-center\">\r\n                  <h1>Pricing</h1>\r\n                  <p>Ready to rock?</p>\r\n                </div>\r\n                <div className=\"clearfix\"></div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <section className=\"no-top pricing\">\r\n      <div className=\"row text-center align-items-end\">\r\n        <div className=\"col-lg-4 mb-5 mb-lg-0\">\r\n          <div className=\"bg-white p-5 rounded-lg shadow\">\r\n            <h1 className=\"h6 text-uppercase font-weight-bold mb-4\">Basic</h1>\r\n            <h2 className=\"h1 font-weight-bold\">\r\n              $0<span className=\"text-small font-weight-normal ml-2\">/ month</span>\r\n            </h2>\r\n            <div className=\"custom-separator my-4 mx-auto bg-primary\"></div>\r\n            up to 3 basic projects\r\n            <ul className=\"list-unstyled my-5 text-small text-left\">\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> Advanced user auth with Login, Register, ...\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> up to 1000 request / hour\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> up to 10MB database space\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> up to 10MB disk space\r\n              </li>\r\n              <li className=\"mb-3 text-muted\">\r\n                <i className=\"fa fa-times mr-2\"></i>\r\n                <del>User Email verification</del>\r\n              </li>\r\n              <li className=\"mb-3 text-muted\">\r\n                <i className=\"fa fa-times mr-2\"></i>\r\n                <del>3th party login (Facebook, Google, ...)</del>\r\n              </li>\r\n              <li className=\"mb-3 text-muted\">\r\n                <i className=\"fa fa-times mr-2\"></i>\r\n                <del>Hooks with own code</del>\r\n              </li>\r\n              <li className=\"mb-3 text-muted\">\r\n                <i className=\"fa fa-times mr-2\"></i>\r\n                <del>Control of environment variables</del>\r\n              </li>\r\n            </ul>\r\n            <Link to=\"register\" className=\"btn btn-primary btn-block p-2 shadow rounded-pill\">\r\n              Try it now\r\n            </Link>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-lg-4 mb-5 mb-lg-0\">\r\n          <div className=\"bg-white p-5 rounded-lg shadow\">\r\n            <h1 className=\"h6 text-uppercase font-weight-bold mb-4\">Pro</h1>\r\n            <h2 className=\"h1 font-weight-bold\">\r\n              $19.99<span className=\"text-small font-weight-normal ml-2\">/ month</span>\r\n            </h2>\r\n            <div className=\"custom-separator my-4 mx-auto bg-primary\"></div>plus one basic and one Pro project\r\n            <ul className=\"list-unstyled my-5 text-small text-left font-weight-normal\">\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> Advanced user auth with Login, Register, ...\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> up to 10000 request / hour\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> starts with 100MB database space\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> starts with 100MB disk space\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> User Email verification\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> 3th party login (Facebook, Google, ...)\r\n              </li>\r\n              <li className=\"mb-3 text-muted\">\r\n                <i className=\"fa fa-times mr-2\"></i>\r\n                <del> Hooks with own code</del>\r\n              </li>\r\n              <li className=\"mb-3 text-muted\">\r\n                <i className=\"fa fa-times mr-2\"></i>\r\n                <del>Control of environment variables</del>\r\n              </li>\r\n            </ul>\r\n            <Link to=\"subscribe\" className=\"btn btn-primary btn-block p-2 shadow rounded-pill\">\r\n              Subscribe\r\n            </Link>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-lg-4\">\r\n          <div className=\"bg-white p-5 rounded-lg shadow\">\r\n            <h1 className=\"h6 text-uppercase font-weight-bold mb-4\">Dedicated</h1>\r\n            <h2 className=\"h1 font-weight-bold\">\r\n              $199.99<span className=\"text-small font-weight-normal ml-2\">/ month</span>\r\n            </h2>\r\n            <div className=\"custom-separator my-4 mx-auto bg-primary\"></div>\r\n            plus one dedicated server\r\n            <ul className=\"list-unstyled my-5 text-small text-left font-weight-normal\">\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> Advanced user auth with Login, Register, ...\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> not limited requests\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> own database space\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> own disk space\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> User Email verification\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> 3th party login (Facebook, Google, ...)\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> Hooks with own code\r\n              </li>\r\n              <li className=\"mb-3\">\r\n                <i className=\"fa fa-check mr-2 text-primary\"></i> Control of environment variables\r\n              </li>\r\n            </ul>\r\n            <Link to=\"subscribe\" className=\"btn btn-primary btn-block p-2 shadow rounded-pill\">\r\n              Subscribe\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </>\r\n)\r\n\r\nexport default PricingPage\r\n","import { useMutation } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport React, { useState } from 'react'\r\nimport { Button, Form } from 'react-bootstrap'\r\nimport Recaptcha from 'react-recaptcha'\r\n\r\nconst SUBSCRIBE_MUTATION_QL = gql`\r\n  mutation subsribe($email: String!, $message: String!) {\r\n    createSubscribe(email: $email, message: $message) {\r\n      id\r\n    }\r\n  }\r\n`\r\nexport const SubscribePage: React.FC = () => {\r\n  const [email, setEmail] = useState('')\r\n  const [message, setPass] = useState('')\r\n\r\n  const [invalidEmail, setInvalidEmail] = useState(false)\r\n  const [invalidPass, setInvalidPass] = useState(false)\r\n  const [verified, setVerify] = useState(false)\r\n\r\n  const [subsribed, setSubsribed] = useState(false)\r\n\r\n  const [subsribe, { loading, data, error }] = useMutation(SUBSCRIBE_MUTATION_QL, {\r\n    errorPolicy: 'none',\r\n    onCompleted: (data) => {\r\n      console.log('e,c', data)\r\n      setSubsribed(true)\r\n    },\r\n    onError: () => {\r\n      console.log('onError', data)\r\n      setInvalidEmail(true)\r\n    },\r\n  })\r\n\r\n  const onSubsribe = async () => {\r\n    subsribe({ variables: { email, message } })\r\n  }\r\n\r\n  const onEmailChange = (event: any) => {\r\n    const email = event.target.value as string\r\n    const validEmail = !/^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+\\.([A-Za-z]{2,})$/.test(email)\r\n\r\n    setEmail(email)\r\n    setInvalidEmail(validEmail)\r\n    setInvalidPass(false)\r\n  }\r\n\r\n  const onTextChange = (event: any) => {\r\n    setPass(event.target.value)\r\n    setInvalidEmail(false)\r\n    setInvalidPass(false)\r\n  }\r\n\r\n  const onHide = () => {\r\n    setPass('')\r\n    setInvalidEmail(false)\r\n    setInvalidPass(false)\r\n    // doHide()\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <section id=\"subheader\" data-bgimage=\"url(images/background/5.png) bottom\">\r\n        <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8 offset-md-2\">\r\n                <form action=\"blank.php\" className=\"row\" id=\"form_subscribe\" method=\"post\" name=\"myForm\">\r\n                  <div className=\"col-md-12 text-center\">\r\n                    <h1>Subscribe</h1>\r\n                    <p>We are almost done</p>\r\n                  </div>\r\n                  <div className=\"clearfix\"></div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <section className=\"no-top\" data-bgimage=\"url(images/background/3.png) top\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 offset-md-3\">\r\n              <Form name=\"contactForm\" id=\"contact_form\" className=\"form-border\">\r\n                <h3>We working very hard on new features</h3>\r\n                <p className=\"p-lead\">\r\n                  Even we believe we are very close to bring them to a life But we want to be sure our product will met our costumers satisfaction. So we decided to push\r\n                  back a little bit and take time for reimlplement some features to improve them. Even we work very hard they are still not completed yet. Please let us\r\n                  know if You want to be part of our early-adopters-program to be one of first humans to use them\r\n                </p>\r\n                <Form.Group controlId=\"formBasicEmail\">\r\n                  <Form.Label>Email address</Form.Label>\r\n\r\n                  <Form.Control type=\"text\" placeholder=\"Enter email\" onChange={onEmailChange} value={email} isInvalid={invalidEmail} />\r\n                  <Form.Control.Feedback type=\"invalid\">The email is very probably incorect</Form.Control.Feedback>\r\n                </Form.Group>\r\n\r\n                <Form.Group controlId=\"formBasicPassword\">\r\n                  <Form.Label>Do you tell us what features you need a most?</Form.Label>\r\n                  <Form.Control as=\"textarea\" rows={10} onChange={onTextChange} value={message} isInvalid={invalidPass} />\r\n                </Form.Group>\r\n\r\n                {!subsribed && (\r\n                  <div id=\"submit\" className=\"pull-left\">\r\n                    {/* disabled={!verified || invalidEmail} */}\r\n                    {!loading && (\r\n                      <Button className=\"btn-round\" variant=\"primary\" onClick={() => onSubsribe()} disabled={!verified || invalidEmail}>\r\n                        Send to us\r\n                      </Button>\r\n                    )}\r\n                    {loading && (\r\n                      <Button className=\"btn-round\" variant=\"primary\" disabled>\r\n                        Sending...\r\n                      </Button>\r\n                    )}\r\n                    <div className=\"clearfix\"></div>\r\n                  </div>\r\n                )}\r\n\r\n                {!subsribed && (\r\n                  <div>\r\n                    <Recaptcha\r\n                      sitekey={'6LeirhoaAAAAADIzp_mcmG0ly-DQSBB5ScfXi3jh'}\r\n                      verifyCallback={(v) => {\r\n                        console.log('verifyCallback', v)\r\n                        setTimeout(() => setVerify(true), 300)\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n                {subsribed && <div>Sent: Thank You we will reach you very soon with our new features</div>}\r\n              </Form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SubscribePage\r\n","import React from 'react'\r\nimport Typed from 'react-typed'\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport ReactMarkdown from 'react-markdown'\r\nimport gfm from 'remark-gfm'\r\n\r\nimport markdown from './markdowns/Schema.md'\r\nimport './Documentation.scss'\r\n\r\nexport const DocumentationSchemaDescription = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"my-documentation\">\r\n        <ReactMarkdown plugins={[gfm]} children={markdown} allowDangerousHtml={true} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DocumentationSchemaDescription\r\n","\n                export default `\n# Schema Description\r\n\r\n1. [Model](#model)\r\n1. [Entity](#entity)\r\n1. [Fields](#fields)\r\n1. [Relations](#relations)\r\n1. [Model Permissions](#model-permissions)\r\n\r\n# Model\r\n\r\nTypes are similar of types in graphql [https://graphql.org/learn/schema/](https://graphql.org/learn/schema/). Model should start with capital letter like \"**Todo**\" and should have taged with reserved word **@model**\r\n\r\n\\`\\`\\`\r\ntype Todo @model {\r\n    name: String!\r\n    done: Boolean!\r\n}\r\n\\`\\`\\`\r\n\r\n**Todo** is a GraphQL Object Type, meaning it's a type with some fields. For ProtectQL meaning is a model.\r\n**name** and **done** are fields on the Character type. That means that name and done are the only fields that can appear in any part of a GraphQL query that operates on the Todo model/type.\r\n\r\n**String** is one of the built-in scalar types - these are types that resolve to a single scalar object, and can't have sub-selections in the query. We'll go over scalar types more later.\r\n\r\n**String!** means that the field is non-nullable, meaning that the GraphQL service promises to always give you a value when you query this field. In the type language, we'll represent those with an exclamation mark.\r\n\r\n## Default Models\r\n\r\n### User\r\n\r\nModel User is predefined and contain some main fields what is not possible change or rename \\`email\\`, \\`password\\`, \\`verified\\`, \\`roles\\`. Whole model looks like:\r\n\r\n\\`\\`\\`\r\ntype User @model {\r\n    email: String! @isReadonly\r\n    password: String! @isReadonly\r\n    verified: Boolean @isReadonly\r\n    roles: [@relation(\"RoleOnUser\")]\r\n}\r\n\\`\\`\\`\r\n\r\nBut you can extend these fields by defining new ones\r\n\r\n\\`\\`\\`\r\ntype User @model {\r\n    firstName: String\r\n    lastName: String\r\n    # the other fields like email, password, verified and roles\r\n    # are not present in model definition but fully accessible by GraphQL query\r\n}\r\n\\`\\`\\`\r\n\r\n### UserRole\r\n\r\nThis model you can't modify or extend, but is look like this\r\n\r\n\\`\\`\\`\r\ntype UserRole @model {\r\n  name: String @isUnique\r\n  users: [@relation(\"RoleOnUser\")]\r\n}\r\n\\`\\`\\`\r\n\r\n# Entity\r\n\r\nEntity should start with capital letter like \"**Todo**\" and should have taged with reserved word **@entity**. Entity doesn't have a id, so is not possible create, update or list it from graphql. Entity have to be part of object. Also can't have a relation to another model. Lets have \\`Address\\`\r\n\r\n\\`\\`\\`\r\ntype Address @entity {\r\n    name: String!\r\n    street: String!\r\n    city: String!\r\n}\r\n\\`\\`\\`\r\n\r\nnow we can map entity to Todo\r\n\r\n\\`\\`\\`\r\ntype Invoice @model {\r\n    customer: Address\r\n    seller: Address\r\n    totalPrice: Float\r\n}\r\n\\`\\`\\`\r\n\r\nor even we can map entity as array\r\n\r\n\\`\\`\\`\r\ntype InvoiceItem @entity {\r\n    name: String!\r\n    count: Int!\r\n    price: float!\r\n}\r\n\r\ntype Invoice @model {\r\n    items: [InvoiceItem]\r\n    customer: Address\r\n    seller: Address\r\n    totalPrice: Float\r\n}\r\n\\`\\`\\`\r\n\r\nShare one entity accross multiple models is also not problem\r\n\r\n# Fields\r\n\r\n## Defining own fields\r\n\r\nEach model have members. Member have two parts \\`name\\` and \\`scalar type\\`. Name should start with regular character like a-z or cappital A-Z\r\n\r\n\\`\\`\\`\r\nfield: String # possible\r\nField: String # possible\r\nfield123: String # possible\r\nfield_123: String # possible\r\n\r\n123field: String # not possible\r\n_field: String # not possible\r\n\r\nemit1: String # possible\r\nemit: String # not possible is reserved\r\n\\`\\`\\`\r\n\r\n### Field reserved names\r\n\r\n-   id\r\n-   on\r\n-   emit\r\n-   \\_events\r\n-   db\r\n-   get\r\n-   set\r\n-   init\r\n-   isNew\r\n-   errors\r\n-   schema\r\n-   options\r\n-   modelName\r\n-   collection\r\n-   \\_pres\r\n-   \\_posts\r\n-   toObject\r\n\r\n## Field scalar types\r\n\r\n| Syntax  | Description                                                                                                                                                                                                                                                |\r\n| ------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\r\n| **ID**  | The ID scalar type represents a unique identifier, often used to refetch an object or as the key for a cache. The ID type is serialized in the same way as a String; however, defining it as an ID signifies that it is not intended to be humanreadable. |\r\n| String  | A UTF8 character sequence                                                                                                                                                                                                                                 |\r\n| Boolean | **true** or **false**.                                                                                                                                                                                                                                     |\r\n| Int     | A signed 32bit integer                                                                                                                                                                                                                                    |\r\n| Float   | A signed double-precision floating-point value                                                                                                                                                                                                             |\r\n| Date    | objects represent a single moment in time in a platform-independent format.                                                                                                                                                                                |\r\n\r\n## Arrays\r\n\r\nEach field can be described as array\r\n\r\n\\`\\`\\`\r\nfield1: [String] # this field is array of strings\r\nfield2: [Int] # this field is array of numbers\r\nfield3: [Boolean] # this field is array of boolens\r\nfield4: [Date] # this field is array of dates\r\n\\`\\`\\`\r\n\r\n## Field modificators\r\n\r\n| Syntax      | Description                                                                  |\r\n| ----------- | ---------------------------------------------------------------------------- |\r\n| !           | mark field as mandatory (default is optional)                                |\r\n| @isReadonly | Object can be set only when is created                                       |\r\n| @isUnique   | Field is unique                                                              |\r\n| @relation   | A special type descriptive the object is actualy relations to another object |\r\n| @default    | describe default field value                                                 |\r\n| @virtual    | field marked as virtual is not in database                                   |\r\n| @regExp     | field is conditional by regexpresion                                         |\r\n\r\n### Examples\r\n\r\n\\`\\`\\`\r\nfield1: String                         # this field is optional for creation and posible change in edit\r\nfield2: String!                        # this field is mandatory for creation and posible change in edit\r\nfield3: String @isReadonly             # this field is posible setup in creation but not posible change in edit\r\nfield4: String! @isReadonly            # this field you need setup in creation but not posible change in edit\r\nfield5: String @isUnique               # this field is unique\r\nfield6: String @isUnique               # this field is mandatory and unique\r\nfield7: String @isUnique @isReadonly   # this field is optional, unique and readolny\r\nfield8: String! @isUnique @isReadonly  # this field is mandatory, unique and readonly\r\nfield9: String @default(\"hello\")       # this field is optional, but the default value will be \"hello\"\r\n\\`\\`\\`\r\n\r\n### Unique can be combination of multiple fields\r\n\r\nIs unique modificator can have parameter to specify fields combination. For example if you want unique field value for one user, but another user can also have same value but just once\r\n\r\n\\`\\`\\`\r\ntype Todo @model {\r\n name: String! @isUnique(combinationWith:\"user\")\r\n user: User @relation(name: \"TodoOnUser\")\r\n}\r\n\r\n\\`\\`\\`\r\n\r\n# Relations\r\n\r\nEach model can be connected to another model with following relations\r\n\r\n-   one to one\r\n-   many to one\r\n-   one to many\r\n-   many to many\r\n\r\n## modificator\r\n\r\n\\`\\`\\`\r\nfield: @releation(name: \"relation-name\")\r\n\\`\\`\\`\r\n\r\nFirst the releation field have to be a same type as connected object. Also must be mark with @relation modificator. Relation modificator have parameter name what describe unique key to recognize connection on booth sides.\r\n\r\n## one to one - example\r\n\r\nOne user will have one Todo\r\n\r\n\\`\\`\\`\r\ntype Todo @model {\r\n user: @relation(name: \"TodoOnUser\")\r\n}\r\n\r\ntype User @model {\r\n todo: @relation(name: \"TodoOnUser\")\r\n}\r\n\\`\\`\\`\r\n\r\n## one to many - example\r\n\r\nOne user will have multiple Todos\r\n\r\n\\`\\`\\`\r\ntype Todo @model {\r\n user: @relation(name: \"TodoOnUser\")\r\n}\r\n\r\ntype User @model {\r\n todo: [@relation(name: \"TodoOnUser\")]\r\n}\r\n\\`\\`\\`\r\n\r\n## many to many - example\r\n\r\nOne Users can have multiple Todos what can be related to multiple Users\r\n\r\n\\`\\`\\`\r\ntype Todo @model {\r\n user: [@relation(name: \"TodoOnUser\")]\r\n}\r\n\r\ntype User @model {\r\n todo: [@relation(name: \"TodoOnUser\")]\r\n}\r\n\\`\\`\\`\r\n\r\n## More relation to different object - example\r\n\r\n\\`\\`\\`\r\ntype Todo @model {\r\n user: @relation(name: \"TodoOnUser\")\r\n}\r\n\r\ntype Project @model {\r\n user: @relation(name: \"ProjectOnUser\")\r\n}\r\n\r\ntype User @model {\r\n todo: [@relation(name: \"TodoOnUser\")]\r\n project: [@relation(name: \"ProjectOnUser\")]\r\n}\r\n\\`\\`\\`\r\n\r\n## Required relations\r\n\r\nRelatations can be required, but not array relations. Array relations will be automaticaly set as not required\r\n\r\n### Required relations example\r\n\r\nHere is a example Todo what have required relation to User model, in this case you can't create a Todo without a user\r\n\r\n\\`\\`\\`\r\ntype Todo @model {\r\n user: @relation(name: \"TodoOnUser\")!\r\n}\r\n\r\ntype User @model {\r\n todo: [@relation(name: \"TodoOnUser\")]\r\n}\r\n\\`\\`\\`\r\n\r\nIn another way this relation with required list of user are not possible and will automaticaly set to \\`user: [@relation(name: \"TodoOnUser\")]\\` (not required list of User)\r\n\r\n\\`\\`\\`\r\ntype Todo @model {\r\n user: [@relation(name: \"TodoOnUser\")]!\r\n}\r\n\r\ntype User @model {\r\n todo: [@relation(name: \"TodoOnUser\")]\r\n}\r\n\\`\\`\\`\r\n\r\n# Model Permissions\r\n\r\nEcha model can have described his own permissions for each operation\r\n\r\n| Action  | Description                              |\r\n| ------- | ---------------------------------------- |\r\n| @one    | permission about read one model by ID    |\r\n| @all    | permission about read all models         |\r\n| @create | permission about create a model          |\r\n| @update | permission about update a existing model |\r\n| @delete | permission about delete a existing model |\r\n\r\n| Tag values | Description                             |\r\n| ---------- | --------------------------------------- |\r\n| public     | anybody can do the action               |\r\n| user       | any loged user can do the action        |\r\n| owner      | only owner of a model                   |\r\n| role       | only user who is sign to a role (group) |\r\n| filter     | only if the filter are aplied           |\r\n\r\nLets take a look on our first model Todo\r\n\r\n\\`\\`\\`\r\n# @create(role:\"admin\") - these are default invisible setting\r\n# @one(role:\"admin\") @update(role:\"admin\") @remove(role:\"admin\") - these are default invisible setting\r\n# @all(role:\"admin\") - these are default invisible setting\r\ntype Todo @model {\r\n    name: String!\r\n    done: Boolean!\r\n}\r\n\\`\\`\\`\r\n\r\nby default is every operation sign only for admin, but we can add some setting\r\n\r\n\\`\\`\\`\r\n@create(\"user\")\r\n@one(\"owner\") @update(\"owner\") @remove(\"owner\")\r\n@all(filter:\"user_every.id={{userId}}\")\r\ntype Todo @model {\r\n    name: String!\r\n    done: Boolean!\r\n}\r\n\\`\\`\\`\r\n\r\nNow the model can be created by any loged user, get one, update or delete, can only user who created this object. And last but also important see all objects is possible only with \\`user_every.id\\` filter applied thats mean, user can see only his own models.\r\n\r\nNote: admin still keeps all the roles, and can anything\r\n\r\n## Another role\r\n\r\nYou can add another role for example \\`TodosRole\\` what you can add some user who will have this priviledge, then you can add this role to permision to do some actions\r\n\r\n\\`\\`\\`\r\n@create(\"user\")\r\n@one(\"owner\") @update(\"owner\") @remove(\"owner\")\r\n@all(filter:\"user_every.id={{userId}}\")\r\n@all(role:\"TodosRole\") # we add some extra permisions for TodosRole\r\ntype Todo @model {\r\n    name: String!\r\n    done: Boolean!\r\n}\r\n\\`\\`\\`\r\n\r\nnow all the objects of Todo can see also a user who is sign to TodosRole\r\n\n            `","import React, { useState, useEffect } from \"react\";\r\nimport FilteredList from \"../../components/List1/FilteredList\";\r\nimport gql from 'graphql-tag';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst USER_LIST_QUERY = gql`\r\n  query allSubscribes($filter: SubscribeFilter){ allSubscribes(filter: $filter) {\r\n    id,\r\n    email,\r\n    message\r\n    }}\r\n`;\r\n\r\nconst ADMIN_LIST_QUERY = gql`\r\n  query allSubscribes($filter: SubscribeFilter){ allSubscribes(filter: $filter) {\r\n    id,\r\n    email,\r\n    message\r\n    }}\r\n`;\r\n\r\nconst DELETE_MUTATION = gql`\r\n  mutation deleteSubsribe($id: ID!) {\r\n    deleteSubscribe(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nconst GraphiqlLink: React.FC<{value:any, names?:any, item:any}> = ({value,names, item}) => {\r\n  return <Link to={`/user/projects/${item.id}/graphiql`}>playground</Link>\r\n}\r\n\r\nexport const SubscibesListPage: React.FC<{userId?: string, adminMode?: boolean}> = ({userId, adminMode=false}) => {\r\n    return (\r\n      <>\r\n \r\n            <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-10 offset-md-1\">\r\n                                <div className=\"col-md-12 text-center\">\r\n                                    \r\n            <FilteredList \r\n                name={'Subsribe'}\r\n                fields={[\r\n                  'email',\r\n                  'message']}\r\n                userId={userId} \r\n                adminMode={adminMode}\r\n                queries={{USER_LIST_QUERY, ADMIN_LIST_QUERY, DELETE_MUTATION}} \r\n                />\r\n        </div>\r\n                  \r\n                                <div className=\"clearfix\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n       </>\r\n    )\r\n}\r\n\r\nexport default SubscibesListPage","import { useMutation } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport * as _ from 'lodash'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Button } from 'react-bootstrap'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAppDispatch } from '../../app/hooks'\r\nimport { login, UserToken } from '../../app/reducers/userSlice'\r\n\r\nconst VERIFY_EMAIL_MUTATION = gql`\r\n  mutation verifyEmail($verifyToken: String!) {\r\n    verifyEmail_v1(verifyToken: $verifyToken) {\r\n      refreshToken\r\n      token\r\n      user {\r\n        roles {\r\n          name\r\n        }\r\n        id\r\n        email\r\n        verified\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const VerifyUser: React.FC<any> = ({ match }) => {\r\n  const verifyToken = _.get(match, 'params.verifyToken')\r\n  const [verified, setVerified] = useState(false)\r\n\r\n  const history = useHistory()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const [verify, { loading: verifying, data, error: verifiedError }] = useMutation(VERIFY_EMAIL_MUTATION, {\r\n    errorPolicy: 'none',\r\n  })\r\n\r\n  const doVerifyUser = async () => {\r\n    try {\r\n      const { data } = await verify({ variables: { verifyToken } })\r\n      // dispatch({\r\n      //   type: USER_LOGIN,\r\n      //   userToken: data.verifyEmail_v1,\r\n      // })\r\n      dispatch(login(data.verifyEmail_v1 as UserToken))\r\n      setVerified(true)\r\n      localStorage.setItem('user.verifyToken', verifyToken)\r\n      setTimeout(() => {\r\n        history.replace('/user/projects')\r\n      }, 2000)\r\n    } catch (ex) {\r\n      console.log('onError', data)\r\n    }\r\n  }\r\n\r\n  const onVerifyUser = () => {\r\n    const previouslyVerified = localStorage.getItem('user.verifyToken')\r\n    const userVerified = localStorage.getItem('user.verified') == 'true'\r\n\r\n    // user probably comming with the same link\r\n    // what was for his first verified\r\n    if (userVerified && previouslyVerified == verifyToken) {\r\n      history.replace('/user/projects')\r\n    } else {\r\n      doVerifyUser()\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (verifyToken) {\r\n      onVerifyUser()\r\n    }\r\n  }, [verifyToken])\r\n\r\n  return (\r\n    <section>\r\n      <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-8 offset-md-2\">\r\n              {verified ? (\r\n                <div className=\"alert alert-success\" role=\"alert\">\r\n                  Your account was verified <Button>Start creating</Button>\r\n                </div>\r\n              ) : null}\r\n              {verifying ? (\r\n                <div className=\"alert alert-dark\" role=\"alert\">\r\n                  Your accont is verifing...\r\n                </div>\r\n              ) : null}\r\n              {!verifyToken || verifiedError ? (\r\n                <div className=\"alert alert-dark\" role=\"alert\">\r\n                  The code is invalid or already applyed\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default VerifyUser\r\n","import React, { useState } from 'react'\r\nimport gql from 'graphql-tag'\r\nimport { useMutation } from '@apollo/client'\r\nimport { Modal, Form, Alert, Button } from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { userInfo } from 'os'\r\nimport PasswordComponent from './PasswordComponent'\r\nimport { passwordStrong } from '../../app/utils'\r\nimport { useAppDispatch } from '../../app/hooks'\r\nimport { login, UserToken } from '../../app/reducers/userSlice'\r\n\r\nconst CHANGE_PASSWORD_MUTATION = gql`\r\n  mutation changePassword($userId: ID!, $oldPassword: String!, $newPassword: String!) {\r\n    changePassword_v1(userId: $userId, oldPassword: $oldPassword, newPassword: $newPassword) {\r\n      refreshToken\r\n      token\r\n      user {\r\n        roles {\r\n          name\r\n        }\r\n        id\r\n        email\r\n        verified\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nconst VERIFY_EMAIL_RESEND_MUTATION = gql`\r\n  mutation verifyEmailResend($userId: ID!) {\r\n    verifyEmailResend_v1(userId: $userId) {\r\n      status\r\n    }\r\n  }\r\n`\r\n\r\nexport const UserInfo: React.FC = () => {\r\n  const [oldPassword, setOldPassword] = useState('')\r\n  const [newPassword, setNewPassword] = useState('')\r\n  const [newPasswordCopy, setNewPasswordCopy] = useState('')\r\n  const [showPasswordChanged, setShowPasswordChanged] = useState(false)\r\n  const [invalidPasswordCopy, setInvalidNewPasswordCopy] = useState(false)\r\n\r\n  const [showVerifyEmailSended, setShowVerifyEmailSended] = useState(false)\r\n  const history = useHistory()\r\n\r\n  const [invalidOldPassword, setInvalidOldPassword] = useState(false)\r\n\r\n  const [invalidPass, setInvalidPass] = useState(false)\r\n  const [validPass, setValidPass] = useState(false)\r\n  const [strong, setStrong] = useState(passwordStrong(''))\r\n\r\n  const dispatch = useAppDispatch()\r\n\r\n  const userId = localStorage.getItem('user.id') || ''\r\n  const userEmail = localStorage.getItem('user.email') || ''\r\n  const userVerified = localStorage.getItem('user.verified') == 'true'\r\n\r\n  const [changePassword, { loading, data, error }] = useMutation(CHANGE_PASSWORD_MUTATION, {\r\n    errorPolicy: 'none',\r\n  })\r\n\r\n  const [verifyEmailResend, { loading: resendLoading, data: resend, error: resendError }] = useMutation(VERIFY_EMAIL_RESEND_MUTATION, {\r\n    errorPolicy: 'none',\r\n  })\r\n\r\n  const onVerifyEmailResend = async () => {\r\n    try {\r\n      const { data } = await verifyEmailResend({ variables: { userId } })\r\n      setShowVerifyEmailSended(true)\r\n      // show notify\r\n      setTimeout(() => {\r\n        setShowVerifyEmailSended(false)\r\n      }, 5000)\r\n    } catch (ex) {\r\n      console.log('onError', data)\r\n    }\r\n  }\r\n\r\n  const onChangePassword = async () => {\r\n    if (!strong.valid) return\r\n\r\n    if (newPassword !== newPasswordCopy) {\r\n      setInvalidNewPasswordCopy(true)\r\n      return\r\n    }\r\n\r\n    try {\r\n      const { data } = await changePassword({ variables: { userId, oldPassword, newPassword } })\r\n      // dispatch({\r\n      //   type: USER_LOGIN,\r\n      //   userToken: data.changePassword_v1,\r\n      // })\r\n      dispatch(login(data.changePassword_v1 as UserToken))\r\n      setShowPasswordChanged(true)\r\n\r\n      setOldPassword('')\r\n      setNewPassword('')\r\n      setNewPasswordCopy('')\r\n\r\n      // show notify\r\n      setTimeout(() => {\r\n        setShowPasswordChanged(false)\r\n      }, 5000)\r\n    } catch (ex) {\r\n      console.log('onError', data)\r\n      setInvalidOldPassword(true)\r\n    }\r\n  }\r\n\r\n  const onCurrentPasswordChange = (event: any) => {\r\n    setOldPassword(event.target.value)\r\n    setInvalidOldPassword(false)\r\n  }\r\n\r\n  const onNewPasswordChange = (event: any) => {\r\n    const pass = event.target.value as string\r\n    setStrong(passwordStrong(pass))\r\n\r\n    setNewPassword(pass)\r\n    setInvalidOldPassword(false)\r\n    setInvalidPass(false)\r\n\r\n    if (pass == newPasswordCopy) {\r\n      setInvalidNewPasswordCopy(false)\r\n    }\r\n  }\r\n\r\n  const onNewPasswordCopyChange = (event: any) => {\r\n    const c = event.target.value\r\n    setNewPasswordCopy(c)\r\n    setInvalidOldPassword(false)\r\n    setInvalidPass(false)\r\n\r\n    if (c == newPassword) {\r\n      setInvalidNewPasswordCopy(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <section className=\"no-top\" data-bgimage=\"url(images/background/3.png) top\">\r\n        <div className=\"col-md-12 text-center\">\r\n          <h1>User Setting</h1>\r\n          {showPasswordChanged ? (\r\n            <div className=\"alert alert-success\" role=\"alert\">\r\n              The password was changed\r\n            </div>\r\n          ) : null}\r\n          {showVerifyEmailSended ? (\r\n            <div className=\"alert alert-success\" role=\"alert\">\r\n              Email with verify link was re-send to {userEmail}\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className=\"col-md-12 text-center\">\r\n          <h2>Email</h2>\r\n        </div>\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-2 offset-md-3\">{userEmail}</div>\r\n            <div className=\"col-md-7 \">\r\n              {userVerified ? (\r\n                <div>Verified</div>\r\n              ) : (\r\n                <div>\r\n                  not verified{' '}\r\n                  <Button className=\"btn-sm\" variant=\"warning\" onClick={() => onVerifyEmailResend()} disabled={showVerifyEmailSended}>\r\n                    Resent email with link for verify\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"spacer-single\"></div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-12 text-center\">\r\n          <h2>Change passwod</h2>\r\n        </div>\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 offset-md-3\">\r\n              <form name=\"contactForm\" id=\"contact_form\" className=\"form-border\" method=\"post\" action=\"blank.php\">\r\n                <Form>\r\n                  {invalidOldPassword && <Alert variant={'danger'}>Current password is incorect</Alert>}\r\n                  {invalidPasswordCopy && <Alert variant={'danger'}>The retyped password is not the same</Alert>}\r\n                  <Form.Group controlId=\"formBasicEmail\">\r\n                    <Form.Label>Current password</Form.Label>\r\n                    <Form.Control type=\"password\" placeholder=\"Enter email\" onChange={onCurrentPasswordChange} value={oldPassword} isInvalid={invalidOldPassword} />\r\n                  </Form.Group>\r\n\r\n                  <PasswordComponent password={newPassword} onPasswordChange={onNewPasswordChange} strongPassword={strong} />\r\n\r\n                  <Form.Group controlId=\"formBasicPassword\">\r\n                    <Form.Label>Repeat New Password</Form.Label>\r\n                    <Form.Control\r\n                      type=\"password\"\r\n                      placeholder=\"Retype Password\"\r\n                      onChange={onNewPasswordCopyChange}\r\n                      value={newPasswordCopy}\r\n                      isInvalid={invalidPasswordCopy}\r\n                    />\r\n                  </Form.Group>\r\n                </Form>\r\n\r\n                <div id=\"submit\" className=\"pull-left\">\r\n                  {!loading && (\r\n                    <Button className=\"btn-round\" variant=\"primary\" onClick={() => onChangePassword()} disabled={!strong.valid}>\r\n                      Change Password\r\n                    </Button>\r\n                  )}\r\n                  {loading && (\r\n                    <Button className=\"btn-round\" variant=\"primary\" disabled>\r\n                      Loading...\r\n                    </Button>\r\n                  )}\r\n\r\n                  <div className=\"clearfix\"></div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default UserInfo\r\n","import { useMutation } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport React, { useState } from 'react'\r\nimport { Alert, Button, Form } from 'react-bootstrap'\r\nimport { isEmailValid } from '../../app/utils'\r\n\r\nconst FORGOTTEN_PASSWORD_REQUEST_MUTATION = gql`\r\n  mutation forgottenPassword($email: String!) {\r\n    forgottenPassword_v1(email: $email) {\r\n      email\r\n      status\r\n    }\r\n  }\r\n`\r\n\r\nexport const ForgottenPassword: React.FC = () => {\r\n  const [email, setEmail] = useState('')\r\n  const [invalidEmail, setInvalidEmail] = useState(false)\r\n  const [emailSent, setEmailSent] = useState(false)\r\n\r\n  const [checkResetEmail, { loading: loadingCheckResetEmail, data: checkResetEmailData, error: checkResetEmailError }] = useMutation(\r\n    FORGOTTEN_PASSWORD_REQUEST_MUTATION,\r\n    {\r\n      errorPolicy: 'none',\r\n    },\r\n  )\r\n\r\n  const [doForgottenPassword, { loading, data, error }] = useMutation(FORGOTTEN_PASSWORD_REQUEST_MUTATION, {\r\n    errorPolicy: 'none',\r\n  })\r\n\r\n  const onRequestSend = async () => {\r\n    setEmailSent(false)\r\n    if (email && isEmailValid(email)) {\r\n      setInvalidEmail(false)\r\n      try {\r\n        const { data } = await doForgottenPassword({ variables: { email } })\r\n        setEmailSent(true)\r\n      } catch (ex) {\r\n        console.log('onError', data)\r\n        setInvalidEmail(true)\r\n      }\r\n    } else {\r\n      setInvalidEmail(true)\r\n    }\r\n  }\r\n\r\n  const onEmailChange = (event: any) => {\r\n    setEmail(event.target.value)\r\n    setInvalidEmail(false)\r\n  }\r\n\r\n  if (emailSent) {\r\n    return (\r\n      <>\r\n        <Alert variant={'success'}>We sent to You instruction to email {email}. Check your mailbox (don't forget check spam as well)</Alert>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <section id=\"subheader\" data-bgimage=\"url(images/background/5.png) bottom\">\r\n        <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8 offset-md-2\">\r\n                <form action=\"blank.php\" className=\"row\" id=\"form_subscribe\" method=\"post\" name=\"myForm\">\r\n                  <div className=\"col-md-12 text-center\">\r\n                    <h1>Forgotten Password</h1>\r\n                    <p>Shortly You will be back</p>\r\n                  </div>\r\n                  <div className=\"clearfix\"></div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <section className=\"no-top\" data-bgimage=\"url(images/background/3.png) top\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6 offset-md-3\">\r\n              <form name=\"contactForm\" id=\"contact_form\" className=\"form-border\" method=\"post\" action=\"blank.php\">\r\n                <Form>\r\n                  <Form.Group controlId=\"formBasicEmail\">\r\n                    <Form.Label>Email address</Form.Label>\r\n                    <Form.Control type=\"email\" placeholder=\"Enter email\" onChange={onEmailChange} value={email} isInvalid={invalidEmail} />\r\n                    <Form.Text className=\"text-muted\">We'll never share your email with anyone else.</Form.Text>\r\n                  </Form.Group>\r\n                </Form>\r\n\r\n                <div id=\"submit\" className=\"pull-left\">\r\n                  {!loading && (\r\n                    <Button className=\"btn-round\" variant=\"primary\" onClick={() => onRequestSend()}>\r\n                      Send Recovery Link\r\n                    </Button>\r\n                  )}\r\n                  {loading && (\r\n                    <Button className=\"btn-round\" variant=\"primary\" disabled>\r\n                      Loading...\r\n                    </Button>\r\n                  )}\r\n\r\n                  <div className=\"clearfix\"></div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ForgottenPassword\r\n","import { useMutation } from '@apollo/client'\r\nimport gql from 'graphql-tag'\r\nimport _ from 'lodash'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Alert, Button, Form } from 'react-bootstrap'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAppDispatch } from '../../app/hooks'\r\nimport { login, UserToken } from '../../app/reducers/userSlice'\r\nimport { isPasswordValid, passwordStrong } from '../../app/utils'\r\nimport PasswordComponent from './PasswordComponent'\r\n\r\nconst FORGOTTEN_PASSWORD_CHECK_MUTATION = gql`\r\n  mutation forgottenPasswordCheck($token: String!) {\r\n    check: forgottenPasswordCheck_v1(token: $token) {\r\n      status\r\n    }\r\n  }\r\n`\r\n\r\nconst FORGOTTEN_PASSWORD_RESET_MUTATION = gql`\r\n  mutation forgottenPasswordReset($token: String!, $password: String!) {\r\n    reset: forgottenPasswordReset_v1(token: $token, password: $password) {\r\n      refreshToken\r\n      token\r\n      user {\r\n        roles {\r\n          name\r\n        }\r\n        id\r\n        email\r\n        verified\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const ForgotenPasswordReset: React.FC<any> = ({ match }) => {\r\n  const token = _.get(match, 'params.token')\r\n  const [password, setPassword] = useState('')\r\n  const [copy, setCopy] = useState('')\r\n\r\n  const history = useHistory()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const [doForgottenPasswordCheck, { loading: loadingForgottenPasswordCheck, data: dataForgottenPasswordCheck, error: errorForgottenPasswordCheck }] = useMutation(\r\n    FORGOTTEN_PASSWORD_CHECK_MUTATION,\r\n    {\r\n      errorPolicy: 'none',\r\n    },\r\n  )\r\n\r\n  const [doForgottenPasswordReset, { loading, data, error }] = useMutation(FORGOTTEN_PASSWORD_RESET_MUTATION, {\r\n    errorPolicy: 'none',\r\n  })\r\n\r\n  const [invalidPass, setInvalidPass] = useState(false)\r\n  const [strong, setStrong] = useState(passwordStrong(''))\r\n  const [validPass, setValidPass] = useState(false)\r\n\r\n  const [invalidCopy, setInvalidCopy] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const doCheck = async () => {\r\n      try {\r\n        await doForgottenPasswordCheck({ variables: { token } })\r\n      } catch (ex) {\r\n      } finally {\r\n      }\r\n    }\r\n\r\n    doCheck()\r\n  }, [token, doForgottenPasswordCheck])\r\n\r\n  const onReset = async () => {\r\n    if (!strong.valid) {\r\n      return\r\n    }\r\n\r\n    if (password !== copy) {\r\n      setInvalidCopy(true)\r\n      return\r\n    }\r\n\r\n    try {\r\n      const { data } = await doForgottenPasswordReset({ variables: { token, password } })\r\n      // dispatch({\r\n      //   type: USER_LOGIN,\r\n      //   userToken: data.reset,\r\n      // })\r\n      dispatch(login(data.reset as UserToken))\r\n      history.replace('/user/projects')\r\n    } catch (ex) {\r\n      console.log('onError', data)\r\n    }\r\n  }\r\n\r\n  const onPasswordChange = (event: any) => {\r\n    const pass = event.target.value as string\r\n\r\n    setPassword(pass)\r\n    const valid = isPasswordValid(pass)\r\n    setInvalidPass(!valid)\r\n    setStrong(passwordStrong(pass))\r\n  }\r\n\r\n  const onCopyChange = (event: any) => {\r\n    const c = event.target.value\r\n    setCopy(c)\r\n    setInvalidPass(false)\r\n\r\n    if (c == password) {\r\n      setInvalidCopy(false)\r\n    }\r\n  }\r\n\r\n  if (loadingForgottenPasswordCheck) {\r\n    return <Alert variant={'success'}>Checking token</Alert>\r\n  } else if (dataForgottenPasswordCheck && dataForgottenPasswordCheck.check && dataForgottenPasswordCheck.check.status === 'valid') {\r\n    return (\r\n      <>\r\n        <section id=\"subheader\" data-bgimage=\"url(images/background/5.png) bottom\">\r\n          <div className=\"center-y relative text-center\" data-scroll-speed=\"4\">\r\n            <div className=\"container\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                  <form action=\"blank.php\" className=\"row\" id=\"form_subscribe\" method=\"post\" name=\"myForm\">\r\n                    <div className=\"col-md-12 text-center\">\r\n                      <h1>User Password Reset</h1>\r\n                      <p>You will be back soon</p>\r\n                    </div>\r\n                    <div className=\"clearfix\"></div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"no-top\" data-bgimage=\"url(images/background/3.png) top\">\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6 offset-md-3\">\r\n                <form name=\"contactForm\" id=\"contact_form\" className=\"form-border\" method=\"post\" action=\"blank.php\">\r\n                  <Form>\r\n                    {/* {invalidPass && (<Alert variant={\"danger\"}>The password have to contain capital letter,lower letter, a number and must be 6-16 characters long</Alert>)}   */}\r\n                    {invalidCopy && <Alert variant={'danger'}>The retyped password is not the same</Alert>}\r\n                    <PasswordComponent password={password} onPasswordChange={onPasswordChange} strongPassword={strong} />\r\n\r\n                    <Form.Group controlId=\"formBasicPassword\">\r\n                      <Form.Label>Re-Password</Form.Label>\r\n                      <Form.Control type=\"password\" placeholder=\"Retype Password\" onChange={onCopyChange} value={copy} isInvalid={invalidCopy} />\r\n                    </Form.Group>\r\n                  </Form>\r\n\r\n                  <div id=\"submit\" className=\"pull-left\">\r\n                    {!loading && (\r\n                      <Button className=\"btn-round\" variant=\"primary\" onClick={() => onReset()} disabled={!strong.valid}>\r\n                        Reset password\r\n                      </Button>\r\n                    )}\r\n                    {loading && (\r\n                      <Button className=\"btn-round\" variant=\"primary\" disabled>\r\n                        Loading...\r\n                      </Button>\r\n                    )}\r\n\r\n                    <div className=\"clearfix\"></div>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </>\r\n    )\r\n  } else {\r\n    return (\r\n      <Alert variant={'danger'}>\r\n        The <b>{token}</b> is not valid or already used\r\n      </Alert>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ForgotenPasswordReset\r\n","import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { Link, useHistory, useLocation } from 'react-router-dom'\r\nimport _ from 'lodash'\r\nimport { Alert } from 'react-bootstrap'\r\nimport { login, UserToken } from '../../app/reducers/userSlice'\r\nimport { useAppDispatch } from '../../app/hooks'\r\n\r\nexport const tokenFromFacebookCode = async (type: string, code: string) => {\r\n  return axios.get(`${process.env.REACT_APP_HOST}/auth/${type}/callback?code=${code}`)\r\n}\r\n\r\nexport const PassportCallback: React.FC<{ type: string }> = ({ type }) => {\r\n  const dispatch = useAppDispatch()\r\n  const location = useLocation()\r\n  const codeRaw = _.get(location, 'search', '').split('?code=')\r\n  const code = codeRaw.length > 1 ? codeRaw[1] : ''\r\n\r\n  const history = useHistory()\r\n\r\n  const [error, setError] = useState<string>()\r\n\r\n  const showError = (errorMessage: string) => {\r\n    setError(errorMessage)\r\n    setTimeout(() => {\r\n      history.replace('/login')\r\n    }, 6000)\r\n  }\r\n  useEffect(() => {\r\n    const request = async () => {\r\n      try {\r\n        const data = await tokenFromFacebookCode(type, code)\r\n        const userToken = data.data as UserToken\r\n\r\n        dispatch(login(userToken))\r\n        history.replace('/user/projects')\r\n      } catch (ex) {\r\n        const response = JSON.parse(_.get(ex, 'request.response', '{}'))\r\n        showError(response.error?.error || response.error?.message || ex.message)\r\n      }\r\n    }\r\n\r\n    if (code) request()\r\n    else showError('User denied')\r\n  }, [location])\r\n\r\n  return (\r\n    <>\r\n      {error && (\r\n        <Alert variant={'danger'}>\r\n          <h4>Login {type} Error</h4>\r\n          <p>{error}</p>\r\n          <i>\r\n            You will be redirect back to <Link to=\"/login\">Login</Link>\r\n          </i>\r\n        </Alert>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport { loader } from 'graphql.macro';\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as _ from 'lodash'\r\nimport BaseEdit from \"../../components/EditorEx/Edit\";\r\n\r\n\r\nexport const CREATE_MUTATION = loader('./graphql/create.gql')\r\nexport const UPDATE_MUTATION = loader('./graphql/update.gql')\r\nexport const ONE_QUERY = loader('./graphql/one.gql');\r\nexport const ALL_QUERY = loader('./graphql/all.gql');\r\n\r\nexport const FIELDS = [\r\n\t{name: 'name', label:'Name', required: true},\r\n\t{name: 'type', label:'Type', required: true},\r\n\t{name: 'template', label:'Template', required: true},\r\n\t{name: 'query', label:'Query', required: true}\r\n]\r\n\r\nexport type ExportEditType = {\r\n    name?: string, \r\n    fields?: any\r\n    createMutation?: any,\r\n    updateMutation?: any,\r\n    oneQuery?: any\r\n  }\r\n\r\nexport const ExportEdit:(obj:ExportEditType)=>any = ({name, fields, createMutation, updateMutation, oneQuery }) => {\r\n  const params = useParams() as any;\r\n  \r\n  const id = params.id !== 'create' &&  params.id\r\n\r\n  const updateCache:(cache: any, data: any)=>void = (cache, {data}) => {\r\n    const userId = localStorage.getItem('user.id')\r\n    const mutated = data.mutated\r\n    \r\n    if(userId && mutated){\r\n      const cacheRead = cache.readQuery({\r\n        query: ALL_QUERY,\r\n        variables: {\r\n          filter: createDefaultFilter(userId)\r\n        },\r\n      });\r\n\r\n      cache.writeQuery({\r\n        query: ALL_QUERY,\r\n        variables: {\r\n          filter: createDefaultFilter(userId)\r\n        },\r\n        data: {\r\n          all: [\r\n            ...cacheRead.all, mutated\r\n          ]\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  return (<div className={`base-edit-Export base-edit`}>\r\n      <BaseEdit \r\n        id={id} \r\n        name={name || 'Exports'}\r\n        fields={fields || FIELDS}\r\n        query={{\r\n            CREATE_MUTATION: createMutation || CREATE_MUTATION,\r\n            UPDATE_MUTATION: updateMutation || UPDATE_MUTATION,\r\n            QUERY: oneQuery || ONE_QUERY\r\n        }}\r\n        updateCache={updateCache}\r\n      />\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default ExportEdit\r\n\r\nfunction createDefaultFilter(userId: string) {\r\n  throw new Error(\"Function not implemented.\");\r\n}\r\n","import _ from 'lodash'\r\nimport React, { useEffect } from 'react'\r\n\r\nexport const HiddenItem = ({name, value, register, setValue, storedData}:any) =>{\r\n\r\n    const isRelation = name.endsWith('Id')\r\n    const storedDataName = isRelation ? name.substr(0, name.length-2) : name\r\n    \r\n    useEffect(()=>{\r\n        if(storedData && storedData[storedDataName]) {\r\n            let storedId: string\r\n      \r\n            if(isRelation) storedId = _.get(storedData, [storedDataName, 'id'])\r\n            else storedId = storedData[storedDataName]\r\n      \r\n            setValue(name, storedId)\r\n            \r\n        } else setValue(name, value)\r\n    }, [storedData, value])\r\n    \r\n    \r\n    return (\r\n        <React.Fragment>\r\n            <input type=\"hidden\" {...register(name)} />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default HiddenItem","import React from 'react'\r\nimport { Alert } from 'react-bootstrap'\r\n\r\nexport type TPdfDownloadState = { ok?: Boolean; error?: unknown }\r\n\r\nexport const PdfDownloadState: (state: TPdfDownloadState) => any = ({ ok, error }) => {\r\n  if (ok) {\r\n    return <Alert variant=\"success\">Configuration seems ok</Alert>\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Alert variant=\"warning\">\r\n        <code>{JSON.stringify(error)}</code>\r\n      </Alert>\r\n    )\r\n  }\r\n}\r\n","import JSON5 from 'json5'\r\nimport React, { useCallback, useMemo, useState } from 'react'\r\nimport { Alert, Button, Form } from 'react-bootstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useSelector } from 'react-redux'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { selectUser } from '../../app/reducers/userSlice'\r\nimport { CREATE_MUTATION, ExportEditType, ONE_QUERY, UPDATE_MUTATION } from '../../gen/Export/Edit'\r\nimport AceControl from '../../components/Editor/AceControl'\r\nimport BaseEditor from '../../components/Editor/BaseEditor'\r\nimport Control from '../../components/Editor/Control'\r\nimport HiddenItem from '../../components/Editor/HiddenItem'\r\nimport { PdfDownloadState, TPdfDownloadState } from './PdfDownloadState'\r\nimport './Edit.css'\r\n\r\nconst mutationOptaionToken = `mutation{\r\n  login_v1(email:\"type-user-email\", password:\"type-user-pass\"){\r\n      token\r\n  }\r\n}`\r\n\r\nasync function downloadPDF(setStatus: (a: TPdfDownloadState) => void, url: string, filename = 'download.pdf', token = '') {\r\n  let headers = new Headers()\r\n  if (token) headers.append('Authorization', `Bearer ${token}`)\r\n  setStatus({})\r\n  try {\r\n    const data = await fetch(url, {\r\n      method: 'GET',\r\n      headers: headers,\r\n    })\r\n    const blob = await data.blob()\r\n    if (data.ok) {\r\n      // It is necessary to create a new blob object with mime-type explicitly set for all browsers except Chrome, but it works for Chrome too.\r\n      const newBlob = new Blob([blob], { type: 'application/pdf' })\r\n\r\n      // MS Edge and IE don't allow using a blob object directly as link href, instead it is necessary to use msSaveOrOpenBlob\r\n      if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n        window.navigator.msSaveOrOpenBlob(newBlob)\r\n      } else {\r\n        // For other browsers: create a link pointing to the ObjectURL containing the blob.\r\n        const objUrl = window.URL.createObjectURL(newBlob)\r\n\r\n        let link = document.createElement('a')\r\n        link.href = objUrl\r\n        link.download = filename\r\n        link.click()\r\n\r\n        // For Firefox it is necessary to delay revoking the ObjectURL.\r\n        setTimeout(() => {\r\n          window.URL.revokeObjectURL(objUrl)\r\n        }, 250)\r\n\r\n        setStatus({ ok: true })\r\n      }\r\n    } else {\r\n      let b = new Blob([blob], { type: 'application/json' })\r\n      const fr = new FileReader()\r\n\r\n      fr.onload = function (data1) {\r\n        setStatus({ error: this.result })\r\n        console.log(JSON.parse(this.result as any))\r\n      }\r\n\r\n      fr.readAsText(b)\r\n    }\r\n  } catch (ex) {\r\n    setStatus({ error: ex })\r\n    console.log(ex)\r\n  }\r\n}\r\n\r\nexport const ExportForm = ({ onSubmit, storedData, graphQlError, projectId }: any) => {\r\n  const user = useSelector(selectUser) || { id: null }\r\n  const reactForm = useForm()\r\n  const { register, handleSubmit, formState, setValue, getValues, watch } = reactForm\r\n\r\n  const [pdfDownloadState, setPdfDownloadState] = useState<TPdfDownloadState>({})\r\n  const name = watch('name')\r\n  const testVariables = watch('testVariables')\r\n  const testToken = watch('testToken')\r\n\r\n  const testLink = useMemo(() => {\r\n    const jsonValue = testVariables ? JSON5.stringify(JSON5.parse(testVariables)) : ''\r\n    const escapedValue = encodeURI(jsonValue.substr(1, jsonValue.length - 2))\r\n    return `${process.env.REACT_APP_HOST}/client/${user.id}/project/${projectId}/pdf/${storedData['id']}/${escapedValue}`\r\n  }, [testVariables])\r\n\r\n  const onTestDownload = useCallback(() => {\r\n    downloadPDF(setPdfDownloadState, testLink, `test-download-${name}`, testToken)\r\n  }, [testLink, testToken, name])\r\n\r\n  const processSubmit = (data: any) => {\r\n    onSubmit(data)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Form onSubmit={handleSubmit(processSubmit)}>\r\n        <h1>Export</h1>\r\n        <h2>Config</h2>\r\n        <Control name={'name'} label={'name'} required={true} storedData={storedData} {...reactForm} />\r\n        {/* <Control name={'query'} label={'query'} required={true} storedData={storedData} {...reactForm} /> */}\r\n        {/* <Control name={'template'} label={'template'} required={true} storedData={storedData} {...reactForm} /> */}\r\n\r\n        <AceControl name={'query'} label={'Query'} {...reactForm} storedData={storedData} />\r\n        <AceControl name={'template'} label={'Template'} {...reactForm} storedData={storedData} />\r\n        <HiddenItem name={'type'} value={'pdf'} {...reactForm} storedData={storedData} />\r\n        <HiddenItem name={'projectId'} value={projectId} {...reactForm} storedData={storedData} />\r\n\r\n        <hr />\r\n        <h2>Test environment</h2>\r\n        <AceControl name={'testVariables'} label={'Test Variables'} {...reactForm} storedData={storedData} defaultHight={100} />\r\n        {/* <AceControl name={'testTokenQuery'} label={'Obtain Token'} {...reactForm} storedData={storedData} defaultHight={100} /> */}\r\n\r\n        <div className=\".my-documentation\">\r\n          <h3>\r\n            Obtaining user token{' '}\r\n            <small>\r\n              (\r\n              <Link to={`/user/projects/${projectId}/graphiql`} target={'_blank'}>\r\n                Admin Playground\r\n              </Link>\r\n              )\r\n            </small>\r\n          </h3>\r\n          <pre className=\"export-pre\">\r\n            <code>{mutationOptaionToken}</code>\r\n          </pre>\r\n          <Control name={'testToken'} label={'Test Token (not for save)'} storedData={storedData} {...reactForm} />\r\n\r\n          {pdfDownloadState.ok || (pdfDownloadState.error && <PdfDownloadState {...pdfDownloadState} />)}\r\n\r\n          <div className=\"input-group\">\r\n            <input type=\"text\" className=\"form-control\" value={testLink} placeholder=\"Project connect link\" id=\"copy-input\" />\r\n            <div className=\"input-group-append\">\r\n              <Button className=\"btn btn-default\" onClick={onTestDownload} title=\"Copy to clipboard\">\r\n                Test Download\r\n              </Button>\r\n              <Button\r\n                className=\"btn btn-default\"\r\n                onClick={() => {\r\n                  navigator.clipboard.writeText(testLink)\r\n                }}\r\n                title=\"Copy to clipboard\"\r\n              >\r\n                Copy\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n\r\n        <Button type=\"submit\">Save</Button>\r\n      </Form>\r\n\r\n      <form></form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const ExportEdit: (obj: ExportEditType) => any = ({ name, createMutation, updateMutation, oneQuery }) => {\r\n  const params = useParams() as any\r\n\r\n  const id = params.id !== 'create' && params.id\r\n\r\n  return (\r\n    <div className={`base-edit-Invoice base-edit`}>\r\n      <BaseEditor\r\n        externId={id}\r\n        name={name || 'Invoices'}\r\n        query={{\r\n          CREATE_MUTATION: createMutation || CREATE_MUTATION,\r\n          UPDATE_MUTATION: updateMutation || UPDATE_MUTATION,\r\n          QUERY: oneQuery || ONE_QUERY,\r\n        }}\r\n      >\r\n        {(storedData: any, onSubmit: any, errors: any) => <ExportForm storedData={storedData} onSubmit={onSubmit} graphQlError={errors} projectId={params.projectId} />}\r\n      </BaseEditor>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ExportEdit\r\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit'\r\nimport userReducer from './reducers/userSlice'\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    user: userReducer,\r\n  },\r\n})\r\n\r\nexport type AppDispatch = typeof store.dispatch\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppThunk<ReturnType = void> = ThunkAction<ReturnType, RootState, unknown, Action<string>>\r\n","import React, { useEffect, useMemo, useState } from 'react'\r\nimport FilteredList from '../../components/List1/FilteredList'\r\nimport gql from 'graphql-tag'\r\nimport { useHistory, useParams } from 'react-router'\r\nimport { useSelector } from 'react-redux'\r\nimport { selectUser } from '../../app/reducers/userSlice'\r\nimport { Link } from 'react-router-dom'\r\nimport { Button, Tab, Table, Tabs } from 'react-bootstrap'\r\nimport { SelectCallback } from 'react-bootstrap/esm/helpers'\r\nimport axios from 'axios'\r\nimport { map } from 'lodash'\r\n\r\nconst USER_LIST_QUERY = gql`\r\n  query allExport($filter: ExportFilter) {\r\n    allExport(filter: $filter) {\r\n      id\r\n      type\r\n      name\r\n    }\r\n  }\r\n`\r\n\r\nconst ADMIN_LIST_QUERY = gql`\r\n  query allExport($filter: ExportFilter) {\r\n    allExport(filter: $filter) {\r\n      id\r\n      type\r\n      name\r\n    }\r\n  }\r\n`\r\n\r\nconst DELETE_MUTATION = gql`\r\n  mutation deleteExport($id: ID!) {\r\n    deleteExport(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`\r\n\r\nasync function clientGQL(clientUrl: string, query: string, variables: any = {}, headers: any = {}) {\r\n  headers['Content-Type'] = 'application/json'\r\n\r\n  return await axios.post(\r\n    clientUrl,\r\n    {\r\n      query,\r\n      variables,\r\n    },\r\n    {\r\n      headers,\r\n    },\r\n  )\r\n}\r\n\r\nexport const ProjectFilesList: React.FC<{ userId?: string; adminMode?: boolean }> = ({ userId, adminMode = false }) => {\r\n  const [fileList, setFileList] = useState([])\r\n  const user = useSelector(selectUser) || { id: null, token: '' }\r\n  const history = useHistory()\r\n  const params = useParams() as any\r\n  const URL = useMemo(() => `${process.env.REACT_APP_HOST}/client/${user.id}/project/${params?.projectId}`, [user.id, params?.projectId])\r\n\r\n  const loadFilesFromClient = async () => {\r\n    const localFiles = await clientGQL(\r\n      `${URL}/graphql`,\r\n      `\r\n    query{ allFile{id, name, type, size, publicKey, user{id}}\r\n  }`,\r\n      {},\r\n      {\r\n        Authorization: `Bearer ${localStorage.getItem('user.token')}`,\r\n        xuser: user.id,\r\n        xproject: params?.projectId,\r\n      } as any,\r\n    )\r\n\r\n    setFileList(localFiles?.data?.data?.allFile)\r\n  }\r\n\r\n  const onChange = (event: React.FormEvent<HTMLInputElement>) => {\r\n    const files = event.currentTarget?.files || []\r\n    const file = files[0]\r\n\r\n    const data = new FormData()\r\n    data.append('file', file)\r\n    new Promise(async (resolve, reject) => {\r\n      const event = await axios.post(`${URL}/upload`, data, {\r\n        // authorization: Bearer\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`,\r\n          xuser: user.id,\r\n          xproject: params?.projectId,\r\n        },\r\n      })\r\n      console.log(event)\r\n      loadFilesFromClient()\r\n      resolve(event)\r\n      // receive two    parameter endpoint url ,form data\r\n    })\r\n\r\n    // history.push(`/user/projects/${params.projectId}/exports/create`)\r\n  }\r\n\r\n  if (!user) return <></>\r\n\r\n  useEffect(() => {\r\n    if (URL && user.token) loadFilesFromClient()\r\n  }, [URL, user.token])\r\n\r\n  const onTabSelect: SelectCallback = (tabKey) => {\r\n    if (tabKey !== 'exports') {\r\n      history.replace(`/user/projects/${params.projectId}`)\r\n      // history\r\n    }\r\n    if (tabKey === 'exports') {\r\n      history.replace(`/user/projects/${params.projectId}/exports`)\r\n      // history\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"base-edit\">\r\n      <Tabs className=\"base-edit-tabs\" activeKey={'files'} onSelect={onTabSelect}>\r\n        <Tab eventKey={'main'} title={'Main'}></Tab>\r\n        <Tab eventKey={'email'} title={'Emails'}></Tab>\r\n        <Tab eventKey={'login'} title={'Logins'}></Tab>\r\n        <Tab eventKey={'exports'} title={'Exports'}></Tab>\r\n        <Tab eventKey={'files'} title={'Files'}>\r\n          <div className=\"custom-file\">\r\n            <input type=\"file\" className=\"custom-file-input\" id=\"customFile\" onChange={onChange} />\r\n            <label className=\"custom-file-label\">Choose file</label>\r\n            <ListFiles fileList={fileList} />\r\n          </div>\r\n        </Tab>\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction ListFiles({ fileList }: any) {\r\n  return (\r\n    <Table responsive>\r\n      <thead>\r\n        <tr>\r\n          <th>Id</th>\r\n          <th>Name</th>\r\n          <th>Type</th>\r\n          <th>Size</th>\r\n          <th>Public Key</th>\r\n          <th></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {fileList.map((file: any) => (\r\n          <tr>\r\n            <td className=\"id\">{file.id}</td>\r\n            <td>{file.name}</td>\r\n            <td>{file.type}</td>\r\n            <td>{file.size}</td>\r\n            <td>\r\n              {' '}\r\n              <form>\r\n                <div className=\"input-group\">\r\n                  <input type=\"text\" className=\"form-control\" value={file.publicKey} placeholder=\"Project connect link\" id=\"copy-input\" />\r\n                  <div className=\"input-group-append\">\r\n                    <Button\r\n                      className=\"btn btn-default\"\r\n                      onClick={() => {\r\n                        navigator.clipboard.writeText(file.publicKey)\r\n                      }}\r\n                      title=\"Copy to clipboard\"\r\n                    >\r\n                      Copy\r\n                    </Button>\r\n                    <Button\r\n                      className=\"btn btn-default\"\r\n                      onClick={() => {\r\n                        navigator.clipboard.writeText(file.publicKey)\r\n                      }}\r\n                      title=\"Download\"\r\n                    >\r\n                      Download\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </Table>\r\n  )\r\n}\r\n\r\nexport default ProjectFilesList\r\n","import React from 'react'\r\nimport Typed from 'react-typed'\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport ReactMarkdown from 'react-markdown'\r\nimport gfm from 'remark-gfm'\r\n\r\nimport markdown from './markdowns/Login.md'\r\nimport './Documentation.scss'\r\n\r\nexport const DocumentationObtainToken = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"my-documentation\">\r\n        <ReactMarkdown plugins={[gfm]} children={markdown} allowDangerousHtml={true} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DocumentationObtainToken\r\n","\n                export default `\n# Optain Token\r\n\r\n1. [Admin Playground](#entity)\r\n1. [Login existing user](#entity)\r\n1. [Register new user](#model)\r\n1. [Add (admin) role to user](#fields)\r\n1. [Refresh token](#fields)\r\n1. [How to use token](#fields)\r\n\r\n# Admin Playground\r\n\r\nIn project list, is a button Admin Playground from where you can do all operations with admin role. For example list of all users\r\n\r\n### Project with Admin Playground button\r\n\r\n![alt admin playground button](/documentation/admin-playground-button.png)\r\n\r\n### Admin Playground\r\n\r\n![alt admin playground](/documentation/admin-playground.png)\r\n\r\n### All user query\r\n\r\n\\`\\`\\`\r\n{allUser{id, email, roles{id, name}}}\r\n\\`\\`\\`\r\n\r\n\\`\\`\\`\r\n{\r\n  \"data\": {\r\n    \"allUser\": [\r\n      {\r\n        \"id\": \"60d976d791e6c6769608b52f\",\r\n        \"email\": my@account.com\",\r\n        \"roles\": [\r\n          {\r\n            \"id\": \"60d976d791e6c6769608b52d\",\r\n            \"name\": \"admin\"\r\n          }\r\n        ]\r\n      },\r\n    ]\r\n  }\r\n}\r\n\\`\\`\\`\r\n\r\n# Login existing user\r\n\r\nAfter create new project, your email and password is recreated also into your new project.\r\nSo with your creadentials you can login to your project and you can optain a token with admin role.\r\nUnfortunately that is not possible if you are login to graphql.monster with 3party github, facebook,\r\n\r\n### admin playground\r\n\r\n\\`\\`\\`\r\nmutation {login_v1(email:\"my@account.com\", password:\"*****\"){token, refreshToken, user{id, roles{id, name}}}}\r\n\\`\\`\\`\r\n\r\n### curl\r\n\r\n\\`\\`\\`\r\ncurl -XPOST -H \"Content-type: application/json\" -d '{\"operationName\":null,\"variables\":{},\"query\":\"mutation {\\n  login_v1(email: \\\"new@user.com\\\", password: \\\"wery-heavy-password-341!\\\") {\\n    token\\n    refreshToken\\n    user {\\n      id\\n      roles {\\n        id\\n        name\\n      }\\n    }\\n  }\\n}\\n\"}' 'https://graphql.monster/client/<replace-with-your-userid>/project/<replace-with-your-projectid>/graphql'\r\n\\`\\`\\`\r\n\r\n### example response\r\n\r\n\\`\\`\\`\r\n// example of response\r\n  \"data\": {\r\n    \"login_v1\": {\r\n      \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTM1Y2U5OWZiNDAxMjJkYjY1OWRkZSIsInJvbGVzIjpbIjYwZDk3NmQ3OTFlNmM2NzY5NjA4YjUyZCJdLCJpYXQiOjE2MjU1MTM0NjEsImV4cCI6MTYyNTUxNzA2MX0.K0p4WY2lcqf8lrUPJda_JAQLmU1IFxZpbjY8OpqAHcA\",\r\n      \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTM1Y2U5OWZiNDAxMjJkYjY1OWRkZSIsImlhdCI6MTYyNTUxMzQ2MSwiZXhwIjoxNjU3MDQ5NDYxfQ.X6dN0S_-dROBUTguLhx-xMjIQimdrZXfYjQQF11EohI\",\r\n      \"user\": {\r\n        \"id\": \"60d976d791e6c6769608b52f\",\r\n        \"roles\": [\r\n          {\r\n            \"id\": \"60d976d791e6c6769608b52d\",\r\n            \"name\": \"admin\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n\\`\\`\\`\r\n\r\n# Register new user\r\n\r\n### admin playground\r\n\r\n\\`\\`\\`\r\nmutation {register_v1(email:\"new@user.com\", password:\"*****\"){token, refreshToken,user{id,email,roles{id,name}}}}\r\n\\`\\`\\`\r\n\r\n### curl\r\n\r\n\\`\\`\\`\r\ncurl -XPOST -H \"Content-type: application/json\" -d '{\"operationName\":null,\"variables\":{},\"query\":\"mutation {\\n  register_v1(email: \\\"new@user.com\\\", password: \\\"wery-heavy-password-341!\\\") {\\n    token\\n    refreshToken\\n    user {\\n      id\\n      roles {\\n        id\\n        name\\n      }\\n    }\\n  }\\n}\\n\"}' 'https://graphql.monster/client/<replace-with-your-userid>/project/<replace-with-your-projectid>/graphql'\r\n\\`\\`\\`\r\n\r\n### example response\r\n\r\n\\`\\`\\`\r\n{\r\n  \"data\": {\r\n    \"register_v1\": {\r\n      \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTM1Y2U5OWZiNDAxMjJkYjY1OWRkZSIsInJvbGVzIjpbXSwiaWF0IjoxNjI1NTEzMTkzLCJleHAiOjE2MjU1MTY3OTN9.2mLjKOyvUiFc-TyNFVeeV2ilcFTjaCb2KxM5x7el_SY\",\r\n      \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTM1Y2U5OWZiNDAxMjJkYjY1OWRkZSIsImlhdCI6MTYyNTUxMzE5MywiZXhwIjoxNjU3MDQ5MTkzfQ.IQnYUq7-Ww1SOlmJk6tkvy_n6ex6-2ZHs6sFZNi538g\",\r\n      \"user\": {\r\n        \"id\": \"60e35ce99fb40122db659dde\",\r\n        \"email\": \"new@user.com\",\r\n        \"roles\": []\r\n      }\r\n    }\r\n  }\r\n}\r\n\\`\\`\\`\r\n\r\nnow you can try even login with this new user, the result will be very similar\r\n\r\n\\`\\`\\`\r\nmutation {login_v1(email:\"new@user.com\", password:\"*****\"){token, refreshToken,user{id,email,roles{id,name}}}}\r\n\\`\\`\\`\r\n\r\n# Add (admin) role to user\r\n\r\nyou can add Admin role to any user\r\n\r\n\\`\\`\\`\r\nmutation{addRoleToUser(userId:\"60e35ce99fb40122db659dde\", userRoleId:\"60d976d791e6c6769608b52d\"){\r\n  user{id, email, roles{id, name}}\r\n  userRole{name}\r\n}}\r\n\\`\\`\\`\r\n\r\n# Remove (admin) role from user\r\n\r\nthere is a limitation, you can't remove admin from yourself.\r\n\r\n\\`\\`\\`\r\nmutation{removeRoleFromUser(userId:\"60e35ce99fb40122db659dde\", userRoleId:\"60d976d791e6c6769608b52d\"){\r\n  user{id, email, roles{id, name}}\r\n  userRole{name}\r\n}}\r\n\\`\\`\\`\r\n\r\n# How to use token\r\n\r\ntoken should be part of \\`Authorization\\` header together with \\`Bearer\\` keyword\r\n\r\n\\`\\`\\`\r\ncurl -XPOST -H 'Authorization: Bearer eyJhbGciOiJIUzI1iNIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwMjY1YTJjYjY0OTllNmJlNjliMTNiNiIsInJvbGVzIjpbXSwiaWF0IjoxNjI1NTEyNDQyLCJleHAiOjE2MjU1MTYwNDJ9.UlLKJKyZw-WykECixHqV_ZtURgLVDBwwFB62-HmbeKE' -H \"Content-type: application/json\" -d '{\"operationName\":null,\"variables\":{},\"query\":\"{\\n  allUser {\\n    id\\n    email\\n    roles {\\n      id\\n      name\\n    }\\n  }\\n  allUserRole {\\n    id\\n    name\\n  }\\n}\\n\"}' 'https://graphql.monster/client/<your-userid>/project/<your-projectid>/graphql'\r\n\\`\\`\\`\r\n\r\n# Refresh token\r\n\r\nToken is limited for one hour, but you can optain new token with \\`refreshToken\\` key together with new \\`refreshToken\\`\r\n\r\n### admin playground\r\n\r\n\\`\\`\\`\r\nmutation{\r\n    refreshToken_v1(\r\n        token:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTM1Y2U5OWZiNDAxMjJkYjY1OWRkZSIsInJvbGVzIjpbIjYwZDk3NmQ3OTFlNmM2NzY5NjA4YjUyZCJdLCJpYXQiOjE2MjU1MTUwNzMsImV4cCI6MTYyNTUxODY3M30.uUkDwFknQd0GzLDW0V12ZBGhAXozmNZlGm06EQGm-SM\",\r\n        refreshToken:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTM1Y2U5OWZiNDAxMjJkYjY1OWRkZSIsImlhdCI6MTYyNTUxNTA3MywiZXhwIjoxNjU3MDUxMDczfQ._6_5gdQ4sxDXhsabQuHSbqISMHbaI629bSYpX5w_1mY\",\r\n        userId:\"60e35ce99fb40122db659dde\"){\r\n            token,\r\n            refreshToken\r\n            }\r\n        }\r\n\\`\\`\\`\r\n\r\n### curl\r\n\r\n\\`\\`\\`\r\ncurl -XPOST -H 'Authorization: Bearer eyJhbGciOiJIUzI1iNIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwMjY1YTJjYjY0OTllNmJlNjliMTNiNiIsInJvbGVzIjpbXSwiaWF0IjoxNjI1NTEyNDQyLCJleHAiOjE2MjU1MTYwNDJ9.UlLKJKyZw-WykECixHqV_ZtURgLVDBwwFB62-HmbeKE' -H \"Content-type: application/json\" -d 'mutation{\r\n    refreshToken_v1(\r\n        token:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTM1Y2U5OWZiNDAxMjJkYjY1OWRkZSIsInJvbGVzIjpbIjYwZDk3NmQ3OTFlNmM2NzY5NjA4YjUyZCJdLCJpYXQiOjE2MjU1MTUwNzMsImV4cCI6MTYyNTUxODY3M30.uUkDwFknQd0GzLDW0V12ZBGhAXozmNZlGm06EQGm-SM\",\r\n        refreshToken:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTM1Y2U5OWZiNDAxMjJkYjY1OWRkZSIsImlhdCI6MTYyNTUxNTA3MywiZXhwIjoxNjU3MDUxMDczfQ._6_5gdQ4sxDXhsabQuHSbqISMHbaI629bSYpX5w_1mY\",\r\n        userId:\"60e35ce99fb40122db659dde\"){\r\n            token,\r\n            refreshToken\r\n            }\r\n        }' 'https://graphql.monster/client/<your-userid>/project/<your-projectid>/graphql'\r\n\\`\\`\\`\r\n\r\n### example result\r\n\r\n\\`\\`\\`\r\n{\r\n  \"data\": {\r\n    \"refreshToken_v1\": {\r\n      \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTM1Y2U5OWZiNDAxMjJkYjY1OWRkZSIsInJvbGVzIjpbXSwiaWF0IjoxNjI1NTE1OTkzLCJleHAiOjE2MjU1MTk1OTN9.E3K1tiUPgtt5irHCV-HrBJbwzWQdyKkwd_uzCT2jaXs\",\r\n      \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTM1Y2U5OWZiNDAxMjJkYjY1OWRkZSIsImlhdCI6MTYyNTUxNTk5MywiZXhwIjoxNjU3MDUxOTkzfQ.w1wMzkoVfgyY_gPWL0LfTk1mFbX0wguK2etT8_D3GfI\"\r\n    }\r\n  }\r\n}\r\n\\`\\`\\`\r\n\n            `","import React from 'react'\r\nimport Typed from 'react-typed'\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport ReactMarkdown from 'react-markdown'\r\nimport gfm from 'remark-gfm'\r\n\r\nimport markdown from './markdowns/CreateWebTSApp.md'\r\nimport './Documentation.scss'\r\n\r\nexport const DocumentationCreateTodoApp = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"my-documentation\">\r\n        <ReactMarkdown plugins={[gfm]} children={markdown} allowDangerousHtml={true} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DocumentationCreateTodoApp\r\n","\n                export default `\n# Create React Todo with GraphQL\r\n\r\n## 1. Create new project on GraphQL Monster\r\n\r\n![alt admin playground](/documentation/create-project.png)\r\n\r\n1. Open project page on https://graphql.monster/projects\r\n1. Press create new project\r\n\r\n![alt admin playground](/documentation/create-project-schema.png)\r\n\r\n1. Select main tab\r\n1. Type name of your new project\r\n1. add schema with your model\r\n\r\n\\`\\`\\`\r\n@create(\"user\")\r\n@update(\"user\")\r\n@remove(\"user\")\r\n@all(\"user\")\r\ntype Todo @model {\r\n   title: String!\r\n   completed: Boolean\r\n}\r\n\\`\\`\\`\r\n\r\nThis schema says creat \\`Todo\\` model with fields \\`title\\` and \\`completed\\`. Where title is a text and completed have a boolean value. We also specify \\`create\\`, \\`update\\`, \\`remove\\` and query \\`all\\` can be done with any logged user. For more info about schema visit the documentation with [schema description](https://www.graphql.monster/documentation/schema-description).\r\n\r\n## 2. Create app from template\r\n\r\nuse \\`react-create-app\\` and choice a existing template and create predefined app\r\n\r\n\\`\\`\\`\r\nnpx create-react-app my-web-ts-app --template cra-template-graphql-monster-typescript\r\n\r\n\\`\\`\\`\r\n\r\nAfter all done move into created directory created directory\r\n\r\n\\`\\`\\`\r\ncd my-web-ts-app\r\n\\`\\`\\`\r\n\r\n## 3. Connect your web app with graphql.monster\r\n\r\n![alt project list](/documentation/project-list.png)\r\n\r\n1. Open your project page on https://graphql.monster/projects\r\n2. Copy your project link to clipboard\r\n3. Paste to \\`.env\\` file in root of your react application directory as \\`REACT_APP_HOST\\`\r\n\r\n![alt env file](/documentation/env.png)\r\n\r\n## 4. Run the application\r\n\r\nAnd now you can start the application with command \\`start\\`\r\n\r\n\\`\\`\\`\r\n\r\nnpm start\r\n# or\r\nyarn start\r\n\\`\\`\\`\r\n\r\nAfter the aplication fully start you should reach url http://localhost:3000/ where you can see actual state of your new created app\r\n\r\n## 5. Login and register\r\n\r\nIn connected App already working [login](http://localhost:3000/login) (you can use your graphql.monster account credentials to login as admin) or [register](http://localhost:3000/register) new regular user.\r\n\r\n![alt register page](/documentation/register-before.png)\r\n\r\nAfter register you can see some network trafic with obtained \\`token\\` and user info like \\`id\\` and \\`role\\`. As you can see on \\`Header\\` whole state of application is changed and user is stored in redux store.\r\n![alt user dashboard page with network](/documentation/register-after.png)\r\n\r\n## 6. Create new (Todo) component\r\n\r\n### Create component with style\r\n\r\nIn \\`src/pages/user/\\` create directory Toto with these two files \\`Todo.tsx\\` and \\`Todo.css\\`\r\n\r\n\\`\\`\\`\r\n// Todo.tsx\r\nimport React from 'react'\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport { Button } from 'react-bootstrap';\r\nimport DeleteModal from '../../../components/DeleteModal/DeleteModal';\r\nimport './Todo.css'\r\n\r\nexport function Todo() {\r\n    const [tasksRemaining, setTasksRemaining] = useState(0);\r\n    const [tasks, setTasks] = useState([\r\n        {\r\n            title: \"Grab some Pizza\",\r\n            completed: true\r\n        },\r\n        {\r\n            title: \"Do your workout\",\r\n            completed: true\r\n        },\r\n        {\r\n            title: \"Hangout with friends\",\r\n            completed: false\r\n        }\r\n    ]);\r\n    const [itemForRemove, setItemForRemove] = useState<any | null>(null)\r\n\r\n    useEffect(() => {\r\n        setTasksRemaining(tasks.filter(task => !task.completed).length)\r\n    }, [tasks]);\r\n\r\n    const addTask = (title: string) => {\r\n        const newTasks = [...tasks, { title, completed: false }];\r\n        setTasks(newTasks);\r\n    };\r\n\r\n    const completeTask = (index: number) => {\r\n        const newTasks = [...tasks];\r\n        newTasks[index].completed = true;\r\n        setTasks(newTasks);\r\n    };\r\n\r\n    const removeTask = useCallback((index: number) => {\r\n        setItemForRemove({ name: tasks[index].title, index })\r\n    }, [tasks]);\r\n\r\n    const doRemoveTask = useCallback(() => {\r\n        if (itemForRemove != null) {\r\n            const newTasks = [...tasks];\r\n            newTasks.splice(itemForRemove.index, 1);\r\n            setTasks(newTasks);\r\n            setItemForRemove(null)\r\n        }\r\n    }, [tasks, itemForRemove]);\r\n\r\n    return (\r\n        <div className=\"todo-container\">\r\n            <h1>Tasks</h1>\r\n            <div className=\"tasks\">\r\n                {tasks.map((task, index) => (\r\n                    <Task\r\n                        task={task}\r\n                        index={index}\r\n                        completeTask={completeTask}\r\n                        removeTask={removeTask}\r\n                        key={index}\r\n                    />\r\n                ))}\r\n            </div>\r\n            <div className=\"create-task\" >\r\n                <CreateTask addTask={addTask} />\r\n                <div className=\"header\">Pending tasks ({tasksRemaining})</div>\r\n            </div>\r\n\r\n            <DeleteModal\r\n                show={!!itemForRemove}\r\n                deleteObject={itemForRemove}\r\n                modelName={'Todo'}\r\n                onHide={() => setItemForRemove(null)}\r\n                onDelete={doRemoveTask} />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction CreateTask({ addTask }: any) {\r\n    const [value, setValue] = useState(\"\");\r\n\r\n    const handleSubmit = (e: any) => {\r\n        e.preventDefault();\r\n        if (!value) return;\r\n\r\n        addTask(value);\r\n        setValue(\"\");\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <input\r\n                type=\"text\"\r\n                className=\"input\"\r\n                value={value}\r\n                placeholder=\"Add a new task\"\r\n                onChange={e => setValue(e.target.value)}\r\n            />\r\n        </form>\r\n    );\r\n}\r\n\r\nfunction Task({ task, index, completeTask, removeTask }: any) {\r\n    return (\r\n        <div\r\n            className=\"task\"\r\n            style={{ textDecoration: task.completed ? \"line-through\" : \"\" }}\r\n        >\r\n            <div><Button variant={'danger'} size={'sm'} onClick={() => removeTask(index)}>x</Button></div>\r\n            <div className='title'>{task.title}</div>\r\n            <div className='right'>\r\n                <Button onClick={() => completeTask(index)}>Complete</Button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\\`\\`\\`\r\n\r\n\\`\\`\\`\r\n/* Todo.css */\r\n\r\n.todo-container {\r\n    width: 50vw;\r\n    margin: 10em auto;\r\n    border-radius: 15px;\r\n    padding: 20px 10px;\r\n}\r\n\r\n.task {\r\n    border: 1px solid white;\r\n    border-radius: 5px;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between\r\n}\r\n\r\n.title {\r\n    margin-left: 5px;\r\n    flex-grow: 1;\r\n    font-size: 1.6em;\r\n}\r\n\r\n.create-task {\r\n    margin: 2em 3em;\r\n}\r\n.create-task input[type=text] {\r\n    width: 80%;\r\n    padding: 0.7em;\r\n}\r\n\r\n.create-task div {\r\n    color: gray;\r\n}\r\n\r\nh1 {\r\n    margin: 1em 0em;\r\n}\r\n\\`\\`\\`\r\n\r\n![alt VSC with todo.tsx and todo.css](/documentation/vsc-todo-tsx-todo-css.png)\r\n\r\n### Register Todo component in App router (optional)\r\n\r\nIn \\`src/App.tsx\\` add row with \\`<ProtectedRoute path=\"/todo\"><Todo /></ProtectedRoute>\\` right bellow \\`<Switch>\\` (or somewhere before switch closing tab). Also don't forget to import our Todo component \\`import { Todo } from \"./pages/user/Todo/Todo\";\\`.\r\n\r\n![alt VSC with todo.tsx and todo.css](/documentation/vsc-app-tsx-todo-route.png)\r\n\r\nNow if you will try access to http://localhost:3000/todo and see this page:\r\n\r\n![alt todo](/documentation/todo-page.png)\r\n\r\nBut this page is now protected, that mean if you will logged out, you can't reach it. In case you want to create a public component instead of use \\`<ProtectRoute>\\` use just \\`<Route>\\` in this case it will be \\`<Route path=\"/todo\"><Todo /></Route>\\`\r\n\r\n### Add link for our Todo component (optional)\r\n\r\nOpen \\`src/pages/user/UserDashboard.tsx\\` and add behind H2 tag a link to our Todo component \\`<Link to={'/todo'}>Todo</Link>\\` with import \\`import { Link } from 'react-router-dom';\\` somewhere on top. The result should look similar to this\r\n\r\n![alt scr/pages/userUserDashboard.tsx](/documentation/vsc-user-dashobar-tsx.png)\r\n\r\nAnd now after your user will login or register and register to user dashboard he shoudl see link to Todo. This todo link is active and take us to our component Todo\r\n![alt User Dashboard Page with Todo link](/documentation/browser-user-dashobard.png)\r\n\r\n(Keep in mind, for full working the \\`/todo\\` have to be a registred in \\`App.tsx\\` router, look on previous optional step)\r\n\r\n# Connect to GraphQL\r\n\r\n## Load tasks from server with GraphQL query\r\n\r\nIn \\`scr/pages/user/Todo.tsx\\` right before Todo start component itself, add const for \\`ALL_TODO_QUERY\\` with following content\r\n\r\n\\`\\`\\`\r\nconst ALL_TODO_QUERY = gql\\`{\r\n    allTodo {\r\n        id,\r\n        title,\r\n        completed\r\n    }\r\n  }\\`\r\n\\`\\`\\`\r\n\r\nInside Todo component add \\`useQuery\\` hook, with handle \\`onCompleted\\` to capture loaded data and set to our component state with \\`setTasks\\`\r\n\r\n\\`\\`\\`\r\n    const { loading } = useQuery(ALL_TODO_QUERY, {\r\n        onCompleted: (data) => {\r\n            setTasks(data?.allTodo?.map((d: any) => ({ ...d })) || [])\r\n        }\r\n    })\r\n\\`\\`\\`\r\n\r\nNote: we have use \\`Array.map\\` because the data from \\`useQuery\\` are in readonly (immutable) state and our \\`completeTask\\` method (on line 54) change \\`completed\\` field on it and that will invoke a exception. In case we will never modified the incoming data \\`setTasks(data?.allTodo || [])\\` will be enough.\r\n\r\nAlso you can remove the initial array for \\`useState\\` with \\`tasks\\` and \\`setTasks\\`, so updated \\`Todo.tsx\\` should look like\r\n![alt all task](/documentation/vsc-query-all-task.png)\r\n\r\nnow in our page all contents dissapear and you should see just the input box\r\n\r\n## Add loading info (optional)\r\n\r\nAfter all hooks and before \\`return\\` we can add info about data are loading\r\n\r\n\\`\\`\\`\r\nif (loading) return <Loading />\r\n\\`\\`\\`\r\n\r\n## Add task into server with GraphQL mutation\r\n\r\nAgain in \\`scr/pages/user/Todo.tsx\\` right before start Todo component itself, add const for \\`CREATE_MUTATION\\` with following content\r\n\r\n\\`\\`\\`\r\nconst CREATE_MUTATION = gql\\`\r\n    mutation CreateTodo($title: String!, $completed:Boolean) {\r\n    createTodo(title: $title, completed: $completed) {\r\n        id\r\n        title,\r\n        completed\r\n    }\r\n}\\`\r\n\\`\\`\\`\r\n\r\nInside Todo component add \\`useMutation\\` hook with \\`createTodo\\` method\r\n\r\n\\`\\`\\`\r\n   const [createTodo, { error: createError }] = useMutation(CREATE_MUTATION)\r\n\\`\\`\\`\r\n\r\nand modify our \\`addTask\\` method:\r\n\r\n1. mark the method as asynchronous with keyword \\`async\\`\r\n2. wait for call \\`createTodo\\` mutation with variables of our new task \\`title\\` and \\`completed: false\\`\r\n3. create new array with old and new\r\n\r\nNOTE: we waiting for response of \\`createTodo\\` because we want to know \\`id\\` of new created Todo. The \\`id\\` we will need for updating and removing\r\n\r\n\\`\\`\\`\r\n    const addTask = async (title: string) => {\r\n        const createdData = await createTodo({ variables: { title, completed: false } }) as any\r\n        const newTasks = [...tasks, createdData.data.createTodo];\r\n        setTasks(newTasks)\r\n    };\r\n\\`\\`\\`\r\n\r\nThe code should look like:\r\n![alt create mutation for task](/documentation/vsc-create-mutation.png)\r\n\r\nNow if you add some Todos, you should see them even after refresh page.\r\n\r\n## Update task in server with GraphQL mutation\r\n\r\nContinue in \\`scr/pages/user/Todo.tsx\\` right before start Todo component itself , add const for \\`UPDATE_MUTATION\\` with following content\r\n\r\n\\`\\`\\`\r\nconst UPDATE_MUTATION = gql\\`\r\n    mutation UpdateTodo($id: ID!, $completed: Boolean) {\r\n    updateTodo(id: $id, completed: $completed) {\r\n        id\r\n        title,\r\n        completed\r\n    }\r\n}\\`\r\n\\`\\`\\`\r\n\r\nInside Todo component add \\`useMutation\\` hook with \\`updateTodo\\` method\r\n\r\n\\`\\`\\`\r\n   const [updateTodo, { error: updateError }] = useMutation(UPDATE_MUTATION)\r\n\\`\\`\\`\r\n\r\nOn start (or end) of our method \\`completeTask\\` add call \\`updateTodo\\`\r\n\r\n\\`\\`\\`\r\n   updateTodo({ variables: { id: tasks[index].id, completed: true } })\r\n\\`\\`\\`\r\n\r\nNow you should be able to see \\`marked\\` completed tasks even after refresh page. The code should look like\r\n![alt update mutation for task](/documentation/vsc-update-mutation.png)\r\n\r\n## Remove task from server with GraphQL mutation\r\n\r\nContinue in \\`scr/pages/user/Todo.tsx\\` right before start Todo component itself , add const for \\`REMOVE_MUTATION\\` with following content\r\n\r\n\\`\\`\\`\r\nconst REMOVE_MUTATION = gql\\`\r\n    mutation RemoveTodo($id: ID!) {\r\n    removeTodo(id: $id) {\r\n        id\r\n    }\r\n}\\`\r\n\\`\\`\\`\r\n\r\nInside Todo component add \\`useMutation\\` hook with \\`removeTodo\\` method\r\n\r\n\\`\\`\\`\r\n   const [removeTodo, { error: removeError }] = useMutation(REMOVE_MUTATION)\r\n\\`\\`\\`\r\n\r\nOn start (or end) of our method \\`doRemoveTask\\` add call \\`removeTodo\\`\r\n\r\n\\`\\`\\`\r\n   removeTodo({ variables: { id: tasks[itemForRemove.index].id } })\r\n\\`\\`\\`\r\n\r\nwe can also update \\`removeTask\\` method with \\`id\\`\r\n\r\n\\`\\`\\`\r\n   setItemForRemove({ id:  name: tasks[index].id, name: tasks[index].title, index })\r\n\\`\\`\\`\r\n\r\nNow you should not see remove tasks even after refresh page. The code should look like\r\n![alt update mutation for task](/documentation/vsc-update-mutation.png)\r\n\r\n## Get logged User and load only user Todos (optional)\r\n\r\nWe can load only Todo what was created by current (logged) User\r\n\r\n### Update imports and selectUser from redux store\r\n\r\nOn top of our file:\r\n\r\n\\`\\`\\`\r\nimport { useSelector } from 'react-redux';\r\nimport { selectUser } from '../../../app/reducers/userSlice';\r\n\\`\\`\\`\r\n\r\nIn top of Todo compomnent:\r\n\r\n\\`\\`\\`\r\n  const user = useSelector(selectUser) || { id: null }\r\n\\`\\`\\`\r\n\r\n### Update ALL_TODO_QUERY\r\n\r\nWe need update all todo query to accept filter with user id\r\n\r\n\\`\\`\\`\r\nconst ALL_TODO_QUERY = gql\\`\r\nquery allTodo($filter: TodoFilter) {\r\n    allTodo(filter: $filter) {\r\n      id\r\n      title,\r\n      completed\r\n    }\r\n  }\\`\r\n\\`\\`\\`\r\n\r\n### Pass user to filter\r\n\r\nThe main part is pass \\`variables\\`, with \\`filter\\` and \\`user.id\\` for \\`user_every\\`, but note also the \\`skip\\` part what we say if \\`user.id\\` is not have a value don't load anything!\r\n\r\n\\`\\`\\`\r\n   const { data, loading } = useQuery(ALL_TODO_QUERY, {\r\n      onCompleted: (data) => {\r\n         setTasks(data?.allTodo?.map((d: any) => ({ ...d })) || [])\r\n      },\r\n      skip: !user.id,\r\n      variables: {\r\n         filter: {\r\n               user_every: { id: user.id },\r\n         },\r\n      }\r\n   })\r\n\\`\\`\\`\r\n\r\nNow if you will register/create new user and you will switching between these accounts, you should not see Todos of one user in another one.\r\n\r\n### Update schema to add protection also on server side\r\n\r\nNow the filter select the right todos for right user, but if the user will try the GraphQL interface he can skip this condition and see all of Todos accross the users. To add protection also on server side we can say allTodos can be query just with particular filter.\r\n\r\nThere is kind of special protection tag \\`{{userId}}\\` what we saying userId is same as userId in present token.\r\n\r\n\\`\\`\\`\r\n@all(filter:\"user_every.id={{userId}}\")\r\n\\`\\`\\`\r\n\r\nToken is included authomaticaly (if any user is logged) in each graphql call, particulary in \\`Authorizaiton\\` header with tag \\`Bearer\\`\r\n\r\nWe can also protect another calls like update and delete to say only owner can update or delete specified \\`Todo\\` so whole graphql.monster schema will looks like:\r\n\r\n\\`\\`\\`\r\n@create(\"user\")\r\n@update(\"owner\")\r\n@remove(\"owner\")\r\n@all(filter:\"user_every.id={{userId}}\")\r\ntype Todo @model {\r\n   title: String!\r\n   completed: Boolean\r\n}\r\n\\`\\`\\`\r\n\r\n# Final Todo.tsx\r\n\r\n\\`\\`\\`\r\n// Todo.tsx\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport { gql } from 'graphql.macro';\r\nimport React from 'react'\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport { Button } from 'react-bootstrap';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectUser } from '../../../app/reducers/userSlice';\r\nimport DeleteModal from '../../../components/DeleteModal/DeleteModal';\r\nimport Loading from '../../../components/Loading/Loading';\r\nimport './Todo.css'\r\n\r\nconst ALL_TODO_QUERY = gql\\`\r\nquery allTodo($filter: TodoFilter) {\r\n    allTodo(filter: $filter) {\r\n      id\r\n      title,\r\n      completed\r\n    }\r\n  }\\`\r\n\r\nconst CREATE_MUTATION = gql\\`\r\n    mutation CreateTodo($title: String!, $completed:Boolean) {\r\n    createTodo(title: $title, completed: $completed) {\r\n        id\r\n        title,\r\n        completed\r\n    }\r\n}\\`\r\n\r\nconst UPDATE_MUTATION = gql\\`\r\n    mutation UpdateTodo($id: ID!, $completed: Boolean) {\r\n    updateTodo(id: $id, completed: $completed) {\r\n        id\r\n        title,\r\n        completed\r\n    }\r\n}\\`\r\n\r\nconst REMOVE_MUTATION = gql\\`\r\n    mutation RemoveTodo($id: ID!) {\r\n    removeTodo(id: $id) {\r\n        id\r\n    }\r\n}\\`\r\n\r\nexport function Todo() {\r\n    const user = useSelector(selectUser) || { id: null }\r\n    const [tasksRemaining, setTasksRemaining] = useState(0);\r\n    const [tasks, setTasks] = useState([] as any[]);\r\n    const [itemForRemove, setItemForRemove] = useState<any | null>(null)\r\n\r\n    const { data, loading } = useQuery(ALL_TODO_QUERY, {\r\n        onCompleted: (data) => {\r\n            setTasks(data?.allTodo?.map((d: any) => ({ ...d })) || [])\r\n        },\r\n        skip: !user.id,\r\n        variables: {\r\n            filter: {\r\n                user_every: { id: user.id },\r\n            },\r\n        }\r\n    })\r\n\r\n    const [createTodo, { error: createError }] = useMutation(CREATE_MUTATION)\r\n    const [updateTodo, { error: updateError }] = useMutation(UPDATE_MUTATION)\r\n    const [removeTodo, { error: removeError }] = useMutation(REMOVE_MUTATION)\r\n\r\n    useEffect(() => {\r\n        setTasksRemaining(tasks.filter(task => !task.completed).length)\r\n    }, [tasks]);\r\n\r\n    const addTask = async (title: string) => {\r\n        const createdData = await createTodo({ variables: { title, completed: false } }) as any\r\n        const newTasks = [...tasks, createdData.data.createTodo];\r\n        setTasks(newTasks)\r\n    };\r\n\r\n    const completeTask = (index: number) => {\r\n        updateTodo({ variables: { id: tasks[index].id, completed: true } })\r\n        const newTasks = [...tasks];\r\n        newTasks[index].completed = true;\r\n        setTasks(newTasks);\r\n    };\r\n\r\n    const removeTask = useCallback((index: number) => {\r\n        setItemForRemove({ id: tasks[index].id, name: tasks[index].title, index })\r\n    }, [tasks]);\r\n\r\n    const doRemoveTask = useCallback(() => {\r\n        if (itemForRemove != null) {\r\n            const newTasks = [...tasks];\r\n            newTasks.splice(itemForRemove.index, 1);\r\n            setTasks(newTasks);\r\n            setItemForRemove(null)\r\n            removeTodo({ variables: { id: tasks[itemForRemove.index].id } })\r\n        }\r\n    }, [tasks, itemForRemove]);\r\n\r\n    if (loading) return <Loading />\r\n\r\n    return (\r\n        <div className=\"todo-container\">\r\n            <h1>Tasks</h1>\r\n            <div className=\"tasks\">\r\n                {tasks.map((task, index) => (\r\n                    <Task\r\n                        task={task}\r\n                        index={index}\r\n                        completeTask={completeTask}\r\n                        removeTask={removeTask}\r\n                        key={index}\r\n                    />\r\n                ))}\r\n            </div>\r\n            <div className=\"create-task\" >\r\n                <CreateTask addTask={addTask} />\r\n                <div className=\"header\">Pending tasks ({tasksRemaining})</div>\r\n            </div>\r\n\r\n            <DeleteModal\r\n                show={!!itemForRemove}\r\n                deleteObject={itemForRemove}\r\n                modelName={'Todo'}\r\n                onHide={() => setItemForRemove(null)}\r\n                onDelete={doRemoveTask} />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction CreateTask({ addTask }: any) {\r\n    const [value, setValue] = useState(\"\");\r\n\r\n    const handleSubmit = (e: any) => {\r\n        e.preventDefault();\r\n        if (!value) return;\r\n\r\n        addTask(value);\r\n        setValue(\"\");\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <input\r\n                type=\"text\"\r\n                className=\"input\"\r\n                value={value}\r\n                placeholder=\"Add a new task\"\r\n                onChange={e => setValue(e.target.value)}\r\n            />\r\n        </form>\r\n    );\r\n}\r\n\r\nfunction Task({ task, index, completeTask, removeTask }: any) {\r\n    return (\r\n        <div\r\n            className=\"task\"\r\n            style={{ textDecoration: task.completed ? \"line-through\" : \"\" }}\r\n        >\r\n            <div><Button variant={'danger'} size={'sm'} onClick={() => removeTask(index)}>x</Button></div>\r\n            <div className='title'>{task.title}</div>\r\n            <div className='right'>\r\n                <Button onClick={() => completeTask(index)}>Complete</Button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\\`\\`\\`\r\n\n            `","import React, { useEffect } from 'react'\r\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom'\r\nimport { ApolloProvider } from '@apollo/client'\r\n\r\nimport { ProjectEdit } from './pages/Projects/Edit'\r\nimport ProjectList, { ProjectAdminList } from './pages/Projects/List'\r\nimport ExportList from './pages/Exports1/List'\r\nimport UserList from './pages/Users1/List1'\r\nimport { Header } from './components/Header1/Header1'\r\n\r\nimport apolloClient from './app/apolloClient'\r\nimport UserRoleList from './pages/UserRoles/List'\r\nimport UserRoleEdit from './pages/UserRoles/Edit'\r\nimport GQLPlayground from './pages/Projects/GQLPlayground'\r\nimport Home from './pages/home/home'\r\nimport { Register } from './pages/login/Register'\r\nimport Login from './pages/login/Login'\r\nimport { PricingPage } from './pages/pricing/pricing'\r\nimport SubscribePage from './pages/pricing/subsribe'\r\nimport DocumentationSchemaDescription from './pages/Documentation1/SchemaDescription'\r\nimport SubscibesListPage from './pages/pricing/subsribe-list'\r\nimport VerifyUser from './pages/login/VerifyUser'\r\nimport UserInfo from './pages/login/UserInfo'\r\nimport ForgottenPassword from './pages/login/ForgottenPassword'\r\nimport ForgottenPasswordReset from './pages/login/ForgottenPasswordReset'\r\nimport { PassportCallback } from './pages/login/PassportCallback'\r\nimport ExportEdit from './pages/Exports1/Edit'\r\nimport { Provider } from 'react-redux'\r\nimport { store } from './app/store'\r\n\r\nimport './App.css'\r\nimport ProjectFilesList from './pages/Files/List'\r\nimport DocumentationObtainToken from './pages/Documentation1/ObtainToken'\r\nimport DocumentationCreateTodoApp from './pages/Documentation1/CreateTodoApp'\r\n\r\n// This site has 3 pages, all of which are rendered\r\n// dynamically in the browser (not server rendered).\r\n//\r\n// Although the page does not ever refresh, notice how\r\n// React Router keeps the URL up to date as you navigate\r\n// through the site. This preserves the browser history,\r\n// making sure things like the back button and bookmarks\r\n// work properly.\r\n\r\nexport default function App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <ApolloProvider client={apolloClient}>\r\n        <Router>\r\n          <div>\r\n            <Header />\r\n            {/*\r\n              A <Switch> looks through all its children <Route>\r\n              elements and renders the first one whose path\r\n              matches the current URL. Use a <Switch> any time\r\n              you have multiple routes, but you want only one\r\n              of them to render at a time\r\n            */}\r\n            <Switch>\r\n              <Route exact path=\"/\">\r\n                <Home />\r\n              </Route>\r\n              <Route exact path=\"/login\">\r\n                <Login />\r\n              </Route>\r\n              <Route path=\"/login/facebook\">\r\n                <PassportCallback type={'facebook'} />\r\n              </Route>\r\n              <Route path=\"/login/github\">\r\n                <PassportCallback type={'github'} />\r\n              </Route>\r\n              <Route path=\"/login/google\">\r\n                <PassportCallback type={'google'} />\r\n              </Route>\r\n              <Route path=\"/register\">\r\n                <Register />\r\n              </Route>\r\n\r\n              <Route path=\"/forgotten-password/:token\" component={ForgottenPasswordReset} />\r\n              <Route exact path=\"/forgotten-password\">\r\n                <ForgottenPassword />\r\n              </Route>\r\n\r\n              <Route path=\"/verify-user/:verifyToken\" component={VerifyUser} />\r\n              <Route path=\"/pricing\">\r\n                <PricingPage />\r\n              </Route>\r\n              <Route path=\"/subscribe\">\r\n                <SubscribePage />\r\n              </Route>\r\n              <Route path=\"/documentation/schema-description\">\r\n                <DocumentationSchemaDescription />\r\n              </Route>\r\n              <Route path=\"/documentation/obtain-token\">\r\n                <DocumentationObtainToken />\r\n              </Route>\r\n              <Route path=\"/documentation/todo-app\">\r\n                <DocumentationCreateTodoApp />\r\n              </Route>\r\n              <Route path=\"/user/projects/create\" component={ProjectEdit} />\r\n              <Route path=\"/user/projects/:projectId/graphiql\" component={GQLPlayground} />\r\n              <Route path=\"/user/projects/:projectId/exports/:id\" component={ExportEdit} />\r\n              <Route path=\"/user/projects/:projectId/exports\" component={ExportList} />\r\n              <Route path=\"/user/projects/:projectId/files\" component={ProjectFilesList} />\r\n              <Route path=\"/user/projects/:projectId\" component={ProjectEdit} />\r\n              <Route path=\"/user/projects\">\r\n                <ProjectList />\r\n              </Route>\r\n\r\n              <Route path=\"/user/info\">\r\n                <UserInfo />\r\n              </Route>\r\n              <Route path=\"/admin/projects\">\r\n                <ProjectAdminList />\r\n              </Route>\r\n              <Route path=\"/admin/users\">\r\n                <UserList adminMode={true} />\r\n              </Route>\r\n              <Route path=\"/admin/roles\">\r\n                <UserRoleList adminMode={true} />\r\n              </Route>\r\n              <Route path=\"/admin/subsribes\">\r\n                <SubscibesListPage adminMode={true} />\r\n              </Route>\r\n              <Route path=\"/user/roles/create\" component={UserRoleEdit} />\r\n              <Route path=\"/user/roles/:id\" component={UserRoleEdit} />\r\n            </Switch>\r\n          </div>\r\n        </Router>\r\n      </ApolloProvider>\r\n    </Provider>\r\n  )\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}